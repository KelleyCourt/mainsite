
> ccsh-master@1.0.0 start C:\Users\xichentop\Documents\ContraCostaInternship\mainsite-xc\server
> webpack --config ../client/webpack.config.js && nodemon index.js --exec babel-node --presets es2015,stage-2

Hash: 95f239147f45c2604529
Version: webpack 3.10.0
Time: 45446ms
                                 Asset     Size  Chunks                    Chunk Names
   assets/images/ccsc-logo-26kbdcc.svg   163 kB          [emitted]         
assets/images/ccsc-logo-sm-7ruwDm-.svg   162 kB          [emitted]         
                             bundle.js  1.05 MB       0  [emitted]  [big]  main
        src/public/stylesheets/app.css  57.7 kB       0  [emitted]         main
  [22] ./src/actions/types.js 2.78 kB {0} [built]
 [270] ./src/index.js 2.56 kB {0} [built]
 [386] ./src/router.js 13.4 kB {0} [built]
 [771] ./src/reducers/index.js 2.44 kB {0} [built]
 [773] ./src/reducers/user_reducer.js 1.71 kB {0} [built]
 [777] ./src/reducers/site_data_reducer.js 1.31 kB {0} [built]
 [778] ./src/reducers/chatlog.js 1.45 kB {0} [built]
 [779] ./src/reducers/chatUserInput.js 439 bytes {0} [built]
 [780] ./src/reducers/botStatusReducer.js 1.46 kB {0} [built]
 [781] ./src/reducers/checklist_reducer.js 3.56 kB {0} [built]
 [782] ./src/reducers/todos.js 2.81 kB {0} [built]
 [784] ./src/reducers/loading.js 453 bytes {0} [built]
 [785] ./src/reducers/visibilityFilter.js 423 bytes {0} [built]
 [786] ./src/services/data-service.js 851 bytes {0} [built]
 [793] ./src/public/stylesheets/app.scss 41 bytes {0} [built]
    + 779 hidden modules
Child extract-text-webpack-plugin node_modules/extract-text-webpack-plugin/dist node_modules/css-loader/index.js!node_modules/sass-loader/lib/loader.js!node_modules/react-table/react-table.css:
       2 modules
Child extract-text-webpack-plugin node_modules/extract-text-webpack-plugin/dist node_modules/css-loader/index.js!node_modules/sass-loader/lib/loader.js!src/public/stylesheets/app.scss:
       [0] ./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js!./src/public/stylesheets/app.scss 50.3 kB {0} [built]
        + 1 hidden module
[33m[nodemon] 1.12.1[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching: *.*[39m
[32m[nodemon] starting `babel-node index.js --presets es2015,stage-2`[39m
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":16992,"level":40,"msg":"Using http for redirectUrl is not recommended, please consider using https","time":"2018-02-05T16:35:03.529Z","v":0}
C:\Users\xichentop\Documents\ContraCostaInternship\mainsite-xc\server
Connected to DB
handleRender for req:  IncomingMessage {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 16384,
     buffer: BufferList { head: null, tail: null, length: 0 },
     length: 0,
     pipes: null,
     pipesCount: 0,
     flowing: null,
     ended: true,
     endEmitted: false,
     reading: false,
     sync: true,
     needReadable: false,
     emittedReadable: true,
     readableListening: false,
     resumeScheduled: false,
     defaultEncoding: 'utf8',
     ranOut: false,
     awaitDrain: 0,
     readingMore: true,
     decoder: null,
     encoding: null },
  readable: true,
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  socket: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 2260,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 220660,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1217780,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 112194,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 116478,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 1,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end] } },
  connection: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 2260,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 220660,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1217780,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 112194,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 116478,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 1,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end] } },
  httpVersionMajor: 1,
  httpVersionMinor: 1,
  httpVersion: '1.1',
  complete: true,
  headers: 
   { host: 'localhost:3000',
     connection: 'keep-alive',
     'upgrade-insecure-requests': '1',
     'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     referer: 'http://localhost:3000/login',
     'accept-encoding': 'gzip, deflate, br',
     'accept-language': 'en-US,en;q=0.9',
     cookie: 'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE' },
  rawHeaders: 
   [ 'Host',
     'localhost:3000',
     'Connection',
     'keep-alive',
     'Upgrade-Insecure-Requests',
     '1',
     'User-Agent',
     'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     'Accept',
     'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'Referer',
     'http://localhost:3000/login',
     'Accept-Encoding',
     'gzip, deflate, br',
     'Accept-Language',
     'en-US,en;q=0.9',
     'Cookie',
     'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE' ],
  trailers: {},
  rawTrailers: [],
  upgrade: false,
  url: '/api/auth/azure-login',
  method: 'GET',
  statusCode: null,
  statusMessage: null,
  client: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 2260,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 220660,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1217780,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 112194,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 116478,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 1,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end] } },
  _consuming: false,
  _dumped: false,
  next: [Function: next],
  baseUrl: '',
  originalUrl: '/api/auth/azure-login',
  _parsedUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/azure-login',
     path: '/api/auth/azure-login',
     href: '/api/auth/azure-login',
     _raw: '/api/auth/azure-login' },
  params: {},
  query: {},
  res: 
   ServerResponse {
     domain: null,
     _events: { finish: [Function: resOnFinish] },
     _eventsCount: 1,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: false,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: true,
     useChunkedEncodingByDefault: true,
     sendDate: true,
     _removedHeader: {},
     _contentLength: null,
     _hasBody: true,
     _trailer: '',
     finished: false,
     _headerSent: false,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 220660,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 116478,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular] },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 220660,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 116478,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular] },
     _header: null,
     _headers: { 'x-powered-by': 'Express' },
     _headerNames: { 'x-powered-by': 'X-Powered-By' },
     _onPendingData: [Function: updateOutgoingData],
     req: [Circular],
     locals: {},
     writeHead: [Function: writeHead],
     end: [Function: end] },
  _parsedOriginalUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/azure-login',
     path: '/api/auth/azure-login',
     href: '/api/auth/azure-login',
     _raw: '/api/auth/azure-login' },
  sessionStore: 
   MongoStore {
     domain: null,
     _events: 
      { disconnect: [Function: ondisconnect],
        connect: [Function: onconnect] },
     _eventsCount: 2,
     _maxListeners: undefined,
     ttl: 1209600,
     collectionName: 'sessions',
     autoRemove: 'native',
     autoRemoveInterval: 10,
     transformFunctions: 
      { serialize: [Function: stringify],
        unserialize: [Function: parse] },
     options: { mongooseConnection: [Object], clear_interval: 86400 },
     state: 'connected',
     generate: [Function],
     db: 
      Db {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        s: [Object],
        serverConfig: [Getter],
        bufferMaxEntries: [Getter],
        databaseName: [Getter] },
     collectionReadyPromise: Promise { [Object] },
     collection: Collection { s: [Object] } },
  sessionID: 'R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL',
  session: 
   Session {
     cookie: 
      { path: '/',
        _expires: 2018-02-06T16:36:46.640Z,
        originalMaxAge: 86399999,
        httpOnly: true },
     passport: { user: 'xchen@contracosta.courts.ca.gov' } },
  secret: undefined,
  cookies: { 'connect.sid': 's:R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw++TohQY8/YlSxxXW1AgPhmysT1xLoD7PEkUE' },
  signedCookies: {} }
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `babel-node index.js --presets es2015,stage-2`[39m
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `babel-node index.js --presets es2015,stage-2`[39m
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18488,"level":40,"msg":"Using http for redirectUrl is not recommended, please consider using https","time":"2018-02-05T16:41:13.279Z","v":0}
C:\Users\xichentop\Documents\ContraCostaInternship\mainsite-xc\server
Connected to DB
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `babel-node index.js --presets es2015,stage-2`[39m
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":40,"msg":"Using http for redirectUrl is not recommended, please consider using https","time":"2018-02-05T16:41:28.422Z","v":0}
C:\Users\xichentop\Documents\ContraCostaInternship\mainsite-xc\server
Connected to DB
deserializing user...
adding header
we are getting a get request
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":30,"msg":"metadataUrl is: https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9","time":"2018-02-05T16:41:38.284Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":30,"msg":"received the following items in params: {\"policy\":null,\"cachekey\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":{\"url\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":null,\"authtype\":\"oidc\"}}","time":"2018-02-05T16:41:38.284Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":23468,"level":30,"msg":"Parsing JSON retreived from the endpoint","time":"2018-02-05T16:41:38.442Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":23468,"level":30,"msg":"Request to update the Open ID Connect Metadata","time":"2018-02-05T16:41:38.443Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":23468,"level":30,"msg":"Algorithm retrieved was:  [ 'RS256' ]","time":"2018-02-05T16:41:38.443Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":23468,"level":30,"msg":"Issuer we are using is:  https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/","time":"2018-02-05T16:41:38.443Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":23468,"level":30,"msg":"Key Endpoint we will use is:  https://login.microsoftonline.com/common/discovery/keys","time":"2018-02-05T16:41:38.443Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":23468,"level":30,"msg":"Authentication endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/authorize","time":"2018-02-05T16:41:38.443Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":23468,"level":30,"msg":"Token endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/token","time":"2018-02-05T16:41:38.443Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":23468,"level":30,"msg":"User info endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/openid/userinfo","time":"2018-02-05T16:41:38.444Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":23468,"level":30,"msg":"The logout endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/logout","time":"2018-02-05T16:41:38.444Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":30,"msg":"entering Strategy.prototype._flowInitializationHandler","time":"2018-02-05T16:41:38.614Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":30,"msg":"We are sending the response_type:  code id_token","time":"2018-02-05T16:41:38.614Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":30,"msg":"We are sending the response_mode:  form_post","time":"2018-02-05T16:41:38.614Z","v":0}
[0mGET /api/auth/azure-login [36m302 [0m417.964 ms - 0[0m
deserializing user...
adding header
we have received a post request:  IncomingMessage {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 16384,
     buffer: BufferList { head: null, tail: null, length: 0 },
     length: 0,
     pipes: null,
     pipesCount: 0,
     flowing: true,
     ended: true,
     endEmitted: true,
     reading: false,
     sync: true,
     needReadable: false,
     emittedReadable: false,
     readableListening: false,
     resumeScheduled: false,
     defaultEncoding: 'utf8',
     ranOut: false,
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: false,
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  socket: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 12329,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 17106,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 24195 } },
  connection: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 12329,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 17106,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 24195 } },
  httpVersionMajor: 1,
  httpVersionMinor: 1,
  httpVersion: '1.1',
  complete: true,
  headers: 
   { host: 'localhost:3000',
     connection: 'keep-alive',
     'content-length': '2231',
     'cache-control': 'max-age=0',
     'upgrade-insecure-requests': '1',
     origin: 'null',
     'content-type': 'application/x-www-form-urlencoded',
     'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'accept-encoding': 'gzip, deflate, br',
     'accept-language': 'en-US,en;q=0.9',
     cookie: 'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517848898615.fbd08e9a6335a4c3df307cd18241271176d54fbc1ba5fb173aa62daf8c84d2804b81946a53f5664f4e4b435828ce208be041c58c50e3bb46757e320311401022b2b0510f3d8ee3b1e139db5231b10c95bfce551b02e5bc89fffc20f5043180001d524d8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.a600aaa07d90102c17b9a3f5bd057a3c=0' },
  rawHeaders: 
   [ 'Host',
     'localhost:3000',
     'Connection',
     'keep-alive',
     'Content-Length',
     '2231',
     'Cache-Control',
     'max-age=0',
     'Upgrade-Insecure-Requests',
     '1',
     'Origin',
     'null',
     'Content-Type',
     'application/x-www-form-urlencoded',
     'User-Agent',
     'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     'Accept',
     'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'Accept-Encoding',
     'gzip, deflate, br',
     'Accept-Language',
     'en-US,en;q=0.9',
     'Cookie',
     'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517848898615.fbd08e9a6335a4c3df307cd18241271176d54fbc1ba5fb173aa62daf8c84d2804b81946a53f5664f4e4b435828ce208be041c58c50e3bb46757e320311401022b2b0510f3d8ee3b1e139db5231b10c95bfce551b02e5bc89fffc20f5043180001d524d8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.a600aaa07d90102c17b9a3f5bd057a3c=0' ],
  trailers: {},
  rawTrailers: [],
  upgrade: false,
  url: '/api/auth/openid/return',
  method: 'POST',
  statusCode: null,
  statusMessage: null,
  client: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 12329,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 17106,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 24195 } },
  _consuming: true,
  _dumped: false,
  next: [Function: next],
  baseUrl: '',
  originalUrl: '/api/auth/openid/return',
  _parsedUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  params: {},
  query: {},
  res: 
   ServerResponse {
     domain: null,
     _events: { finish: [Object], end: [Function: onevent] },
     _eventsCount: 2,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: false,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: true,
     useChunkedEncodingByDefault: true,
     sendDate: true,
     _removedHeader: {},
     _contentLength: null,
     _hasBody: true,
     _trailer: '',
     finished: false,
     _headerSent: false,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1773,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 17106,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1773,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 17106,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     _header: null,
     _headers: 
      { 'x-powered-by': 'Express',
        'access-control-allow-origin': '*',
        'access-control-allow-methods': 'PUT, GET, POST, DELETE, OPTIONS',
        'access-control-allow-headers': 'Origin, X-Requested-With, Content-Type, Accept, Authorization, Access-Control-Allow-Credentials',
        'access-control-allow-credentials': 'true' },
     _headerNames: 
      { 'x-powered-by': 'X-Powered-By',
        'access-control-allow-origin': 'Access-Control-Allow-Origin',
        'access-control-allow-methods': 'Access-Control-Allow-Methods',
        'access-control-allow-headers': 'Access-Control-Allow-Headers',
        'access-control-allow-credentials': 'Access-Control-Allow-Credentials' },
     _onPendingData: [Function: updateOutgoingData],
     req: [Circular],
     locals: {},
     writeHead: [Function: writeHead],
     end: [Function: end],
     _startAt: undefined,
     _startTime: undefined,
     __onFinished: { [Function: listener] queue: [Object] } },
  _parsedOriginalUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  sessionStore: 
   MongoStore {
     domain: null,
     _events: 
      { disconnect: [Function: ondisconnect],
        connect: [Function: onconnect] },
     _eventsCount: 2,
     _maxListeners: undefined,
     ttl: 1209600,
     collectionName: 'sessions',
     autoRemove: 'native',
     autoRemoveInterval: 10,
     transformFunctions: 
      { serialize: [Function: stringify],
        unserialize: [Function: parse] },
     options: { mongooseConnection: [Object], clear_interval: 86400 },
     state: 'connected',
     generate: [Function],
     db: 
      Db {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        s: [Object],
        serverConfig: [Getter],
        bufferMaxEntries: [Getter],
        databaseName: [Getter] },
     collectionReadyPromise: Promise { [Object] },
     collection: Collection { s: [Object] } },
  sessionID: 'R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL',
  session: 
   Session {
     cookie: 
      { path: '/',
        _expires: 2018-02-06T16:41:38.616Z,
        originalMaxAge: 86399999,
        httpOnly: true },
     passport: { user: 'xchen@contracosta.courts.ca.gov' } },
  secret: undefined,
  cookies: 
   { 'connect.sid': 's:R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw++TohQY8/YlSxxXW1AgPhmysT1xLoD7PEkUE',
     'passport-aad.1517848898615.fbd08e9a6335a4c3df307cd18241271176d54fbc1ba5fb173aa62daf8c84d2804b81946a53f5664f4e4b435828ce208be041c58c50e3bb46757e320311401022b2b0510f3d8ee3b1e139db5231b10c95bfce551b02e5bc89fffc20f5043180001d524d8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.a600aaa07d90102c17b9a3f5bd057a3c': '0' },
  signedCookies: {},
  body: 
   { code: 'AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzeTjCeKl7fJFY65wBUFW58JY1CsQNXjFYNF0V45uQH_Il8jzyne6pui0Z18okzyNUB7j9z9U1S4uvSBsknO5xHMUj8SbVDrJXyOnQuBMq_JoVihz5HDsnGqvPIv-Pi_7etBdJGtKn3z1Kz3oxUf3aOx3uIiNTm7vlznGW0IMapWUI9-1OZl01GDgjqIB0zzGOAHIZ7rRT7Mpt8aPfQlYr8MdqQYg5_gBGeGDfwuDVPiaLb93sy1zmLHNcYSsyE504MxJOyCaFi-fc67YjCKOW_kIAlN8Wo5GKFXx1CWFtYM5gkRm1g6_MBrmlajifOoJ7n1z1-Q4eHQqzc7ysGcsYyHf9Sq6qs85EkZyNulEL_Yi6CAvZeGcZ0b5ffIdvKjeNi47ERioOxdgLKh0fMjJtNX1U1QzJ-P3S8u-k6xQnRXwcGS1fh-MQVEMNaYsIa41HOrZoD1tOfUPlS25x3X77A_gayUugSUT_clXGla0Uu10iq7slyczgZjdtIx3r-88rvPRA2dk19usps2h_NMscgIiOPLvdJGv83RBqM4y3f1ESvPG6dmQMwIDQaE1uigHhkzDgxDSuvHtkaZnGpCBURKZGIoNoQKyQp-CU0SsuAAIgAA',
     id_token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODQ4NTk3LCJuYmYiOjE1MTc4NDg1OTcsImV4cCI6MTUxNzg1MjQ5NywiYWlvIjoiQVNRQTIvOEdBQUFBVWl5ejQ2blY2QU9qSGRxcnoySzhKSGh5SCtGSkxxN2txcEdnWGJkaU50VT0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6Ik9jbFBTVnMwbGRQSi00WjIxSW16cUEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoicE9yRW55UkVhMVY1bG9YRV82M2p5TGZuT0JZM2lkTzEiLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6IktuM25jTVRveGtTZ0ZwSUtXcGtWQUEiLCJ2ZXIiOiIxLjAifQ.Wr816gcodwQnK7NwWdcL5jZNjfwg2TfO1BSWh6CseYWz-LkWzWHubWhS5Mim1bgEx_2vrTC8FjXAddRj14Pf1v7hCVrao7DZWCSYqtssuCnMQWWFeDBJEqR2Lna-Ug24sYuBMgC4CM0w2PpTnQOuTtqoV1_prm70vqg482Lxrrwm0lYxBo95GI-c7AMEnEHrfvdz2jG4Dwt5PdA_WXT5OgxF8Id4S-qxVYXB2h5nxVmzTr8or__sVJ7B9dpV8KWC19sD2VyZU3rw5bwIzEZPR4RD9iCXvxgj9dJT4FkJv3jCroHu5Ph_fLG-HmiYYddAESv6Vv-pWrcAcZ2wupfRSw',
     state: 'CUSTOMhkYHdWFc3Ee2mjv1724JyAUm1Oo5fV02my_state',
     session_state: 'a4eab50d-afe3-40e1-92b7-517677a51945' },
  _body: true,
  length: undefined,
  read: [Function],
  _startAt: [ 728808, 908566892 ],
  _startTime: 2018-02-05T16:41:39.248Z,
  _remoteAddress: '::1',
  _passport: 
   { instance: 
      Authenticator {
        _key: 'passport',
        _strategies: [Object],
        _serializers: [Object],
        _deserializers: [Object],
        _infoTransformers: [],
        _framework: [Object],
        _userProperty: 'user',
        Authenticator: [Function: Authenticator],
        Passport: [Function: Authenticator],
        Strategy: [Object],
        strategies: [Object] },
     session: { user: 'xchen@contracosta.courts.ca.gov' } },
  user: 
   { _id: 5a737e49e440d2445c40b21c,
     updatedAt: 2018-02-01T20:53:29.268Z,
     createdAt: 2018-02-01T20:53:29.268Z,
     authType: 'azure',
     email: 'xchen@contracosta.courts.ca.gov',
     __v: 0,
     role: 'Member',
     cases: [],
     profile: { firstName: 'Xi', lastName: 'Chen' } },
  route: 
   Route {
     path: '/api/auth/openid/return',
     stack: [ [Object], [Object] ],
     methods: { post: true } } }
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":30,"msg":"metadataUrl is: https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9","time":"2018-02-05T16:41:39.349Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":30,"msg":"received the following items in params: {\"id_token\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODQ4NTk3LCJuYmYiOjE1MTc4NDg1OTcsImV4cCI6MTUxNzg1MjQ5NywiYWlvIjoiQVNRQTIvOEdBQUFBVWl5ejQ2blY2QU9qSGRxcnoySzhKSGh5SCtGSkxxN2txcEdnWGJkaU50VT0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6Ik9jbFBTVnMwbGRQSi00WjIxSW16cUEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoicE9yRW55UkVhMVY1bG9YRV82M2p5TGZuT0JZM2lkTzEiLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6IktuM25jTVRveGtTZ0ZwSUtXcGtWQUEiLCJ2ZXIiOiIxLjAifQ.Wr816gcodwQnK7NwWdcL5jZNjfwg2TfO1BSWh6CseYWz-LkWzWHubWhS5Mim1bgEx_2vrTC8FjXAddRj14Pf1v7hCVrao7DZWCSYqtssuCnMQWWFeDBJEqR2Lna-Ug24sYuBMgC4CM0w2PpTnQOuTtqoV1_prm70vqg482Lxrrwm0lYxBo95GI-c7AMEnEHrfvdz2jG4Dwt5PdA_WXT5OgxF8Id4S-qxVYXB2h5nxVmzTr8or__sVJ7B9dpV8KWC19sD2VyZU3rw5bwIzEZPR4RD9iCXvxgj9dJT4FkJv3jCroHu5Ph_fLG-HmiYYddAESv6Vv-pWrcAcZ2wupfRSw\",\"code\":\"AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzeTjCeKl7fJFY65wBUFW58JY1CsQNXjFYNF0V45uQH_Il8jzyne6pui0Z18okzyNUB7j9z9U1S4uvSBsknO5xHMUj8SbVDrJXyOnQuBMq_JoVihz5HDsnGqvPIv-Pi_7etBdJGtKn3z1Kz3oxUf3aOx3uIiNTm7vlznGW0IMapWUI9-1OZl01GDgjqIB0zzGOAHIZ7rRT7Mpt8aPfQlYr8MdqQYg5_gBGeGDfwuDVPiaLb93sy1zmLHNcYSsyE504MxJOyCaFi-fc67YjCKOW_kIAlN8Wo5GKFXx1CWFtYM5gkRm1g6_MBrmlajifOoJ7n1z1-Q4eHQqzc7ysGcsYyHf9Sq6qs85EkZyNulEL_Yi6CAvZeGcZ0b5ffIdvKjeNi47ERioOxdgLKh0fMjJtNX1U1QzJ-P3S8u-k6xQnRXwcGS1fh-MQVEMNaYsIa41HOrZoD1tOfUPlS25x3X77A_gayUugSUT_clXGla0Uu10iq7slyczgZjdtIx3r-88rvPRA2dk19usps2h_NMscgIiOPLvdJGv83RBqM4y3f1ESvPG6dmQMwIDQaE1uigHhkzDgxDSuvHtkaZnGpCBURKZGIoNoQKyQp-CU0SsuAAIgAA\",\"state\":\"CUSTOMhkYHdWFc3Ee2mjv1724JyAUm1Oo5fV02my_state\",\"nonce\":\"pOrEnyREa1V5loXE_63jyLfnOBY3idO1\",\"resource\":\"https://graph.windows.net\",\"cachekey\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":{\"url\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":null,\"authtype\":\"oidc\"}}","time":"2018-02-05T16:41:39.349Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":30,"msg":"entering Strategy.prototype._hybridFlowHandler, received code: AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzeTjCeKl7fJFY65wBUFW58JY1CsQNXjFYNF0V45uQH_Il8jzyne6pui0Z18okzyNUB7j9z9U1S4uvSBsknO5xHMUj8SbVDrJXyOnQuBMq_JoVihz5HDsnGqvPIv-Pi_7etBdJGtKn3z1Kz3oxUf3aOx3uIiNTm7vlznGW0IMapWUI9-1OZl01GDgjqIB0zzGOAHIZ7rRT7Mpt8aPfQlYr8MdqQYg5_gBGeGDfwuDVPiaLb93sy1zmLHNcYSsyE504MxJOyCaFi-fc67YjCKOW_kIAlN8Wo5GKFXx1CWFtYM5gkRm1g6_MBrmlajifOoJ7n1z1-Q4eHQqzc7ysGcsYyHf9Sq6qs85EkZyNulEL_Yi6CAvZeGcZ0b5ffIdvKjeNi47ERioOxdgLKh0fMjJtNX1U1QzJ-P3S8u-k6xQnRXwcGS1fh-MQVEMNaYsIa41HOrZoD1tOfUPlS25x3X77A_gayUugSUT_clXGla0Uu10iq7slyczgZjdtIx3r-88rvPRA2dk19usps2h_NMscgIiOPLvdJGv83RBqM4y3f1ESvPG6dmQMwIDQaE1uigHhkzDgxDSuvHtkaZnGpCBURKZGIoNoQKyQp-CU0SsuAAIgAA, received id_token: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODQ4NTk3LCJuYmYiOjE1MTc4NDg1OTcsImV4cCI6MTUxNzg1MjQ5NywiYWlvIjoiQVNRQTIvOEdBQUFBVWl5ejQ2blY2QU9qSGRxcnoySzhKSGh5SCtGSkxxN2txcEdnWGJkaU50VT0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6Ik9jbFBTVnMwbGRQSi00WjIxSW16cUEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoicE9yRW55UkVhMVY1bG9YRV82M2p5TGZuT0JZM2lkTzEiLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6IktuM25jTVRveGtTZ0ZwSUtXcGtWQUEiLCJ2ZXIiOiIxLjAifQ.Wr816gcodwQnK7NwWdcL5jZNjfwg2TfO1BSWh6CseYWz-LkWzWHubWhS5Mim1bgEx_2vrTC8FjXAddRj14Pf1v7hCVrao7DZWCSYqtssuCnMQWWFeDBJEqR2Lna-Ug24sYuBMgC4CM0w2PpTnQOuTtqoV1_prm70vqg482Lxrrwm0lYxBo95GI-c7AMEnEHrfvdz2jG4Dwt5PdA_WXT5OgxF8Id4S-qxVYXB2h5nxVmzTr8or__sVJ7B9dpV8KWC19sD2VyZU3rw5bwIzEZPR4RD9iCXvxgj9dJT4FkJv3jCroHu5Ph_fLG-HmiYYddAESv6Vv-pWrcAcZ2wupfRSw","time":"2018-02-05T16:41:39.350Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":30,"msg":"token decoded:  { header: \n   { typ: 'JWT',\n     alg: 'RS256',\n     x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n     kid: 'z44wMdHu8wKsumrbfaK98qxs5YI' },\n  payload: \n   { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n     iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n     iat: 1517848597,\n     nbf: 1517848597,\n     exp: 1517852497,\n     aio: 'ASQA2/8GAAAAUiyz46nV6AOjHdqrz2K8JHhyH+FJLq7kqpGgXbdiNtU=',\n     amr: [ 'pwd' ],\n     c_hash: 'OclPSVs0ldPJ-4Z21ImzqA',\n     family_name: 'Chen',\n     given_name: 'Xi',\n     ipaddr: '73.41.83.228',\n     name: 'Xi Chen',\n     nonce: 'pOrEnyREa1V5loXE_63jyLfnOBY3idO1',\n     oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n     onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n     sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n     tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n     unique_name: 'XChen@contracosta.courts.ca.gov',\n     upn: 'XChen@contracosta.courts.ca.gov',\n     uti: 'Kn3ncMToxkSgFpIKWpkVAA',\n     ver: '1.0' },\n  signature: 'Wr816gcodwQnK7NwWdcL5jZNjfwg2TfO1BSWh6CseYWz-LkWzWHubWhS5Mim1bgEx_2vrTC8FjXAddRj14Pf1v7hCVrao7DZWCSYqtssuCnMQWWFeDBJEqR2Lna-Ug24sYuBMgC4CM0w2PpTnQOuTtqoV1_prm70vqg482Lxrrwm0lYxBo95GI-c7AMEnEHrfvdz2jG4Dwt5PdA_WXT5OgxF8Id4S-qxVYXB2h5nxVmzTr8or__sVJ7B9dpV8KWC19sD2VyZU3rw5bwIzEZPR4RD9iCXvxgj9dJT4FkJv3jCroHu5Ph_fLG-HmiYYddAESv6Vv-pWrcAcZ2wupfRSw' }","time":"2018-02-05T16:41:39.352Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":23468,"level":30,"msg":"working on key: { kty: 'RSA',\n  use: 'sig',\n  kid: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  n: 'p3HhMQsqmgSjeiDsZ1ay-UAFgFMdBYgGGkGa2L0ew6_q3b2x9Ccdru_amVp1HXV2FVwbpK0HYsTSRvWIiCRRT-AgMSIlap7qlg8-iYvdFIJsorf84-sRN9Iq3F1pKD-W9vqsitcEbzljHCLSS2vUKSb7itwjc_AKjky3cX5ndMupQESZNTbiwanM9dAJ7K87pURXN66lS_q9u7wxWvjc3iLEp25PU_06moGDMe5BWuD6Rb_pdFM1plm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wSbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0Q',\n  e: 'AQAB',\n  x5c: [ 'MIIDBTCCAe2gAwIBAgIQaD0+a2FNl5JMaE2/7KUP5zANBgkqhkiG9w0BAQsFADAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MB4XDTE3MTEyODAwMDAwMFoXDTE5MTEyOTAwMDAwMFowLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKdx4TELKpoEo3og7GdWsvlABYBTHQWIBhpBmti9HsOv6t29sfQnHa7v2pladR11dhVcG6StB2LE0kb1iIgkUU/gIDEiJWqe6pYPPomL3RSCbKK3/OPrETfSKtxdaSg/lvb6rIrXBG85Yxwi0ktr1Ckm+4rcI3PwCo5Mt3F+Z3TLqUBEmTU24sGpzPXQCeyvO6VEVzeupUv6vbu8MVr43N4ixKduT1P9OpqBgzHuQVrg+kW/6XRTNaZZthTlITG8VEa8I02S2Q4VyosdzcrMQmRp75MTA2YKdqTexTKmWKaXFIcGCbvMEm35sIfIVziQ8YMSEC+7GBoh3k2g2BFRgtECAwEAAaMhMB8wHQYDVR0OBBYEFGpho/kx4FeBzTTBIbYVWfFdGIblMA0GCSqGSIb3DQEBCwUAA4IBAQBgaeYvuV4sYJZNPXbxN6FIc0oA4bCg1+DFalT3qzW0bFbl7pXP5YPY/adZlT8+cTznjMgzPPvcXaQdcytR16YqHJVX0ik67NrrQ3g0TtGLc42SuzE+6awryiLQY0Zd799bJwrRcDZUqm/6jKOEOd+utf+3o+VU57w+n7iQLuSL1mKYGMsyzMYCj6xVtYl75iam86leT0/tlXHJ8oqxU5w3xVY6P7v0Sz2UteQNQvhKi6R1/cjfiJUp+OzHpaEor6ls7HSvojY2zm1DIaH6EBp2L9TBFt8IALAEN5hX6XYpKmCHRUlzYwoWo7YwzKiot0XdbDW+zPKGPKtIlbg6cw/+' ] }","time":"2018-02-05T16:41:39.352Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":30,"msg":"PEMkey generated: -----BEGIN RSA PUBLIC KEY-----\nMIIBCgKCAQEAp3HhMQsqmgSjeiDsZ1ay+UAFgFMdBYgGGkGa2L0ew6/q3b2x9Ccd\nru/amVp1HXV2FVwbpK0HYsTSRvWIiCRRT+AgMSIlap7qlg8+iYvdFIJsorf84+sR\nN9Iq3F1pKD+W9vqsitcEbzljHCLSS2vUKSb7itwjc/AKjky3cX5ndMupQESZNTbi\nwanM9dAJ7K87pURXN66lS/q9u7wxWvjc3iLEp25PU/06moGDMe5BWuD6Rb/pdFM1\nplm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wS\nbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0QIDAQAB\n-----END RSA PUBLIC KEY-----\n","time":"2018-02-05T16:41:39.353Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":30,"msg":"Claims received:  { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n  iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n  iat: 1517848597,\n  nbf: 1517848597,\n  exp: 1517852497,\n  aio: 'ASQA2/8GAAAAUiyz46nV6AOjHdqrz2K8JHhyH+FJLq7kqpGgXbdiNtU=',\n  amr: [ 'pwd' ],\n  c_hash: 'OclPSVs0ldPJ-4Z21ImzqA',\n  family_name: 'Chen',\n  given_name: 'Xi',\n  ipaddr: '73.41.83.228',\n  name: 'Xi Chen',\n  nonce: 'pOrEnyREa1V5loXE_63jyLfnOBY3idO1',\n  oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n  onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n  sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n  tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n  unique_name: 'XChen@contracosta.courts.ca.gov',\n  upn: 'XChen@contracosta.courts.ca.gov',\n  uti: 'Kn3ncMToxkSgFpIKWpkVAA',\n  ver: '1.0' }","time":"2018-02-05T16:41:39.358Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":30,"msg":"entering Strategy.prototype._authCodeFlowHandler, received code: AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzeTjCeKl7fJFY65wBUFW58JY1CsQNXjFYNF0V45uQH_Il8jzyne6pui0Z18okzyNUB7j9z9U1S4uvSBsknO5xHMUj8SbVDrJXyOnQuBMq_JoVihz5HDsnGqvPIv-Pi_7etBdJGtKn3z1Kz3oxUf3aOx3uIiNTm7vlznGW0IMapWUI9-1OZl01GDgjqIB0zzGOAHIZ7rRT7Mpt8aPfQlYr8MdqQYg5_gBGeGDfwuDVPiaLb93sy1zmLHNcYSsyE504MxJOyCaFi-fc67YjCKOW_kIAlN8Wo5GKFXx1CWFtYM5gkRm1g6_MBrmlajifOoJ7n1z1-Q4eHQqzc7ysGcsYyHf9Sq6qs85EkZyNulEL_Yi6CAvZeGcZ0b5ffIdvKjeNi47ERioOxdgLKh0fMjJtNX1U1QzJ-P3S8u-k6xQnRXwcGS1fh-MQVEMNaYsIa41HOrZoD1tOfUPlS25x3X77A_gayUugSUT_clXGla0Uu10iq7slyczgZjdtIx3r-88rvPRA2dk19usps2h_NMscgIiOPLvdJGv83RBqM4y3f1ESvPG6dmQMwIDQaE1uigHhkzDgxDSuvHtkaZnGpCBURKZGIoNoQKyQp-CU0SsuAAIgAA","time":"2018-02-05T16:41:39.359Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":30,"msg":"In _getAccessTokenBySecretOrAssertion: we are using client secret","time":"2018-02-05T16:41:39.360Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":30,"msg":"received id_token:  eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODQ4NTk3LCJuYmYiOjE1MTc4NDg1OTcsImV4cCI6MTUxNzg1MjQ5NywiYWlvIjoiWTJOZ1lQRGUrOUwzaGVuWkI0SDkxdGsyY3J0VkQrb0tMRkswQ0dneFhjM05teis3TXhZQSIsImFtciI6WyJwd2QiXSwiZmFtaWx5X25hbWUiOiJDaGVuIiwiZ2l2ZW5fbmFtZSI6IlhpIiwiaXBhZGRyIjoiNzMuNDEuODMuMjI4IiwibmFtZSI6IlhpIENoZW4iLCJub25jZSI6InBPckVueVJFYTFWNWxvWEVfNjNqeUxmbk9CWTNpZE8xIiwib2lkIjoiOWY1NTRmZjItZDQ1NS00OTEyLWJjMTctZmI5MGFiNjc3MjY2Iiwib25wcmVtX3NpZCI6IlMtMS01LTIxLTQ5NzQwNDg1NS01OTc2MzU5OTItOTg4ODgyNTc2LTE0MjgwIiwic3ViIjoiekZkcVFleVYtX1pOZU03N2ZkeU5zRzhXOTR6Mnc5WlN2VTZmOWpOYjF6OCIsInRpZCI6IjhjYTlkOGYxLWQ5NzYtNDQ0NS1hM2NjLTNmZmMzZTI5YTNmZiIsInVuaXF1ZV9uYW1lIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInVwbiI6IlhDaGVuQGNvbnRyYWNvc3RhLmNvdXJ0cy5jYS5nb3YiLCJ1dGkiOiJ5djRKcWJyR0JFYWo0S0Zfdi0wVkFBIiwidmVyIjoiMS4wIn0.RFlw684k_B9flBg_2XGnoBrlA65XpV86RSH6fLOZvH4aF4sq82t5gkZJn5Mj5i5mcsNryCdjNBfaMciHBrjYZuTXV2x7z9uDlHn8rX0hD5LCq_sHnd3cp9R9eMhOYNsv9gd6Ucj9KOtD7FsWS-FcDSpEqtlJ20DD7J6101rGqiynuiLUC0VtwoBjzZugGLAMyn2AQs5FfIIVdotJ5i0SzZF30Xs7MM943R0bwenSLXJzDqToy3SCKFYfBgew4V_IdtwRLFVr1FlD1gQs9PNS-E9TCC4Yuzse9fLXYwiqZto8zHiinVrQ6JNvNseEdkcV0AGTrh40TpmZgcBT8y6UHg","time":"2018-02-05T16:41:39.602Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":30,"msg":"received access_token:  eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiJodHRwczovL2dyYXBoLndpbmRvd3MubmV0IiwiaXNzIjoiaHR0cHM6Ly9zdHMud2luZG93cy5uZXQvOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmLyIsImlhdCI6MTUxNzg0ODU5NywibmJmIjoxNTE3ODQ4NTk3LCJleHAiOjE1MTc4NTI0OTcsImFjciI6IjEiLCJhaW8iOiJBU1FBMi84R0FBQUEwRmNSdXVMa3NmbU00R3BaSzlWNkpoZmp3NVp6MTRzVnlaRlRXczNQQUJFPSIsImFtciI6WyJwd2QiXSwiYXBwaWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJhcHBpZGFjciI6IjEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm9pZCI6IjlmNTU0ZmYyLWQ0NTUtNDkxMi1iYzE3LWZiOTBhYjY3NzI2NiIsIm9ucHJlbV9zaWQiOiJTLTEtNS0yMS00OTc0MDQ4NTUtNTk3NjM1OTkyLTk4ODg4MjU3Ni0xNDI4MCIsInB1aWQiOiIxMDAzM0ZGRkEyNkVDOTBDIiwic2NwIjoiTWFpbC5SZWFkIG9mZmxpbmVfYWNjZXNzIG9wZW5pZCBwcm9maWxlIFVzZXIuUmVhZCIsInN1YiI6IjVMZWlBbTJONDQ5MWF2LUdtTE9fV081QVVmR0xuNmdWdjlEdU5oS2swU3ciLCJ0ZW5hbnRfcmVnaW9uX3Njb3BlIjoiTkEiLCJ0aWQiOiI4Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYiLCJ1bmlxdWVfbmFtZSI6IlhDaGVuQGNvbnRyYWNvc3RhLmNvdXJ0cy5jYS5nb3YiLCJ1cG4iOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXRpIjoieXY0SnFickdCRWFqNEtGX3YtMFZBQSIsInZlciI6IjEuMCJ9.LbReGKQVIMFo6_5d55sZz0Oh-Pgy3ccZbA6qjhWSD4e12fs_RRJ2UOMfzt0VBA8ViErWBZKoIbB1m_KPe4kS93SVlakZIXHzbBqRRJRLM5Tn1M9S4gAiQKZWsjvlhSzflL_Wr6UXZKq2OBX9hE04CLGAIfU8vkhTk5c8qK5fFAvKTRD0loUHnRFtfB1K1S22CPwOw_KwDlpxep6QaRfW4vcaLyOLRQUPplAn5lWqqKwOhSuapQxN1EERtfD8WQenzPHozTPY-wIOa6ln0OB2TTfkE_lySG5OIhuEUkQ1jvQfOc7a9FnJ3wOZpl1oWChgf6arIvKy3fl6z6zFbSbhIw","time":"2018-02-05T16:41:39.602Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":30,"msg":"received refresh_token:  AQABAAAAAABHh4kmS_aKT5XrjzxRAtHz7OfWHYOrkL3sV4Ip-vzi1wZ9gyW5U1lYZD8u85_YRKmC-VJeqUTONnT7xe9hmuXDHg6d3_X1uwp5T6TPhbAWafhWIAa56Iu5FHbSKT0nSO3urCPXlmLfnWlK41rl8apW0E7NQvsvHG-egkhmAzeoGW28q3dYvIJtqXYDIqPq23yYkDs3i9sZLqqeyREorOcGN2uUcA5Ha-bNcd5qt0o_XUzwY3v33DFlGtzT_s9B9SCR2-pDttvrOdIL_mpJ1y_nvH-zGUWejhB4z5GWlNoJ5zZj1mSGzg8sU1RPltB-2zNkjGOnsWhUO4s38FrfD_PERz1D143cv4vwwuOo9drkmAgzQqSKkSFhFM84fTMVldDwfvT8XA_-Cq85KLzINsBFGsWAYSJ4vJemZWNgL48YEPXUCrZSu8Lx13OioecqS_rhDq_5SF0dXJlhnZJgycSva396u6wxGeP5kpZcdD51i5JNdP8qTXFus9G-46nRAruFrA12w4Lx4BHqs0KKrhOVbl9kJDuCNYvtEJyppPVlFhKJe5wDrjjOJA2jiDvcGsZ9YOashneMiyG6zitrv2RGPBxCaOXYkSSMaeVVRNS-BfcNHs1Tv4G_p6UNRLBdhhrKTaMaza275NfT9B2OZu3ZsGnUJyBfRfhI23PXGiHVNbCCj_ru-itCcPW4LOJkN8eK8ZErVxecxsn1_UVgrAkSQJRDnUuNOO54MnjJkR5HRiXyeo_lBWGzHhtkskLpgRxa65msqV0LklW4xzynt630tn9RpSFVDnDOpytmSg_Gad_AK0_lamhQHb48lW5UvwQriANXIM_dRwM-6yETzAXlIAA","time":"2018-02-05T16:41:39.602Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":30,"msg":"token decoded:  { header: \n   { typ: 'JWT',\n     alg: 'RS256',\n     x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n     kid: 'z44wMdHu8wKsumrbfaK98qxs5YI' },\n  payload: \n   { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n     iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n     iat: 1517848597,\n     nbf: 1517848597,\n     exp: 1517852497,\n     aio: 'Y2NgYPDe+9L3henZB4H91tk2crtVD+oKLFK0CGgxXc3Nmz+7MxYA',\n     amr: [ 'pwd' ],\n     family_name: 'Chen',\n     given_name: 'Xi',\n     ipaddr: '73.41.83.228',\n     name: 'Xi Chen',\n     nonce: 'pOrEnyREa1V5loXE_63jyLfnOBY3idO1',\n     oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n     onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n     sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n     tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n     unique_name: 'XChen@contracosta.courts.ca.gov',\n     upn: 'XChen@contracosta.courts.ca.gov',\n     uti: 'yv4JqbrGBEaj4KF_v-0VAA',\n     ver: '1.0' },\n  signature: 'RFlw684k_B9flBg_2XGnoBrlA65XpV86RSH6fLOZvH4aF4sq82t5gkZJn5Mj5i5mcsNryCdjNBfaMciHBrjYZuTXV2x7z9uDlHn8rX0hD5LCq_sHnd3cp9R9eMhOYNsv9gd6Ucj9KOtD7FsWS-FcDSpEqtlJ20DD7J6101rGqiynuiLUC0VtwoBjzZugGLAMyn2AQs5FfIIVdotJ5i0SzZF30Xs7MM943R0bwenSLXJzDqToy3SCKFYfBgew4V_IdtwRLFVr1FlD1gQs9PNS-E9TCC4Yuzse9fLXYwiqZto8zHiinVrQ6JNvNseEdkcV0AGTrh40TpmZgcBT8y6UHg' }","time":"2018-02-05T16:41:39.603Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":23468,"level":30,"msg":"working on key: { kty: 'RSA',\n  use: 'sig',\n  kid: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  n: 'p3HhMQsqmgSjeiDsZ1ay-UAFgFMdBYgGGkGa2L0ew6_q3b2x9Ccdru_amVp1HXV2FVwbpK0HYsTSRvWIiCRRT-AgMSIlap7qlg8-iYvdFIJsorf84-sRN9Iq3F1pKD-W9vqsitcEbzljHCLSS2vUKSb7itwjc_AKjky3cX5ndMupQESZNTbiwanM9dAJ7K87pURXN66lS_q9u7wxWvjc3iLEp25PU_06moGDMe5BWuD6Rb_pdFM1plm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wSbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0Q',\n  e: 'AQAB',\n  x5c: [ 'MIIDBTCCAe2gAwIBAgIQaD0+a2FNl5JMaE2/7KUP5zANBgkqhkiG9w0BAQsFADAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MB4XDTE3MTEyODAwMDAwMFoXDTE5MTEyOTAwMDAwMFowLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKdx4TELKpoEo3og7GdWsvlABYBTHQWIBhpBmti9HsOv6t29sfQnHa7v2pladR11dhVcG6StB2LE0kb1iIgkUU/gIDEiJWqe6pYPPomL3RSCbKK3/OPrETfSKtxdaSg/lvb6rIrXBG85Yxwi0ktr1Ckm+4rcI3PwCo5Mt3F+Z3TLqUBEmTU24sGpzPXQCeyvO6VEVzeupUv6vbu8MVr43N4ixKduT1P9OpqBgzHuQVrg+kW/6XRTNaZZthTlITG8VEa8I02S2Q4VyosdzcrMQmRp75MTA2YKdqTexTKmWKaXFIcGCbvMEm35sIfIVziQ8YMSEC+7GBoh3k2g2BFRgtECAwEAAaMhMB8wHQYDVR0OBBYEFGpho/kx4FeBzTTBIbYVWfFdGIblMA0GCSqGSIb3DQEBCwUAA4IBAQBgaeYvuV4sYJZNPXbxN6FIc0oA4bCg1+DFalT3qzW0bFbl7pXP5YPY/adZlT8+cTznjMgzPPvcXaQdcytR16YqHJVX0ik67NrrQ3g0TtGLc42SuzE+6awryiLQY0Zd799bJwrRcDZUqm/6jKOEOd+utf+3o+VU57w+n7iQLuSL1mKYGMsyzMYCj6xVtYl75iam86leT0/tlXHJ8oqxU5w3xVY6P7v0Sz2UteQNQvhKi6R1/cjfiJUp+OzHpaEor6ls7HSvojY2zm1DIaH6EBp2L9TBFt8IALAEN5hX6XYpKmCHRUlzYwoWo7YwzKiot0XdbDW+zPKGPKtIlbg6cw/+' ] }","time":"2018-02-05T16:41:39.603Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":30,"msg":"PEMkey generated: -----BEGIN RSA PUBLIC KEY-----\nMIIBCgKCAQEAp3HhMQsqmgSjeiDsZ1ay+UAFgFMdBYgGGkGa2L0ew6/q3b2x9Ccd\nru/amVp1HXV2FVwbpK0HYsTSRvWIiCRRT+AgMSIlap7qlg8+iYvdFIJsorf84+sR\nN9Iq3F1pKD+W9vqsitcEbzljHCLSS2vUKSb7itwjc/AKjky3cX5ndMupQESZNTbi\nwanM9dAJ7K87pURXN66lS/q9u7wxWvjc3iLEp25PU/06moGDMe5BWuD6Rb/pdFM1\nplm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wS\nbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0QIDAQAB\n-----END RSA PUBLIC KEY-----\n","time":"2018-02-05T16:41:39.603Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":30,"msg":"Claims received:  { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n  iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n  iat: 1517848597,\n  nbf: 1517848597,\n  exp: 1517852497,\n  aio: 'Y2NgYPDe+9L3henZB4H91tk2crtVD+oKLFK0CGgxXc3Nmz+7MxYA',\n  amr: [ 'pwd' ],\n  family_name: 'Chen',\n  given_name: 'Xi',\n  ipaddr: '73.41.83.228',\n  name: 'Xi Chen',\n  nonce: 'pOrEnyREa1V5loXE_63jyLfnOBY3idO1',\n  oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n  onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n  sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n  tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n  unique_name: 'XChen@contracosta.courts.ca.gov',\n  upn: 'XChen@contracosta.courts.ca.gov',\n  uti: 'yv4JqbrGBEaj4KF_v-0VAA',\n  ver: '1.0' }","time":"2018-02-05T16:41:39.604Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23468,"level":30,"msg":"v2 has no userinfo endpoint, using the content in id_token as the profile","time":"2018-02-05T16:41:39.605Z","v":0}
OIDCStrategy invoked
email:  XChen@contracosta.courts.ca.gov
err:  null
user:  { _id: 5a737e49e440d2445c40b21c,
  updatedAt: 2018-02-01T20:53:29.268Z,
  createdAt: 2018-02-01T20:53:29.268Z,
  authType: 'azure',
  email: 'xchen@contracosta.courts.ca.gov',
  __v: 0,
  role: 'Member',
  cases: [],
  profile: { firstName: 'Xi', lastName: 'Chen' } }
serializing user:  { _id: 5a737e49e440d2445c40b21c,
  updatedAt: 2018-02-01T20:53:29.268Z,
  createdAt: 2018-02-01T20:53:29.268Z,
  authType: 'azure',
  email: 'xchen@contracosta.courts.ca.gov',
  __v: 0,
  role: 'Member',
  cases: [],
  profile: { firstName: 'Xi', lastName: 'Chen' } }
We received a posted return from AzureAD:  IncomingMessage {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 16384,
     buffer: BufferList { head: null, tail: null, length: 0 },
     length: 0,
     pipes: null,
     pipesCount: 0,
     flowing: true,
     ended: true,
     endEmitted: true,
     reading: false,
     sync: true,
     needReadable: false,
     emittedReadable: false,
     readableListening: false,
     resumeScheduled: false,
     defaultEncoding: 'utf8',
     ranOut: false,
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: false,
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  socket: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 12329,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 17106,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 24195 } },
  connection: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 12329,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 17106,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 24195 } },
  httpVersionMajor: 1,
  httpVersionMinor: 1,
  httpVersion: '1.1',
  complete: true,
  headers: 
   { host: 'localhost:3000',
     connection: 'keep-alive',
     'content-length': '2231',
     'cache-control': 'max-age=0',
     'upgrade-insecure-requests': '1',
     origin: 'null',
     'content-type': 'application/x-www-form-urlencoded',
     'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'accept-encoding': 'gzip, deflate, br',
     'accept-language': 'en-US,en;q=0.9',
     cookie: 'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517848898615.fbd08e9a6335a4c3df307cd18241271176d54fbc1ba5fb173aa62daf8c84d2804b81946a53f5664f4e4b435828ce208be041c58c50e3bb46757e320311401022b2b0510f3d8ee3b1e139db5231b10c95bfce551b02e5bc89fffc20f5043180001d524d8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.a600aaa07d90102c17b9a3f5bd057a3c=0' },
  rawHeaders: 
   [ 'Host',
     'localhost:3000',
     'Connection',
     'keep-alive',
     'Content-Length',
     '2231',
     'Cache-Control',
     'max-age=0',
     'Upgrade-Insecure-Requests',
     '1',
     'Origin',
     'null',
     'Content-Type',
     'application/x-www-form-urlencoded',
     'User-Agent',
     'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     'Accept',
     'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'Accept-Encoding',
     'gzip, deflate, br',
     'Accept-Language',
     'en-US,en;q=0.9',
     'Cookie',
     'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517848898615.fbd08e9a6335a4c3df307cd18241271176d54fbc1ba5fb173aa62daf8c84d2804b81946a53f5664f4e4b435828ce208be041c58c50e3bb46757e320311401022b2b0510f3d8ee3b1e139db5231b10c95bfce551b02e5bc89fffc20f5043180001d524d8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.a600aaa07d90102c17b9a3f5bd057a3c=0' ],
  trailers: {},
  rawTrailers: [],
  upgrade: false,
  url: '/api/auth/openid/return',
  method: 'POST',
  statusCode: null,
  statusMessage: null,
  client: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 12329,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 17106,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 24195 } },
  _consuming: true,
  _dumped: false,
  next: [Function: next],
  baseUrl: '',
  originalUrl: '/api/auth/openid/return',
  _parsedUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  params: {},
  query: {},
  res: 
   ServerResponse {
     domain: null,
     _events: { finish: [Object], end: [Function: onevent] },
     _eventsCount: 2,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: false,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: true,
     useChunkedEncodingByDefault: true,
     sendDate: true,
     _removedHeader: {},
     _contentLength: null,
     _hasBody: true,
     _trailer: '',
     finished: false,
     _headerSent: false,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1773,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 17106,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1773,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 17106,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     _header: null,
     _headers: 
      { 'x-powered-by': 'Express',
        'access-control-allow-origin': '*',
        'access-control-allow-methods': 'PUT, GET, POST, DELETE, OPTIONS',
        'access-control-allow-headers': 'Origin, X-Requested-With, Content-Type, Accept, Authorization, Access-Control-Allow-Credentials',
        'access-control-allow-credentials': 'true',
        'set-cookie': 'passport-aad.1517848898615.fbd08e9a6335a4c3df307cd18241271176d54fbc1ba5fb173aa62daf8c84d2804b81946a53f5664f4e4b435828ce208be041c58c50e3bb46757e320311401022b2b0510f3d8ee3b1e139db5231b10c95bfce551b02e5bc89fffc20f5043180001d524d8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.a600aaa07d90102c17b9a3f5bd057a3c=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT' },
     _headerNames: 
      { 'x-powered-by': 'X-Powered-By',
        'access-control-allow-origin': 'Access-Control-Allow-Origin',
        'access-control-allow-methods': 'Access-Control-Allow-Methods',
        'access-control-allow-headers': 'Access-Control-Allow-Headers',
        'access-control-allow-credentials': 'Access-Control-Allow-Credentials',
        'set-cookie': 'Set-Cookie' },
     _onPendingData: [Function: updateOutgoingData],
     req: [Circular],
     locals: {},
     writeHead: [Function: writeHead],
     end: [Function: end],
     _startAt: undefined,
     _startTime: undefined,
     __onFinished: { [Function: listener] queue: [Object] } },
  _parsedOriginalUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  sessionStore: 
   MongoStore {
     domain: null,
     _events: 
      { disconnect: [Function: ondisconnect],
        connect: [Function: onconnect] },
     _eventsCount: 2,
     _maxListeners: undefined,
     ttl: 1209600,
     collectionName: 'sessions',
     autoRemove: 'native',
     autoRemoveInterval: 10,
     transformFunctions: 
      { serialize: [Function: stringify],
        unserialize: [Function: parse] },
     options: { mongooseConnection: [Object], clear_interval: 86400 },
     state: 'connected',
     generate: [Function],
     db: 
      Db {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        s: [Object],
        serverConfig: [Getter],
        bufferMaxEntries: [Getter],
        databaseName: [Getter] },
     collectionReadyPromise: Promise { [Object] },
     collection: Collection { s: [Object] } },
  sessionID: 'R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL',
  session: 
   Session {
     cookie: 
      { path: '/',
        _expires: 2018-02-06T16:41:38.616Z,
        originalMaxAge: 86399999,
        httpOnly: true },
     passport: { user: 'xchen@contracosta.courts.ca.gov' } },
  secret: undefined,
  cookies: 
   { 'connect.sid': 's:R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw++TohQY8/YlSxxXW1AgPhmysT1xLoD7PEkUE',
     'passport-aad.1517848898615.fbd08e9a6335a4c3df307cd18241271176d54fbc1ba5fb173aa62daf8c84d2804b81946a53f5664f4e4b435828ce208be041c58c50e3bb46757e320311401022b2b0510f3d8ee3b1e139db5231b10c95bfce551b02e5bc89fffc20f5043180001d524d8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.a600aaa07d90102c17b9a3f5bd057a3c': '0' },
  signedCookies: {},
  body: 
   { code: 'AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzeTjCeKl7fJFY65wBUFW58JY1CsQNXjFYNF0V45uQH_Il8jzyne6pui0Z18okzyNUB7j9z9U1S4uvSBsknO5xHMUj8SbVDrJXyOnQuBMq_JoVihz5HDsnGqvPIv-Pi_7etBdJGtKn3z1Kz3oxUf3aOx3uIiNTm7vlznGW0IMapWUI9-1OZl01GDgjqIB0zzGOAHIZ7rRT7Mpt8aPfQlYr8MdqQYg5_gBGeGDfwuDVPiaLb93sy1zmLHNcYSsyE504MxJOyCaFi-fc67YjCKOW_kIAlN8Wo5GKFXx1CWFtYM5gkRm1g6_MBrmlajifOoJ7n1z1-Q4eHQqzc7ysGcsYyHf9Sq6qs85EkZyNulEL_Yi6CAvZeGcZ0b5ffIdvKjeNi47ERioOxdgLKh0fMjJtNX1U1QzJ-P3S8u-k6xQnRXwcGS1fh-MQVEMNaYsIa41HOrZoD1tOfUPlS25x3X77A_gayUugSUT_clXGla0Uu10iq7slyczgZjdtIx3r-88rvPRA2dk19usps2h_NMscgIiOPLvdJGv83RBqM4y3f1ESvPG6dmQMwIDQaE1uigHhkzDgxDSuvHtkaZnGpCBURKZGIoNoQKyQp-CU0SsuAAIgAA',
     id_token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODQ4NTk3LCJuYmYiOjE1MTc4NDg1OTcsImV4cCI6MTUxNzg1MjQ5NywiYWlvIjoiQVNRQTIvOEdBQUFBVWl5ejQ2blY2QU9qSGRxcnoySzhKSGh5SCtGSkxxN2txcEdnWGJkaU50VT0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6Ik9jbFBTVnMwbGRQSi00WjIxSW16cUEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoicE9yRW55UkVhMVY1bG9YRV82M2p5TGZuT0JZM2lkTzEiLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6IktuM25jTVRveGtTZ0ZwSUtXcGtWQUEiLCJ2ZXIiOiIxLjAifQ.Wr816gcodwQnK7NwWdcL5jZNjfwg2TfO1BSWh6CseYWz-LkWzWHubWhS5Mim1bgEx_2vrTC8FjXAddRj14Pf1v7hCVrao7DZWCSYqtssuCnMQWWFeDBJEqR2Lna-Ug24sYuBMgC4CM0w2PpTnQOuTtqoV1_prm70vqg482Lxrrwm0lYxBo95GI-c7AMEnEHrfvdz2jG4Dwt5PdA_WXT5OgxF8Id4S-qxVYXB2h5nxVmzTr8or__sVJ7B9dpV8KWC19sD2VyZU3rw5bwIzEZPR4RD9iCXvxgj9dJT4FkJv3jCroHu5Ph_fLG-HmiYYddAESv6Vv-pWrcAcZ2wupfRSw',
     state: 'my_state',
     session_state: 'a4eab50d-afe3-40e1-92b7-517677a51945' },
  _body: true,
  length: undefined,
  read: [Function],
  _startAt: [ 728808, 908566892 ],
  _startTime: 2018-02-05T16:41:39.248Z,
  _remoteAddress: '::1',
  _passport: 
   { instance: 
      Authenticator {
        _key: 'passport',
        _strategies: [Object],
        _serializers: [Object],
        _deserializers: [Object],
        _infoTransformers: [],
        _framework: [Object],
        _userProperty: 'user',
        Authenticator: [Function: Authenticator],
        Passport: [Function: Authenticator],
        Strategy: [Object],
        strategies: [Object] },
     session: { user: 'xchen@contracosta.courts.ca.gov' } },
  user: 
   { _id: 5a737e49e440d2445c40b21c,
     updatedAt: 2018-02-01T20:53:29.268Z,
     createdAt: 2018-02-01T20:53:29.268Z,
     authType: 'azure',
     email: 'xchen@contracosta.courts.ca.gov',
     __v: 0,
     role: 'Member',
     cases: [],
     profile: { firstName: 'Xi', lastName: 'Chen' } },
  route: 
   Route {
     path: '/api/auth/openid/return',
     stack: [ [Object], [Object] ],
     methods: { post: true } },
  authInfo: {} }
[0mPOST /api/auth/openid/return [31m500 [0m442.001 ms - 3354[0m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `babel-node index.js --presets es2015,stage-2`[39m
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":40,"msg":"Using http for redirectUrl is not recommended, please consider using https","time":"2018-02-05T16:42:27.014Z","v":0}
C:\Users\xichentop\Documents\ContraCostaInternship\mainsite-xc\server
Connected to DB
deserializing user...
adding header
we are getting a get request
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":30,"msg":"metadataUrl is: https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9","time":"2018-02-05T16:43:04.898Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":30,"msg":"received the following items in params: {\"policy\":null,\"cachekey\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":{\"url\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":null,\"authtype\":\"oidc\"}}","time":"2018-02-05T16:43:04.898Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":14700,"level":30,"msg":"Parsing JSON retreived from the endpoint","time":"2018-02-05T16:43:05.022Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":14700,"level":30,"msg":"Request to update the Open ID Connect Metadata","time":"2018-02-05T16:43:05.023Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":14700,"level":30,"msg":"Algorithm retrieved was:  [ 'RS256' ]","time":"2018-02-05T16:43:05.023Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":14700,"level":30,"msg":"Issuer we are using is:  https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/","time":"2018-02-05T16:43:05.023Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":14700,"level":30,"msg":"Key Endpoint we will use is:  https://login.microsoftonline.com/common/discovery/keys","time":"2018-02-05T16:43:05.023Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":14700,"level":30,"msg":"Authentication endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/authorize","time":"2018-02-05T16:43:05.023Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":14700,"level":30,"msg":"Token endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/token","time":"2018-02-05T16:43:05.023Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":14700,"level":30,"msg":"User info endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/openid/userinfo","time":"2018-02-05T16:43:05.023Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":14700,"level":30,"msg":"The logout endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/logout","time":"2018-02-05T16:43:05.023Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":30,"msg":"entering Strategy.prototype._flowInitializationHandler","time":"2018-02-05T16:43:05.123Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":30,"msg":"We are sending the response_type:  code id_token","time":"2018-02-05T16:43:05.123Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":30,"msg":"We are sending the response_mode:  form_post","time":"2018-02-05T16:43:05.123Z","v":0}
[0mGET /api/auth/azure-login [36m302 [0m316.766 ms - 0[0m
deserializing user...
adding header
we have received a post request:  IncomingMessage {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 16384,
     buffer: BufferList { head: null, tail: null, length: 0 },
     length: 0,
     pipes: null,
     pipesCount: 0,
     flowing: true,
     ended: true,
     endEmitted: true,
     reading: false,
     sync: true,
     needReadable: false,
     emittedReadable: false,
     readableListening: false,
     resumeScheduled: false,
     defaultEncoding: 'utf8',
     ranOut: false,
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: false,
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  socket: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 41099,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 44617,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 24222 } },
  connection: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 41099,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 44617,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 24222 } },
  httpVersionMajor: 1,
  httpVersionMinor: 1,
  httpVersion: '1.1',
  complete: true,
  headers: 
   { host: 'localhost:3000',
     connection: 'keep-alive',
     'content-length': '2231',
     'cache-control': 'max-age=0',
     'upgrade-insecure-requests': '1',
     origin: 'null',
     'content-type': 'application/x-www-form-urlencoded',
     'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'accept-encoding': 'gzip, deflate, br',
     'accept-language': 'en-US,en;q=0.9',
     cookie: 'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517848985125.fbd08e9a6335a4c3df307cd1824127115cf22f924c85d1225ed73ef4a2defdf825e0ef547e997c5a3368013f0bf351fbe041c58c50e3bb46757e320311401022b2b0513e15cfd6eddd09cb6765910cb892c1230552a29da7d2af21ce3f05e52f1058098ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.57b5e692aca918e07424209b848ec77a=0' },
  rawHeaders: 
   [ 'Host',
     'localhost:3000',
     'Connection',
     'keep-alive',
     'Content-Length',
     '2231',
     'Cache-Control',
     'max-age=0',
     'Upgrade-Insecure-Requests',
     '1',
     'Origin',
     'null',
     'Content-Type',
     'application/x-www-form-urlencoded',
     'User-Agent',
     'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     'Accept',
     'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'Accept-Encoding',
     'gzip, deflate, br',
     'Accept-Language',
     'en-US,en;q=0.9',
     'Cookie',
     'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517848985125.fbd08e9a6335a4c3df307cd1824127115cf22f924c85d1225ed73ef4a2defdf825e0ef547e997c5a3368013f0bf351fbe041c58c50e3bb46757e320311401022b2b0513e15cfd6eddd09cb6765910cb892c1230552a29da7d2af21ce3f05e52f1058098ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.57b5e692aca918e07424209b848ec77a=0' ],
  trailers: {},
  rawTrailers: [],
  upgrade: false,
  url: '/api/auth/openid/return',
  method: 'POST',
  statusCode: null,
  statusMessage: null,
  client: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 41099,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 44617,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 24222 } },
  _consuming: true,
  _dumped: false,
  next: [Function: next],
  baseUrl: '',
  originalUrl: '/api/auth/openid/return',
  _parsedUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  params: {},
  query: {},
  res: 
   ServerResponse {
     domain: null,
     _events: { finish: [Object], end: [Function: onevent] },
     _eventsCount: 2,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: false,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: true,
     useChunkedEncodingByDefault: true,
     sendDate: true,
     _removedHeader: {},
     _contentLength: null,
     _hasBody: true,
     _trailer: '',
     finished: false,
     _headerSent: false,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1773,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 44617,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1773,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 44617,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     _header: null,
     _headers: 
      { 'x-powered-by': 'Express',
        'access-control-allow-origin': '*',
        'access-control-allow-methods': 'PUT, GET, POST, DELETE, OPTIONS',
        'access-control-allow-headers': 'Origin, X-Requested-With, Content-Type, Accept, Authorization, Access-Control-Allow-Credentials',
        'access-control-allow-credentials': 'true' },
     _headerNames: 
      { 'x-powered-by': 'X-Powered-By',
        'access-control-allow-origin': 'Access-Control-Allow-Origin',
        'access-control-allow-methods': 'Access-Control-Allow-Methods',
        'access-control-allow-headers': 'Access-Control-Allow-Headers',
        'access-control-allow-credentials': 'Access-Control-Allow-Credentials' },
     _onPendingData: [Function: updateOutgoingData],
     req: [Circular],
     locals: {},
     writeHead: [Function: writeHead],
     end: [Function: end],
     _startAt: undefined,
     _startTime: undefined,
     __onFinished: { [Function: listener] queue: [Object] } },
  _parsedOriginalUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  sessionStore: 
   MongoStore {
     domain: null,
     _events: 
      { disconnect: [Function: ondisconnect],
        connect: [Function: onconnect] },
     _eventsCount: 2,
     _maxListeners: undefined,
     ttl: 1209600,
     collectionName: 'sessions',
     autoRemove: 'native',
     autoRemoveInterval: 10,
     transformFunctions: 
      { serialize: [Function: stringify],
        unserialize: [Function: parse] },
     options: { mongooseConnection: [Object], clear_interval: 86400 },
     state: 'connected',
     generate: [Function],
     db: 
      Db {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        s: [Object],
        serverConfig: [Getter],
        bufferMaxEntries: [Getter],
        databaseName: [Getter] },
     collectionReadyPromise: Promise { [Object] },
     collection: Collection { s: [Object] } },
  sessionID: 'R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL',
  session: 
   Session {
     cookie: 
      { path: '/',
        _expires: 2018-02-06T16:43:05.126Z,
        originalMaxAge: 86399999,
        httpOnly: true },
     passport: { user: 'xchen@contracosta.courts.ca.gov' } },
  secret: undefined,
  cookies: 
   { 'connect.sid': 's:R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw++TohQY8/YlSxxXW1AgPhmysT1xLoD7PEkUE',
     'passport-aad.1517848985125.fbd08e9a6335a4c3df307cd1824127115cf22f924c85d1225ed73ef4a2defdf825e0ef547e997c5a3368013f0bf351fbe041c58c50e3bb46757e320311401022b2b0513e15cfd6eddd09cb6765910cb892c1230552a29da7d2af21ce3f05e52f1058098ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.57b5e692aca918e07424209b848ec77a': '0' },
  signedCookies: {},
  body: 
   { code: 'AQABAAIAAABHh4kmS_aKT5XrjzxRAtHz8nI4PznK6BR_AYYWK7x2OlxP7ojgNJWwxbhov9GaOfDgI_R8QRkb9IIa71caPUjYXmBELiq177B6JUn9m2eg1ks6RoKOLFOFB8pElp5fBe2CDoUq7SYyGNgispxitO61BvuLMN7EqvVJ67o4OrpBlt7P_8Jx9x3IDuUu0OHkYuQVV72gVZnQgYI1KCkJ1Ne_YorAELDzOuAUieRwDnu011m02eKqfuTL3KUP4ofFwTeI7DYkcWoftLoVic-CK14RlJxu1bG7pMi8oKes5nBgAKEBWhlc9M7dj1iBvdfZdrvVjmX8LEIsCDJjPkOFCJ9eQ3DlkPUudHAaraA7N7hSz--mbku5VYFkmVDJVnYkxZwrirsjF_5qVp70IqXbE2a1t909VWihXmG19KPE1fK9S6By0yhtbHprKbzDbBy1Ac3oNIzy1P0Y4V76kbenRL4k6V5cs2KLeJ8hmPzNBDnTS5Ff3bN1RZzzL7tSv7tKb6dNcUGu1gmqiDvds1VyNwqd5iO5lx4SGgOkz2-qsAVBvV3MMRC8HOG7EYs_vbwLZVJHtfUyLmIpAij4gvL2oLGqXR60oMHbR5GU1piP8JbqOkMMr_M1lDppaFZwkZe0m4UgAA',
     id_token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODQ4NjgzLCJuYmYiOjE1MTc4NDg2ODMsImV4cCI6MTUxNzg1MjU4MywiYWlvIjoiQVNRQTIvOEdBQUFBQmZ1b2xBQVhsRml4SWcvUzQ5b1AwRnpDbzlZNkZSTW5pc3lFWktScTJnZz0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6IkhKa2thQjAtYmxqMU1va2E5dE0ySVEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoiQWczcDJFYlVUZXY1QUJXM0FmdEtXYTVvdHltVkZpRXUiLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6IkRaNTRFY3FnZTA2Rk9MTF9GZWdXQUEiLCJ2ZXIiOiIxLjAifQ.BL0ewUJii8LORDGMiwLmGBdAa4hvxoW7hp6Aq-Oq0ZkpoHy9C5Hl_V-c7_dpWSYiAQS5im9zFAeDe4Yu12_6N4sLAAVdHKZARVrjYb4Lq4u7XT3ewd1ymUjg-PY5q75fetvxaP7l3zr98ivPLGHTLj6_Ef7gNtfQwZV_peMSFuM1sfSeM14owREaX8-qzmO96f1ynlvAUw8evDL0X6sgcrQJvGVHh7pASpdD0iWHyYyJLYBP3sndt8c3qfAclt2BaoTIsFiDeslSk8No7JIufUo90IT8rHXQ_d0XxIOpMYjyV8oNVxiWwbBeWbSw7sGaksNHS6R9211SvgjhxAdkDw',
     state: 'CUSTOMBL9f3wlVW4viC0YIYSOtT-OxLl-REkABmy_state',
     session_state: 'a4eab50d-afe3-40e1-92b7-517677a51945' },
  _body: true,
  length: undefined,
  read: [Function],
  _startAt: [ 728895, 264588965 ],
  _startTime: 2018-02-05T16:43:05.605Z,
  _remoteAddress: '::1',
  _passport: 
   { instance: 
      Authenticator {
        _key: 'passport',
        _strategies: [Object],
        _serializers: [Object],
        _deserializers: [Object],
        _infoTransformers: [],
        _framework: [Object],
        _userProperty: 'user',
        Authenticator: [Function: Authenticator],
        Passport: [Function: Authenticator],
        Strategy: [Object],
        strategies: [Object] },
     session: { user: 'xchen@contracosta.courts.ca.gov' } },
  user: 
   { _id: 5a737e49e440d2445c40b21c,
     updatedAt: 2018-02-01T20:53:29.268Z,
     createdAt: 2018-02-01T20:53:29.268Z,
     authType: 'azure',
     email: 'xchen@contracosta.courts.ca.gov',
     __v: 0,
     role: 'Member',
     cases: [],
     profile: { firstName: 'Xi', lastName: 'Chen' } },
  route: 
   Route {
     path: '/api/auth/openid/return',
     stack: [ [Object], [Object] ],
     methods: { post: true } } }
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":30,"msg":"metadataUrl is: https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9","time":"2018-02-05T16:43:05.701Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":30,"msg":"received the following items in params: {\"id_token\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODQ4NjgzLCJuYmYiOjE1MTc4NDg2ODMsImV4cCI6MTUxNzg1MjU4MywiYWlvIjoiQVNRQTIvOEdBQUFBQmZ1b2xBQVhsRml4SWcvUzQ5b1AwRnpDbzlZNkZSTW5pc3lFWktScTJnZz0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6IkhKa2thQjAtYmxqMU1va2E5dE0ySVEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoiQWczcDJFYlVUZXY1QUJXM0FmdEtXYTVvdHltVkZpRXUiLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6IkRaNTRFY3FnZTA2Rk9MTF9GZWdXQUEiLCJ2ZXIiOiIxLjAifQ.BL0ewUJii8LORDGMiwLmGBdAa4hvxoW7hp6Aq-Oq0ZkpoHy9C5Hl_V-c7_dpWSYiAQS5im9zFAeDe4Yu12_6N4sLAAVdHKZARVrjYb4Lq4u7XT3ewd1ymUjg-PY5q75fetvxaP7l3zr98ivPLGHTLj6_Ef7gNtfQwZV_peMSFuM1sfSeM14owREaX8-qzmO96f1ynlvAUw8evDL0X6sgcrQJvGVHh7pASpdD0iWHyYyJLYBP3sndt8c3qfAclt2BaoTIsFiDeslSk8No7JIufUo90IT8rHXQ_d0XxIOpMYjyV8oNVxiWwbBeWbSw7sGaksNHS6R9211SvgjhxAdkDw\",\"code\":\"AQABAAIAAABHh4kmS_aKT5XrjzxRAtHz8nI4PznK6BR_AYYWK7x2OlxP7ojgNJWwxbhov9GaOfDgI_R8QRkb9IIa71caPUjYXmBELiq177B6JUn9m2eg1ks6RoKOLFOFB8pElp5fBe2CDoUq7SYyGNgispxitO61BvuLMN7EqvVJ67o4OrpBlt7P_8Jx9x3IDuUu0OHkYuQVV72gVZnQgYI1KCkJ1Ne_YorAELDzOuAUieRwDnu011m02eKqfuTL3KUP4ofFwTeI7DYkcWoftLoVic-CK14RlJxu1bG7pMi8oKes5nBgAKEBWhlc9M7dj1iBvdfZdrvVjmX8LEIsCDJjPkOFCJ9eQ3DlkPUudHAaraA7N7hSz--mbku5VYFkmVDJVnYkxZwrirsjF_5qVp70IqXbE2a1t909VWihXmG19KPE1fK9S6By0yhtbHprKbzDbBy1Ac3oNIzy1P0Y4V76kbenRL4k6V5cs2KLeJ8hmPzNBDnTS5Ff3bN1RZzzL7tSv7tKb6dNcUGu1gmqiDvds1VyNwqd5iO5lx4SGgOkz2-qsAVBvV3MMRC8HOG7EYs_vbwLZVJHtfUyLmIpAij4gvL2oLGqXR60oMHbR5GU1piP8JbqOkMMr_M1lDppaFZwkZe0m4UgAA\",\"state\":\"CUSTOMBL9f3wlVW4viC0YIYSOtT-OxLl-REkABmy_state\",\"nonce\":\"Ag3p2EbUTev5ABW3AftKWa5otymVFiEu\",\"resource\":\"https://graph.windows.net\",\"cachekey\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":{\"url\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":null,\"authtype\":\"oidc\"}}","time":"2018-02-05T16:43:05.701Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":30,"msg":"entering Strategy.prototype._hybridFlowHandler, received code: AQABAAIAAABHh4kmS_aKT5XrjzxRAtHz8nI4PznK6BR_AYYWK7x2OlxP7ojgNJWwxbhov9GaOfDgI_R8QRkb9IIa71caPUjYXmBELiq177B6JUn9m2eg1ks6RoKOLFOFB8pElp5fBe2CDoUq7SYyGNgispxitO61BvuLMN7EqvVJ67o4OrpBlt7P_8Jx9x3IDuUu0OHkYuQVV72gVZnQgYI1KCkJ1Ne_YorAELDzOuAUieRwDnu011m02eKqfuTL3KUP4ofFwTeI7DYkcWoftLoVic-CK14RlJxu1bG7pMi8oKes5nBgAKEBWhlc9M7dj1iBvdfZdrvVjmX8LEIsCDJjPkOFCJ9eQ3DlkPUudHAaraA7N7hSz--mbku5VYFkmVDJVnYkxZwrirsjF_5qVp70IqXbE2a1t909VWihXmG19KPE1fK9S6By0yhtbHprKbzDbBy1Ac3oNIzy1P0Y4V76kbenRL4k6V5cs2KLeJ8hmPzNBDnTS5Ff3bN1RZzzL7tSv7tKb6dNcUGu1gmqiDvds1VyNwqd5iO5lx4SGgOkz2-qsAVBvV3MMRC8HOG7EYs_vbwLZVJHtfUyLmIpAij4gvL2oLGqXR60oMHbR5GU1piP8JbqOkMMr_M1lDppaFZwkZe0m4UgAA, received id_token: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODQ4NjgzLCJuYmYiOjE1MTc4NDg2ODMsImV4cCI6MTUxNzg1MjU4MywiYWlvIjoiQVNRQTIvOEdBQUFBQmZ1b2xBQVhsRml4SWcvUzQ5b1AwRnpDbzlZNkZSTW5pc3lFWktScTJnZz0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6IkhKa2thQjAtYmxqMU1va2E5dE0ySVEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoiQWczcDJFYlVUZXY1QUJXM0FmdEtXYTVvdHltVkZpRXUiLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6IkRaNTRFY3FnZTA2Rk9MTF9GZWdXQUEiLCJ2ZXIiOiIxLjAifQ.BL0ewUJii8LORDGMiwLmGBdAa4hvxoW7hp6Aq-Oq0ZkpoHy9C5Hl_V-c7_dpWSYiAQS5im9zFAeDe4Yu12_6N4sLAAVdHKZARVrjYb4Lq4u7XT3ewd1ymUjg-PY5q75fetvxaP7l3zr98ivPLGHTLj6_Ef7gNtfQwZV_peMSFuM1sfSeM14owREaX8-qzmO96f1ynlvAUw8evDL0X6sgcrQJvGVHh7pASpdD0iWHyYyJLYBP3sndt8c3qfAclt2BaoTIsFiDeslSk8No7JIufUo90IT8rHXQ_d0XxIOpMYjyV8oNVxiWwbBeWbSw7sGaksNHS6R9211SvgjhxAdkDw","time":"2018-02-05T16:43:05.702Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":30,"msg":"token decoded:  { header: \n   { typ: 'JWT',\n     alg: 'RS256',\n     x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n     kid: 'z44wMdHu8wKsumrbfaK98qxs5YI' },\n  payload: \n   { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n     iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n     iat: 1517848683,\n     nbf: 1517848683,\n     exp: 1517852583,\n     aio: 'ASQA2/8GAAAABfuolAAXlFixIg/S49oP0FzCo9Y6FRMnisyEZKRq2gg=',\n     amr: [ 'pwd' ],\n     c_hash: 'HJkkaB0-blj1Moka9tM2IQ',\n     family_name: 'Chen',\n     given_name: 'Xi',\n     ipaddr: '73.41.83.228',\n     name: 'Xi Chen',\n     nonce: 'Ag3p2EbUTev5ABW3AftKWa5otymVFiEu',\n     oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n     onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n     sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n     tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n     unique_name: 'XChen@contracosta.courts.ca.gov',\n     upn: 'XChen@contracosta.courts.ca.gov',\n     uti: 'DZ54Ecqge06FOLL_FegWAA',\n     ver: '1.0' },\n  signature: 'BL0ewUJii8LORDGMiwLmGBdAa4hvxoW7hp6Aq-Oq0ZkpoHy9C5Hl_V-c7_dpWSYiAQS5im9zFAeDe4Yu12_6N4sLAAVdHKZARVrjYb4Lq4u7XT3ewd1ymUjg-PY5q75fetvxaP7l3zr98ivPLGHTLj6_Ef7gNtfQwZV_peMSFuM1sfSeM14owREaX8-qzmO96f1ynlvAUw8evDL0X6sgcrQJvGVHh7pASpdD0iWHyYyJLYBP3sndt8c3qfAclt2BaoTIsFiDeslSk8No7JIufUo90IT8rHXQ_d0XxIOpMYjyV8oNVxiWwbBeWbSw7sGaksNHS6R9211SvgjhxAdkDw' }","time":"2018-02-05T16:43:05.704Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":14700,"level":30,"msg":"working on key: { kty: 'RSA',\n  use: 'sig',\n  kid: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  n: 'p3HhMQsqmgSjeiDsZ1ay-UAFgFMdBYgGGkGa2L0ew6_q3b2x9Ccdru_amVp1HXV2FVwbpK0HYsTSRvWIiCRRT-AgMSIlap7qlg8-iYvdFIJsorf84-sRN9Iq3F1pKD-W9vqsitcEbzljHCLSS2vUKSb7itwjc_AKjky3cX5ndMupQESZNTbiwanM9dAJ7K87pURXN66lS_q9u7wxWvjc3iLEp25PU_06moGDMe5BWuD6Rb_pdFM1plm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wSbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0Q',\n  e: 'AQAB',\n  x5c: [ 'MIIDBTCCAe2gAwIBAgIQaD0+a2FNl5JMaE2/7KUP5zANBgkqhkiG9w0BAQsFADAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MB4XDTE3MTEyODAwMDAwMFoXDTE5MTEyOTAwMDAwMFowLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKdx4TELKpoEo3og7GdWsvlABYBTHQWIBhpBmti9HsOv6t29sfQnHa7v2pladR11dhVcG6StB2LE0kb1iIgkUU/gIDEiJWqe6pYPPomL3RSCbKK3/OPrETfSKtxdaSg/lvb6rIrXBG85Yxwi0ktr1Ckm+4rcI3PwCo5Mt3F+Z3TLqUBEmTU24sGpzPXQCeyvO6VEVzeupUv6vbu8MVr43N4ixKduT1P9OpqBgzHuQVrg+kW/6XRTNaZZthTlITG8VEa8I02S2Q4VyosdzcrMQmRp75MTA2YKdqTexTKmWKaXFIcGCbvMEm35sIfIVziQ8YMSEC+7GBoh3k2g2BFRgtECAwEAAaMhMB8wHQYDVR0OBBYEFGpho/kx4FeBzTTBIbYVWfFdGIblMA0GCSqGSIb3DQEBCwUAA4IBAQBgaeYvuV4sYJZNPXbxN6FIc0oA4bCg1+DFalT3qzW0bFbl7pXP5YPY/adZlT8+cTznjMgzPPvcXaQdcytR16YqHJVX0ik67NrrQ3g0TtGLc42SuzE+6awryiLQY0Zd799bJwrRcDZUqm/6jKOEOd+utf+3o+VU57w+n7iQLuSL1mKYGMsyzMYCj6xVtYl75iam86leT0/tlXHJ8oqxU5w3xVY6P7v0Sz2UteQNQvhKi6R1/cjfiJUp+OzHpaEor6ls7HSvojY2zm1DIaH6EBp2L9TBFt8IALAEN5hX6XYpKmCHRUlzYwoWo7YwzKiot0XdbDW+zPKGPKtIlbg6cw/+' ] }","time":"2018-02-05T16:43:05.705Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":30,"msg":"PEMkey generated: -----BEGIN RSA PUBLIC KEY-----\nMIIBCgKCAQEAp3HhMQsqmgSjeiDsZ1ay+UAFgFMdBYgGGkGa2L0ew6/q3b2x9Ccd\nru/amVp1HXV2FVwbpK0HYsTSRvWIiCRRT+AgMSIlap7qlg8+iYvdFIJsorf84+sR\nN9Iq3F1pKD+W9vqsitcEbzljHCLSS2vUKSb7itwjc/AKjky3cX5ndMupQESZNTbi\nwanM9dAJ7K87pURXN66lS/q9u7wxWvjc3iLEp25PU/06moGDMe5BWuD6Rb/pdFM1\nplm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wS\nbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0QIDAQAB\n-----END RSA PUBLIC KEY-----\n","time":"2018-02-05T16:43:05.705Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":30,"msg":"Claims received:  { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n  iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n  iat: 1517848683,\n  nbf: 1517848683,\n  exp: 1517852583,\n  aio: 'ASQA2/8GAAAABfuolAAXlFixIg/S49oP0FzCo9Y6FRMnisyEZKRq2gg=',\n  amr: [ 'pwd' ],\n  c_hash: 'HJkkaB0-blj1Moka9tM2IQ',\n  family_name: 'Chen',\n  given_name: 'Xi',\n  ipaddr: '73.41.83.228',\n  name: 'Xi Chen',\n  nonce: 'Ag3p2EbUTev5ABW3AftKWa5otymVFiEu',\n  oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n  onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n  sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n  tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n  unique_name: 'XChen@contracosta.courts.ca.gov',\n  upn: 'XChen@contracosta.courts.ca.gov',\n  uti: 'DZ54Ecqge06FOLL_FegWAA',\n  ver: '1.0' }","time":"2018-02-05T16:43:05.709Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":30,"msg":"entering Strategy.prototype._authCodeFlowHandler, received code: AQABAAIAAABHh4kmS_aKT5XrjzxRAtHz8nI4PznK6BR_AYYWK7x2OlxP7ojgNJWwxbhov9GaOfDgI_R8QRkb9IIa71caPUjYXmBELiq177B6JUn9m2eg1ks6RoKOLFOFB8pElp5fBe2CDoUq7SYyGNgispxitO61BvuLMN7EqvVJ67o4OrpBlt7P_8Jx9x3IDuUu0OHkYuQVV72gVZnQgYI1KCkJ1Ne_YorAELDzOuAUieRwDnu011m02eKqfuTL3KUP4ofFwTeI7DYkcWoftLoVic-CK14RlJxu1bG7pMi8oKes5nBgAKEBWhlc9M7dj1iBvdfZdrvVjmX8LEIsCDJjPkOFCJ9eQ3DlkPUudHAaraA7N7hSz--mbku5VYFkmVDJVnYkxZwrirsjF_5qVp70IqXbE2a1t909VWihXmG19KPE1fK9S6By0yhtbHprKbzDbBy1Ac3oNIzy1P0Y4V76kbenRL4k6V5cs2KLeJ8hmPzNBDnTS5Ff3bN1RZzzL7tSv7tKb6dNcUGu1gmqiDvds1VyNwqd5iO5lx4SGgOkz2-qsAVBvV3MMRC8HOG7EYs_vbwLZVJHtfUyLmIpAij4gvL2oLGqXR60oMHbR5GU1piP8JbqOkMMr_M1lDppaFZwkZe0m4UgAA","time":"2018-02-05T16:43:05.710Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":30,"msg":"In _getAccessTokenBySecretOrAssertion: we are using client secret","time":"2018-02-05T16:43:05.711Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":30,"msg":"received id_token:  eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODQ4Njg0LCJuYmYiOjE1MTc4NDg2ODQsImV4cCI6MTUxNzg1MjU4NCwiYWlvIjoiWTJOZ1lBaWU5Y1JOcVBPY1JXRkdXdDYrYmM1dTVTdlh4MnV1cTlyLytWUFM5Wml5b3d3QSIsImFtciI6WyJwd2QiXSwiZmFtaWx5X25hbWUiOiJDaGVuIiwiZ2l2ZW5fbmFtZSI6IlhpIiwiaXBhZGRyIjoiNzMuNDEuODMuMjI4IiwibmFtZSI6IlhpIENoZW4iLCJub25jZSI6IkFnM3AyRWJVVGV2NUFCVzNBZnRLV2E1b3R5bVZGaUV1Iiwib2lkIjoiOWY1NTRmZjItZDQ1NS00OTEyLWJjMTctZmI5MGFiNjc3MjY2Iiwib25wcmVtX3NpZCI6IlMtMS01LTIxLTQ5NzQwNDg1NS01OTc2MzU5OTItOTg4ODgyNTc2LTE0MjgwIiwic3ViIjoiekZkcVFleVYtX1pOZU03N2ZkeU5zRzhXOTR6Mnc5WlN2VTZmOWpOYjF6OCIsInRpZCI6IjhjYTlkOGYxLWQ5NzYtNDQ0NS1hM2NjLTNmZmMzZTI5YTNmZiIsInVuaXF1ZV9uYW1lIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInVwbiI6IlhDaGVuQGNvbnRyYWNvc3RhLmNvdXJ0cy5jYS5nb3YiLCJ1dGkiOiI5bVZpeU9FT0FrLXViV0ZSZC1RVkFBIiwidmVyIjoiMS4wIn0.cNbELzyFJ9xftD6a8cdI1QAv5hqjLMVNPJPx30-xM0MQjmjZhUckInKmyfRiDkkjYMcqkHxdXU2KwnyoLTgeaeOdG5nRfTHOuZZbmcmfuxrmIA9cZSuTkFHKXU4W5djvwNeIfkF-3yxu6UIouW7N2ScHaBSJeccO35s3pZur0kMFlR6_jh-rhvfLlu-ZGJh8jEx4JXoIHIbm7cEtx22gjmzeBwSjNXqb1XmYwheNot-ja7Wdd_yA0ef1S3V42bfgExvninVgMKz-yIhr_4UID0ONHs4iDW8WiorywbVKJAOOSOZdR6YCKgUbkBZdXNjnMVh3o05Op6pZr0WXl6ihTw","time":"2018-02-05T16:43:05.962Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":30,"msg":"received access_token:  eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiJodHRwczovL2dyYXBoLndpbmRvd3MubmV0IiwiaXNzIjoiaHR0cHM6Ly9zdHMud2luZG93cy5uZXQvOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmLyIsImlhdCI6MTUxNzg0ODY4NCwibmJmIjoxNTE3ODQ4Njg0LCJleHAiOjE1MTc4NTI1ODQsImFjciI6IjEiLCJhaW8iOiJBU1FBMi84R0FBQUE5c3V0UWtPVUN3WHNDMjhQeGgzdnhUU2lCamxGczFLVTlkM3JWZnptM2N3PSIsImFtciI6WyJwd2QiXSwiYXBwaWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJhcHBpZGFjciI6IjEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm9pZCI6IjlmNTU0ZmYyLWQ0NTUtNDkxMi1iYzE3LWZiOTBhYjY3NzI2NiIsIm9ucHJlbV9zaWQiOiJTLTEtNS0yMS00OTc0MDQ4NTUtNTk3NjM1OTkyLTk4ODg4MjU3Ni0xNDI4MCIsInB1aWQiOiIxMDAzM0ZGRkEyNkVDOTBDIiwic2NwIjoiTWFpbC5SZWFkIG9mZmxpbmVfYWNjZXNzIG9wZW5pZCBwcm9maWxlIFVzZXIuUmVhZCIsInN1YiI6IjVMZWlBbTJONDQ5MWF2LUdtTE9fV081QVVmR0xuNmdWdjlEdU5oS2swU3ciLCJ0ZW5hbnRfcmVnaW9uX3Njb3BlIjoiTkEiLCJ0aWQiOiI4Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYiLCJ1bmlxdWVfbmFtZSI6IlhDaGVuQGNvbnRyYWNvc3RhLmNvdXJ0cy5jYS5nb3YiLCJ1cG4iOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXRpIjoiOW1WaXlPRU9Bay11YldGUmQtUVZBQSIsInZlciI6IjEuMCJ9.AkP4e99iaJKsq1psy43YsIdwga2OWWruj2CWrK_5pObE0xt8x2D7PeyJlKUOENj1CklKtXlNKWw-65oc9Fs9l0_q0RAFxxxq5EkOzcVdX4oe3YU3BNWRtV5gFeKdbOgsGtdPBBLx7bRKl93vn1hsVxtYZ4xK3nykMxu_VAQBJEbCOCCHzR4B6YWBVybpzmbaPZRr5J7RUdlMozeSiC8TfKRrtH7RII3tTkq11cSsE0HvrGw7PVcXbtGMvDPyxWy0xAhi27bo7XIJFSxVU7cNPkhDPsnFMMTfOMPqYFhIMLh1N2ELdUD5SeZlILrXSfVt4BW8ui3m2fHD6q89Ixatuw","time":"2018-02-05T16:43:05.963Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":30,"msg":"received refresh_token:  AQABAAAAAABHh4kmS_aKT5XrjzxRAtHziK5DUk2FgI9Cb1mWKA9ehfu23v-RHjq4XoLlaWktzgg-KD59vDfpGdd6kftAYiltKkxJJRTw3CeJHK2BiUquvLh7P86RASCuZ7KXm7nSBvrxFj2KkiwA5xzsEyAnl6RSD8MF9RMav3FnhV-nY7ehDNUqZRNii4Yn6GMXXvC2lC8R4OcBCisgcXD2Y1hitfC6MBRosxlmi0-qXkv5My7y_NPNXmx87AauNA6FE9XiSixLzpdqiyT7ekGS0eLNUe_sPJsDZFWofnk7gPStceq95ww4jOLuF0eNbJQMx9OOEm9B0OhVmJ---_jzmfA8MZ6Myz3etA0OyCtDaQ-x0pJCzbte_Ceo4aHGeWFDyktKzBmJxENVCGcD6967IYmGWnNhYk4NubEezibR1Bnrc487Z7VztcfGyikouIy8TisKHJhA5FIkrOoIXcyWHqLhcoIFiZr3q-_3OREv8tm_d14lqomA1S4f2OWSs2htqzZHN-177xxOa5-oZDUs4AVkCSPwjLqs42Ddd8eLYd5WP6rarIMsswrvBtkOKspr6QwcmktExZ02M1gDThSHn4-JNSBFmg7aT8pOKp0LpEQok-H5OBssXlpgFB5WSydIGnSOr6slCVCdftRNe6fFmIKp8i54FKaHuiDwsfQ-I3_CB4Di68hrCN472YsGulZT736UQRUKM44fPQHnLrb0Kk1MzIPMzDuB01CGtxdF3EXx83Trt0azk1f9cVva-rkOVitxlEgjtxG_hhSJx3tyM_qfx0KdsvTM72iUw1e5HIJWNSHD3wwcEXURAXYtkh4Ry5UibIYu1qCjzeCkBXY2ZcYFWrz_IAA","time":"2018-02-05T16:43:05.963Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":30,"msg":"token decoded:  { header: \n   { typ: 'JWT',\n     alg: 'RS256',\n     x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n     kid: 'z44wMdHu8wKsumrbfaK98qxs5YI' },\n  payload: \n   { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n     iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n     iat: 1517848684,\n     nbf: 1517848684,\n     exp: 1517852584,\n     aio: 'Y2NgYAie9cRNqPOcRWFGWt6+bc5u5SvXx2uuq9r/+VPS9ZiyowwA',\n     amr: [ 'pwd' ],\n     family_name: 'Chen',\n     given_name: 'Xi',\n     ipaddr: '73.41.83.228',\n     name: 'Xi Chen',\n     nonce: 'Ag3p2EbUTev5ABW3AftKWa5otymVFiEu',\n     oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n     onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n     sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n     tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n     unique_name: 'XChen@contracosta.courts.ca.gov',\n     upn: 'XChen@contracosta.courts.ca.gov',\n     uti: '9mViyOEOAk-ubWFRd-QVAA',\n     ver: '1.0' },\n  signature: 'cNbELzyFJ9xftD6a8cdI1QAv5hqjLMVNPJPx30-xM0MQjmjZhUckInKmyfRiDkkjYMcqkHxdXU2KwnyoLTgeaeOdG5nRfTHOuZZbmcmfuxrmIA9cZSuTkFHKXU4W5djvwNeIfkF-3yxu6UIouW7N2ScHaBSJeccO35s3pZur0kMFlR6_jh-rhvfLlu-ZGJh8jEx4JXoIHIbm7cEtx22gjmzeBwSjNXqb1XmYwheNot-ja7Wdd_yA0ef1S3V42bfgExvninVgMKz-yIhr_4UID0ONHs4iDW8WiorywbVKJAOOSOZdR6YCKgUbkBZdXNjnMVh3o05Op6pZr0WXl6ihTw' }","time":"2018-02-05T16:43:05.963Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":14700,"level":30,"msg":"working on key: { kty: 'RSA',\n  use: 'sig',\n  kid: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  n: 'p3HhMQsqmgSjeiDsZ1ay-UAFgFMdBYgGGkGa2L0ew6_q3b2x9Ccdru_amVp1HXV2FVwbpK0HYsTSRvWIiCRRT-AgMSIlap7qlg8-iYvdFIJsorf84-sRN9Iq3F1pKD-W9vqsitcEbzljHCLSS2vUKSb7itwjc_AKjky3cX5ndMupQESZNTbiwanM9dAJ7K87pURXN66lS_q9u7wxWvjc3iLEp25PU_06moGDMe5BWuD6Rb_pdFM1plm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wSbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0Q',\n  e: 'AQAB',\n  x5c: [ 'MIIDBTCCAe2gAwIBAgIQaD0+a2FNl5JMaE2/7KUP5zANBgkqhkiG9w0BAQsFADAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MB4XDTE3MTEyODAwMDAwMFoXDTE5MTEyOTAwMDAwMFowLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKdx4TELKpoEo3og7GdWsvlABYBTHQWIBhpBmti9HsOv6t29sfQnHa7v2pladR11dhVcG6StB2LE0kb1iIgkUU/gIDEiJWqe6pYPPomL3RSCbKK3/OPrETfSKtxdaSg/lvb6rIrXBG85Yxwi0ktr1Ckm+4rcI3PwCo5Mt3F+Z3TLqUBEmTU24sGpzPXQCeyvO6VEVzeupUv6vbu8MVr43N4ixKduT1P9OpqBgzHuQVrg+kW/6XRTNaZZthTlITG8VEa8I02S2Q4VyosdzcrMQmRp75MTA2YKdqTexTKmWKaXFIcGCbvMEm35sIfIVziQ8YMSEC+7GBoh3k2g2BFRgtECAwEAAaMhMB8wHQYDVR0OBBYEFGpho/kx4FeBzTTBIbYVWfFdGIblMA0GCSqGSIb3DQEBCwUAA4IBAQBgaeYvuV4sYJZNPXbxN6FIc0oA4bCg1+DFalT3qzW0bFbl7pXP5YPY/adZlT8+cTznjMgzPPvcXaQdcytR16YqHJVX0ik67NrrQ3g0TtGLc42SuzE+6awryiLQY0Zd799bJwrRcDZUqm/6jKOEOd+utf+3o+VU57w+n7iQLuSL1mKYGMsyzMYCj6xVtYl75iam86leT0/tlXHJ8oqxU5w3xVY6P7v0Sz2UteQNQvhKi6R1/cjfiJUp+OzHpaEor6ls7HSvojY2zm1DIaH6EBp2L9TBFt8IALAEN5hX6XYpKmCHRUlzYwoWo7YwzKiot0XdbDW+zPKGPKtIlbg6cw/+' ] }","time":"2018-02-05T16:43:05.963Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":30,"msg":"PEMkey generated: -----BEGIN RSA PUBLIC KEY-----\nMIIBCgKCAQEAp3HhMQsqmgSjeiDsZ1ay+UAFgFMdBYgGGkGa2L0ew6/q3b2x9Ccd\nru/amVp1HXV2FVwbpK0HYsTSRvWIiCRRT+AgMSIlap7qlg8+iYvdFIJsorf84+sR\nN9Iq3F1pKD+W9vqsitcEbzljHCLSS2vUKSb7itwjc/AKjky3cX5ndMupQESZNTbi\nwanM9dAJ7K87pURXN66lS/q9u7wxWvjc3iLEp25PU/06moGDMe5BWuD6Rb/pdFM1\nplm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wS\nbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0QIDAQAB\n-----END RSA PUBLIC KEY-----\n","time":"2018-02-05T16:43:05.964Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":30,"msg":"Claims received:  { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n  iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n  iat: 1517848684,\n  nbf: 1517848684,\n  exp: 1517852584,\n  aio: 'Y2NgYAie9cRNqPOcRWFGWt6+bc5u5SvXx2uuq9r/+VPS9ZiyowwA',\n  amr: [ 'pwd' ],\n  family_name: 'Chen',\n  given_name: 'Xi',\n  ipaddr: '73.41.83.228',\n  name: 'Xi Chen',\n  nonce: 'Ag3p2EbUTev5ABW3AftKWa5otymVFiEu',\n  oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n  onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n  sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n  tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n  unique_name: 'XChen@contracosta.courts.ca.gov',\n  upn: 'XChen@contracosta.courts.ca.gov',\n  uti: '9mViyOEOAk-ubWFRd-QVAA',\n  ver: '1.0' }","time":"2018-02-05T16:43:05.965Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":14700,"level":30,"msg":"v2 has no userinfo endpoint, using the content in id_token as the profile","time":"2018-02-05T16:43:05.966Z","v":0}
OIDCStrategy invoked
email:  XChen@contracosta.courts.ca.gov
err:  null
user:  { _id: 5a737e49e440d2445c40b21c,
  updatedAt: 2018-02-01T20:53:29.268Z,
  createdAt: 2018-02-01T20:53:29.268Z,
  authType: 'azure',
  email: 'xchen@contracosta.courts.ca.gov',
  __v: 0,
  role: 'Member',
  cases: [],
  profile: { firstName: 'Xi', lastName: 'Chen' } }
serializing user:  { _id: 5a737e49e440d2445c40b21c,
  updatedAt: 2018-02-01T20:53:29.268Z,
  createdAt: 2018-02-01T20:53:29.268Z,
  authType: 'azure',
  email: 'xchen@contracosta.courts.ca.gov',
  __v: 0,
  role: 'Member',
  cases: [],
  profile: { firstName: 'Xi', lastName: 'Chen' } }
We received a posted return from AzureAD:  IncomingMessage {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 16384,
     buffer: BufferList { head: null, tail: null, length: 0 },
     length: 0,
     pipes: null,
     pipesCount: 0,
     flowing: true,
     ended: true,
     endEmitted: true,
     reading: false,
     sync: true,
     needReadable: false,
     emittedReadable: false,
     readableListening: false,
     resumeScheduled: false,
     defaultEncoding: 'utf8',
     ranOut: false,
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: false,
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  socket: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 41099,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 44617,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 24222 } },
  connection: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 41099,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 44617,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 24222 } },
  httpVersionMajor: 1,
  httpVersionMinor: 1,
  httpVersion: '1.1',
  complete: true,
  headers: 
   { host: 'localhost:3000',
     connection: 'keep-alive',
     'content-length': '2231',
     'cache-control': 'max-age=0',
     'upgrade-insecure-requests': '1',
     origin: 'null',
     'content-type': 'application/x-www-form-urlencoded',
     'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'accept-encoding': 'gzip, deflate, br',
     'accept-language': 'en-US,en;q=0.9',
     cookie: 'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517848985125.fbd08e9a6335a4c3df307cd1824127115cf22f924c85d1225ed73ef4a2defdf825e0ef547e997c5a3368013f0bf351fbe041c58c50e3bb46757e320311401022b2b0513e15cfd6eddd09cb6765910cb892c1230552a29da7d2af21ce3f05e52f1058098ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.57b5e692aca918e07424209b848ec77a=0' },
  rawHeaders: 
   [ 'Host',
     'localhost:3000',
     'Connection',
     'keep-alive',
     'Content-Length',
     '2231',
     'Cache-Control',
     'max-age=0',
     'Upgrade-Insecure-Requests',
     '1',
     'Origin',
     'null',
     'Content-Type',
     'application/x-www-form-urlencoded',
     'User-Agent',
     'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     'Accept',
     'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'Accept-Encoding',
     'gzip, deflate, br',
     'Accept-Language',
     'en-US,en;q=0.9',
     'Cookie',
     'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517848985125.fbd08e9a6335a4c3df307cd1824127115cf22f924c85d1225ed73ef4a2defdf825e0ef547e997c5a3368013f0bf351fbe041c58c50e3bb46757e320311401022b2b0513e15cfd6eddd09cb6765910cb892c1230552a29da7d2af21ce3f05e52f1058098ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.57b5e692aca918e07424209b848ec77a=0' ],
  trailers: {},
  rawTrailers: [],
  upgrade: false,
  url: '/api/auth/openid/return',
  method: 'POST',
  statusCode: null,
  statusMessage: null,
  client: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 41099,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 44617,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 24222 } },
  _consuming: true,
  _dumped: false,
  next: [Function: next],
  baseUrl: '',
  originalUrl: '/api/auth/openid/return',
  _parsedUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  params: {},
  query: {},
  res: 
   ServerResponse {
     domain: null,
     _events: { finish: [Object], end: [Function: onevent] },
     _eventsCount: 2,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: false,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: true,
     useChunkedEncodingByDefault: true,
     sendDate: true,
     _removedHeader: {},
     _contentLength: null,
     _hasBody: true,
     _trailer: '',
     finished: false,
     _headerSent: false,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1773,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 44617,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1773,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 44617,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     _header: null,
     _headers: 
      { 'x-powered-by': 'Express',
        'access-control-allow-origin': '*',
        'access-control-allow-methods': 'PUT, GET, POST, DELETE, OPTIONS',
        'access-control-allow-headers': 'Origin, X-Requested-With, Content-Type, Accept, Authorization, Access-Control-Allow-Credentials',
        'access-control-allow-credentials': 'true',
        'set-cookie': 'passport-aad.1517848985125.fbd08e9a6335a4c3df307cd1824127115cf22f924c85d1225ed73ef4a2defdf825e0ef547e997c5a3368013f0bf351fbe041c58c50e3bb46757e320311401022b2b0513e15cfd6eddd09cb6765910cb892c1230552a29da7d2af21ce3f05e52f1058098ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.57b5e692aca918e07424209b848ec77a=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT' },
     _headerNames: 
      { 'x-powered-by': 'X-Powered-By',
        'access-control-allow-origin': 'Access-Control-Allow-Origin',
        'access-control-allow-methods': 'Access-Control-Allow-Methods',
        'access-control-allow-headers': 'Access-Control-Allow-Headers',
        'access-control-allow-credentials': 'Access-Control-Allow-Credentials',
        'set-cookie': 'Set-Cookie' },
     _onPendingData: [Function: updateOutgoingData],
     req: [Circular],
     locals: {},
     writeHead: [Function: writeHead],
     end: [Function: end],
     _startAt: undefined,
     _startTime: undefined,
     __onFinished: { [Function: listener] queue: [Object] } },
  _parsedOriginalUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  sessionStore: 
   MongoStore {
     domain: null,
     _events: 
      { disconnect: [Function: ondisconnect],
        connect: [Function: onconnect] },
     _eventsCount: 2,
     _maxListeners: undefined,
     ttl: 1209600,
     collectionName: 'sessions',
     autoRemove: 'native',
     autoRemoveInterval: 10,
     transformFunctions: 
      { serialize: [Function: stringify],
        unserialize: [Function: parse] },
     options: { mongooseConnection: [Object], clear_interval: 86400 },
     state: 'connected',
     generate: [Function],
     db: 
      Db {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        s: [Object],
        serverConfig: [Getter],
        bufferMaxEntries: [Getter],
        databaseName: [Getter] },
     collectionReadyPromise: Promise { [Object] },
     collection: Collection { s: [Object] } },
  sessionID: 'R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL',
  session: 
   Session {
     cookie: 
      { path: '/',
        _expires: 2018-02-06T16:43:05.126Z,
        originalMaxAge: 86399999,
        httpOnly: true },
     passport: { user: 'xchen@contracosta.courts.ca.gov' } },
  secret: undefined,
  cookies: 
   { 'connect.sid': 's:R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw++TohQY8/YlSxxXW1AgPhmysT1xLoD7PEkUE',
     'passport-aad.1517848985125.fbd08e9a6335a4c3df307cd1824127115cf22f924c85d1225ed73ef4a2defdf825e0ef547e997c5a3368013f0bf351fbe041c58c50e3bb46757e320311401022b2b0513e15cfd6eddd09cb6765910cb892c1230552a29da7d2af21ce3f05e52f1058098ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.57b5e692aca918e07424209b848ec77a': '0' },
  signedCookies: {},
  body: 
   { code: 'AQABAAIAAABHh4kmS_aKT5XrjzxRAtHz8nI4PznK6BR_AYYWK7x2OlxP7ojgNJWwxbhov9GaOfDgI_R8QRkb9IIa71caPUjYXmBELiq177B6JUn9m2eg1ks6RoKOLFOFB8pElp5fBe2CDoUq7SYyGNgispxitO61BvuLMN7EqvVJ67o4OrpBlt7P_8Jx9x3IDuUu0OHkYuQVV72gVZnQgYI1KCkJ1Ne_YorAELDzOuAUieRwDnu011m02eKqfuTL3KUP4ofFwTeI7DYkcWoftLoVic-CK14RlJxu1bG7pMi8oKes5nBgAKEBWhlc9M7dj1iBvdfZdrvVjmX8LEIsCDJjPkOFCJ9eQ3DlkPUudHAaraA7N7hSz--mbku5VYFkmVDJVnYkxZwrirsjF_5qVp70IqXbE2a1t909VWihXmG19KPE1fK9S6By0yhtbHprKbzDbBy1Ac3oNIzy1P0Y4V76kbenRL4k6V5cs2KLeJ8hmPzNBDnTS5Ff3bN1RZzzL7tSv7tKb6dNcUGu1gmqiDvds1VyNwqd5iO5lx4SGgOkz2-qsAVBvV3MMRC8HOG7EYs_vbwLZVJHtfUyLmIpAij4gvL2oLGqXR60oMHbR5GU1piP8JbqOkMMr_M1lDppaFZwkZe0m4UgAA',
     id_token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODQ4NjgzLCJuYmYiOjE1MTc4NDg2ODMsImV4cCI6MTUxNzg1MjU4MywiYWlvIjoiQVNRQTIvOEdBQUFBQmZ1b2xBQVhsRml4SWcvUzQ5b1AwRnpDbzlZNkZSTW5pc3lFWktScTJnZz0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6IkhKa2thQjAtYmxqMU1va2E5dE0ySVEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoiQWczcDJFYlVUZXY1QUJXM0FmdEtXYTVvdHltVkZpRXUiLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6IkRaNTRFY3FnZTA2Rk9MTF9GZWdXQUEiLCJ2ZXIiOiIxLjAifQ.BL0ewUJii8LORDGMiwLmGBdAa4hvxoW7hp6Aq-Oq0ZkpoHy9C5Hl_V-c7_dpWSYiAQS5im9zFAeDe4Yu12_6N4sLAAVdHKZARVrjYb4Lq4u7XT3ewd1ymUjg-PY5q75fetvxaP7l3zr98ivPLGHTLj6_Ef7gNtfQwZV_peMSFuM1sfSeM14owREaX8-qzmO96f1ynlvAUw8evDL0X6sgcrQJvGVHh7pASpdD0iWHyYyJLYBP3sndt8c3qfAclt2BaoTIsFiDeslSk8No7JIufUo90IT8rHXQ_d0XxIOpMYjyV8oNVxiWwbBeWbSw7sGaksNHS6R9211SvgjhxAdkDw',
     state: 'my_state',
     session_state: 'a4eab50d-afe3-40e1-92b7-517677a51945' },
  _body: true,
  length: undefined,
  read: [Function],
  _startAt: [ 728895, 264588965 ],
  _startTime: 2018-02-05T16:43:05.605Z,
  _remoteAddress: '::1',
  _passport: 
   { instance: 
      Authenticator {
        _key: 'passport',
        _strategies: [Object],
        _serializers: [Object],
        _deserializers: [Object],
        _infoTransformers: [],
        _framework: [Object],
        _userProperty: 'user',
        Authenticator: [Function: Authenticator],
        Passport: [Function: Authenticator],
        Strategy: [Object],
        strategies: [Object] },
     session: { user: 'xchen@contracosta.courts.ca.gov' } },
  user: 
   { _id: 5a737e49e440d2445c40b21c,
     updatedAt: 2018-02-01T20:53:29.268Z,
     createdAt: 2018-02-01T20:53:29.268Z,
     authType: 'azure',
     email: 'xchen@contracosta.courts.ca.gov',
     __v: 0,
     role: 'Member',
     cases: [],
     profile: { firstName: 'Xi', lastName: 'Chen' } },
  route: 
   Route {
     path: '/api/auth/openid/return',
     stack: [ [Object], [Object] ],
     methods: { post: true } },
  authInfo: {} }
[0mPOST /api/auth/openid/return [31m500 [0m450.799 ms - 3354[0m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `babel-node index.js --presets es2015,stage-2`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `babel-node index.js --presets es2015,stage-2`[39m
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":40,"msg":"Using http for redirectUrl is not recommended, please consider using https","time":"2018-02-05T17:28:40.621Z","v":0}
C:\Users\xichentop\Documents\ContraCostaInternship\mainsite-xc\server
Connected to DB
deserializing user...
adding header
we are getting a get request
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":30,"msg":"metadataUrl is: https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9","time":"2018-02-05T17:31:15.601Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":30,"msg":"received the following items in params: {\"policy\":null,\"cachekey\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":{\"url\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":null,\"authtype\":\"oidc\"}}","time":"2018-02-05T17:31:15.601Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":20132,"level":30,"msg":"Parsing JSON retreived from the endpoint","time":"2018-02-05T17:31:15.764Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":20132,"level":30,"msg":"Request to update the Open ID Connect Metadata","time":"2018-02-05T17:31:15.764Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":20132,"level":30,"msg":"Algorithm retrieved was:  [ 'RS256' ]","time":"2018-02-05T17:31:15.765Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":20132,"level":30,"msg":"Issuer we are using is:  https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/","time":"2018-02-05T17:31:15.765Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":20132,"level":30,"msg":"Key Endpoint we will use is:  https://login.microsoftonline.com/common/discovery/keys","time":"2018-02-05T17:31:15.765Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":20132,"level":30,"msg":"Authentication endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/authorize","time":"2018-02-05T17:31:15.765Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":20132,"level":30,"msg":"Token endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/token","time":"2018-02-05T17:31:15.765Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":20132,"level":30,"msg":"User info endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/openid/userinfo","time":"2018-02-05T17:31:15.765Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":20132,"level":30,"msg":"The logout endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/logout","time":"2018-02-05T17:31:15.765Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":30,"msg":"entering Strategy.prototype._flowInitializationHandler","time":"2018-02-05T17:31:15.883Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":30,"msg":"We are sending the response_type:  code id_token","time":"2018-02-05T17:31:15.883Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":30,"msg":"We are sending the response_mode:  form_post","time":"2018-02-05T17:31:15.884Z","v":0}
[0mGET /api/auth/azure-login [36m302 [0m363.360 ms - 0[0m
deserializing user...
adding header
we have received a post request:  IncomingMessage {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 16384,
     buffer: BufferList { head: null, tail: null, length: 0 },
     length: 0,
     pipes: null,
     pipesCount: 0,
     flowing: true,
     ended: true,
     endEmitted: true,
     reading: false,
     sync: true,
     needReadable: false,
     emittedReadable: false,
     readableListening: false,
     resumeScheduled: false,
     defaultEncoding: 'utf8',
     ranOut: false,
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: false,
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  socket: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 5461,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 2013,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 489,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 161779,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 165459,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 24851 } },
  connection: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 5461,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 2013,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 489,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 161779,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 165459,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 24851 } },
  httpVersionMajor: 1,
  httpVersionMinor: 1,
  httpVersion: '1.1',
  complete: true,
  headers: 
   { host: 'localhost:3000',
     connection: 'keep-alive',
     'content-length': '2231',
     'cache-control': 'max-age=0',
     'upgrade-insecure-requests': '1',
     origin: 'null',
     'content-type': 'application/x-www-form-urlencoded',
     'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'accept-encoding': 'gzip, deflate, br',
     'accept-language': 'en-US,en;q=0.9',
     cookie: 'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517851875885.fbd08e9a6335a4c3df307cd18241271171ff249c0bc3c7224fa61cfe8f89f1db0effc24d48cc5e481c334e3c76d761c8e041c58c50e3bb46757e320311401022b2b0511115c8ccbedc5cf65851b66aacbfdb640f76a6a799e5c309c03309fd044d6a3b8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.ccf77aed1edb11f3d6a857a65b91675e=0' },
  rawHeaders: 
   [ 'Host',
     'localhost:3000',
     'Connection',
     'keep-alive',
     'Content-Length',
     '2231',
     'Cache-Control',
     'max-age=0',
     'Upgrade-Insecure-Requests',
     '1',
     'Origin',
     'null',
     'Content-Type',
     'application/x-www-form-urlencoded',
     'User-Agent',
     'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     'Accept',
     'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'Accept-Encoding',
     'gzip, deflate, br',
     'Accept-Language',
     'en-US,en;q=0.9',
     'Cookie',
     'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517851875885.fbd08e9a6335a4c3df307cd18241271171ff249c0bc3c7224fa61cfe8f89f1db0effc24d48cc5e481c334e3c76d761c8e041c58c50e3bb46757e320311401022b2b0511115c8ccbedc5cf65851b66aacbfdb640f76a6a799e5c309c03309fd044d6a3b8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.ccf77aed1edb11f3d6a857a65b91675e=0' ],
  trailers: {},
  rawTrailers: [],
  upgrade: false,
  url: '/api/auth/openid/return',
  method: 'POST',
  statusCode: null,
  statusMessage: null,
  client: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 5461,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 2013,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 489,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 161779,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 165459,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 24851 } },
  _consuming: true,
  _dumped: false,
  next: [Function: next],
  baseUrl: '',
  originalUrl: '/api/auth/openid/return',
  _parsedUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  params: {},
  query: {},
  res: 
   ServerResponse {
     domain: null,
     _events: { finish: [Object], end: [Function: onevent] },
     _eventsCount: 2,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: false,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: true,
     useChunkedEncodingByDefault: true,
     sendDate: true,
     _removedHeader: {},
     _contentLength: null,
     _hasBody: true,
     _trailer: '',
     finished: false,
     _headerSent: false,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 2013,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 165459,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 2013,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 165459,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     _header: null,
     _headers: 
      { 'x-powered-by': 'Express',
        'access-control-allow-origin': '*',
        'access-control-allow-methods': 'PUT, GET, POST, DELETE, OPTIONS',
        'access-control-allow-headers': 'Origin, X-Requested-With, Content-Type, Accept, Authorization, Access-Control-Allow-Credentials',
        'access-control-allow-credentials': 'true' },
     _headerNames: 
      { 'x-powered-by': 'X-Powered-By',
        'access-control-allow-origin': 'Access-Control-Allow-Origin',
        'access-control-allow-methods': 'Access-Control-Allow-Methods',
        'access-control-allow-headers': 'Access-Control-Allow-Headers',
        'access-control-allow-credentials': 'Access-Control-Allow-Credentials' },
     _onPendingData: [Function: updateOutgoingData],
     req: [Circular],
     locals: {},
     writeHead: [Function: writeHead],
     end: [Function: end],
     _startAt: undefined,
     _startTime: undefined,
     __onFinished: { [Function: listener] queue: [Object] } },
  _parsedOriginalUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  sessionStore: 
   MongoStore {
     domain: null,
     _events: 
      { disconnect: [Function: ondisconnect],
        connect: [Function: onconnect] },
     _eventsCount: 2,
     _maxListeners: undefined,
     ttl: 1209600,
     collectionName: 'sessions',
     autoRemove: 'native',
     autoRemoveInterval: 10,
     transformFunctions: 
      { serialize: [Function: stringify],
        unserialize: [Function: parse] },
     options: { mongooseConnection: [Object], clear_interval: 86400 },
     state: 'connected',
     generate: [Function],
     db: 
      Db {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        s: [Object],
        serverConfig: [Getter],
        bufferMaxEntries: [Getter],
        databaseName: [Getter] },
     collectionReadyPromise: Promise { [Object] },
     collection: Collection { s: [Object] } },
  sessionID: 'R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL',
  session: 
   Session {
     cookie: 
      { path: '/',
        _expires: 2018-02-06T17:31:15.886Z,
        originalMaxAge: 86399999,
        httpOnly: true },
     passport: { user: 'xchen@contracosta.courts.ca.gov' } },
  secret: undefined,
  cookies: 
   { 'connect.sid': 's:R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw++TohQY8/YlSxxXW1AgPhmysT1xLoD7PEkUE',
     'passport-aad.1517851875885.fbd08e9a6335a4c3df307cd18241271171ff249c0bc3c7224fa61cfe8f89f1db0effc24d48cc5e481c334e3c76d761c8e041c58c50e3bb46757e320311401022b2b0511115c8ccbedc5cf65851b66aacbfdb640f76a6a799e5c309c03309fd044d6a3b8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.ccf77aed1edb11f3d6a857a65b91675e': '0' },
  signedCookies: {},
  body: 
   { code: 'AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzpznQlcydI-xhfpE9E_30V8ddE35ViTjERh8CMeaDKLl_yeY6E_-Cpe6-WhIqBlMRstlY7swM8MNUdf1qZT6Gs28s0h7eJHjv2PqIi34PlB0tEo0Z2STEkSeMnEyHsa3HD8D4cM6puoOf6gdOlEOf0v2bTtHn5sYLWW1Y92BXTF1GhQT4nW_Hh3H4tS0AoB8Y91qrcD1EyDJ0kEYmG6d58AjW5_bxdykhWjN_yC1R85UYkRAGD6YJjyDac-Y_SU4768VvLB1ssscKRRrFI9iaK7bFgVa_VBm9uBXAMgWry8aD54whT5Lw3qHYN2JcNHkJ6FZWnHHfzqcoF8aOy0Kx9Ofj1Z6BBzuuej_G97g4pNNn501ZFspwLeAfcjlB7fcxlGdFeESpPikhxuGyGnfvkktukPadjovsao9dy-qj6hAqZttjzQZikIoPcGKhva5uZQnXWwuDmrqxI8InJw-KWB2DxtKwb-VgQKC7OirHWQfNAQ1iR6x4eWvr-tQCrPbC4ET0xM8_nQFXSjP8EkKL7vTftJh76xTgXDDZuxCk8SAeX4xNZKQ8L491D975EqauzZJIlfCS3sLn5jVBctAl6nNrroW-zn5924vHF14xk-0gAA',
     id_token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUxNTc0LCJuYmYiOjE1MTc4NTE1NzQsImV4cCI6MTUxNzg1NTQ3NCwiYWlvIjoiQVNRQTIvOEdBQUFBMHc0dlZUQzBTWmxZaEZkL1h1UHZYVnllYnNYeElyaisvcXJKUWFJOTVXQT0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6IlJIZUdXcmQ5NFVwYW15UXFhWHpXZmciLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoibmc0amFEN2hrUVFTVW9NdEtCcHFpVllHenVhTm00d0ciLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6Ii0xM0l3X2JMamtDQjZwcWtCVGdYQUEiLCJ2ZXIiOiIxLjAifQ.YogLBZnZMdmPCHWsz_ncIaGhjFGOC_pmfLMkb0Sdoe4hhdm_wCCTlgV-DwIrpxBLsgpV2YreeVABPCyvXuM_PB_2CQIHpridf0Z89AImVQs26i_KlV10E8uXXvOZKsyiK5jkFSjYccHa123xEXZQogcVLxQxrEk980i3E7Vi4erSe51G8n6jl3ZaUOZTeWCirFDwqORP7FjpWEeM3ltyDx3Wrm9kVNSmln2mF56CqS6PNIL_n-R6ledvLrf0PHU5Up1IBPZORLn0koF6DezK5-Eq16gwO_aK21uLtncenDUk8gp73aT-3o0lP22xel3tWiRPLSTXFqF9Q55unJcpSw',
     state: 'CUSTOMoA2ht1zVFETcngUjrLbmbxmjc7bQ8Oqqmy_state',
     session_state: 'a4eab50d-afe3-40e1-92b7-517677a51945' },
  _body: true,
  length: undefined,
  read: [Function],
  _startAt: [ 731786, 37201471 ],
  _startTime: 2018-02-05T17:31:16.378Z,
  _remoteAddress: '::1',
  _passport: 
   { instance: 
      Authenticator {
        _key: 'passport',
        _strategies: [Object],
        _serializers: [Object],
        _deserializers: [Object],
        _infoTransformers: [],
        _framework: [Object],
        _userProperty: 'user',
        Authenticator: [Function: Authenticator],
        Passport: [Function: Authenticator],
        Strategy: [Object],
        strategies: [Object] },
     session: { user: 'xchen@contracosta.courts.ca.gov' } },
  user: 
   { _id: 5a737e49e440d2445c40b21c,
     updatedAt: 2018-02-01T20:53:29.268Z,
     createdAt: 2018-02-01T20:53:29.268Z,
     authType: 'azure',
     email: 'xchen@contracosta.courts.ca.gov',
     __v: 0,
     role: 'Member',
     cases: [],
     profile: { firstName: 'Xi', lastName: 'Chen' } },
  route: 
   Route {
     path: '/api/auth/openid/return',
     stack: [ [Object], [Object] ],
     methods: { post: true } } }
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":30,"msg":"metadataUrl is: https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9","time":"2018-02-05T17:31:16.491Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":30,"msg":"received the following items in params: {\"id_token\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUxNTc0LCJuYmYiOjE1MTc4NTE1NzQsImV4cCI6MTUxNzg1NTQ3NCwiYWlvIjoiQVNRQTIvOEdBQUFBMHc0dlZUQzBTWmxZaEZkL1h1UHZYVnllYnNYeElyaisvcXJKUWFJOTVXQT0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6IlJIZUdXcmQ5NFVwYW15UXFhWHpXZmciLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoibmc0amFEN2hrUVFTVW9NdEtCcHFpVllHenVhTm00d0ciLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6Ii0xM0l3X2JMamtDQjZwcWtCVGdYQUEiLCJ2ZXIiOiIxLjAifQ.YogLBZnZMdmPCHWsz_ncIaGhjFGOC_pmfLMkb0Sdoe4hhdm_wCCTlgV-DwIrpxBLsgpV2YreeVABPCyvXuM_PB_2CQIHpridf0Z89AImVQs26i_KlV10E8uXXvOZKsyiK5jkFSjYccHa123xEXZQogcVLxQxrEk980i3E7Vi4erSe51G8n6jl3ZaUOZTeWCirFDwqORP7FjpWEeM3ltyDx3Wrm9kVNSmln2mF56CqS6PNIL_n-R6ledvLrf0PHU5Up1IBPZORLn0koF6DezK5-Eq16gwO_aK21uLtncenDUk8gp73aT-3o0lP22xel3tWiRPLSTXFqF9Q55unJcpSw\",\"code\":\"AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzpznQlcydI-xhfpE9E_30V8ddE35ViTjERh8CMeaDKLl_yeY6E_-Cpe6-WhIqBlMRstlY7swM8MNUdf1qZT6Gs28s0h7eJHjv2PqIi34PlB0tEo0Z2STEkSeMnEyHsa3HD8D4cM6puoOf6gdOlEOf0v2bTtHn5sYLWW1Y92BXTF1GhQT4nW_Hh3H4tS0AoB8Y91qrcD1EyDJ0kEYmG6d58AjW5_bxdykhWjN_yC1R85UYkRAGD6YJjyDac-Y_SU4768VvLB1ssscKRRrFI9iaK7bFgVa_VBm9uBXAMgWry8aD54whT5Lw3qHYN2JcNHkJ6FZWnHHfzqcoF8aOy0Kx9Ofj1Z6BBzuuej_G97g4pNNn501ZFspwLeAfcjlB7fcxlGdFeESpPikhxuGyGnfvkktukPadjovsao9dy-qj6hAqZttjzQZikIoPcGKhva5uZQnXWwuDmrqxI8InJw-KWB2DxtKwb-VgQKC7OirHWQfNAQ1iR6x4eWvr-tQCrPbC4ET0xM8_nQFXSjP8EkKL7vTftJh76xTgXDDZuxCk8SAeX4xNZKQ8L491D975EqauzZJIlfCS3sLn5jVBctAl6nNrroW-zn5924vHF14xk-0gAA\",\"state\":\"CUSTOMoA2ht1zVFETcngUjrLbmbxmjc7bQ8Oqqmy_state\",\"nonce\":\"ng4jaD7hkQQSUoMtKBpqiVYGzuaNm4wG\",\"resource\":\"https://graph.windows.net\",\"cachekey\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":{\"url\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":null,\"authtype\":\"oidc\"}}","time":"2018-02-05T17:31:16.492Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":30,"msg":"entering Strategy.prototype._hybridFlowHandler, received code: AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzpznQlcydI-xhfpE9E_30V8ddE35ViTjERh8CMeaDKLl_yeY6E_-Cpe6-WhIqBlMRstlY7swM8MNUdf1qZT6Gs28s0h7eJHjv2PqIi34PlB0tEo0Z2STEkSeMnEyHsa3HD8D4cM6puoOf6gdOlEOf0v2bTtHn5sYLWW1Y92BXTF1GhQT4nW_Hh3H4tS0AoB8Y91qrcD1EyDJ0kEYmG6d58AjW5_bxdykhWjN_yC1R85UYkRAGD6YJjyDac-Y_SU4768VvLB1ssscKRRrFI9iaK7bFgVa_VBm9uBXAMgWry8aD54whT5Lw3qHYN2JcNHkJ6FZWnHHfzqcoF8aOy0Kx9Ofj1Z6BBzuuej_G97g4pNNn501ZFspwLeAfcjlB7fcxlGdFeESpPikhxuGyGnfvkktukPadjovsao9dy-qj6hAqZttjzQZikIoPcGKhva5uZQnXWwuDmrqxI8InJw-KWB2DxtKwb-VgQKC7OirHWQfNAQ1iR6x4eWvr-tQCrPbC4ET0xM8_nQFXSjP8EkKL7vTftJh76xTgXDDZuxCk8SAeX4xNZKQ8L491D975EqauzZJIlfCS3sLn5jVBctAl6nNrroW-zn5924vHF14xk-0gAA, received id_token: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUxNTc0LCJuYmYiOjE1MTc4NTE1NzQsImV4cCI6MTUxNzg1NTQ3NCwiYWlvIjoiQVNRQTIvOEdBQUFBMHc0dlZUQzBTWmxZaEZkL1h1UHZYVnllYnNYeElyaisvcXJKUWFJOTVXQT0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6IlJIZUdXcmQ5NFVwYW15UXFhWHpXZmciLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoibmc0amFEN2hrUVFTVW9NdEtCcHFpVllHenVhTm00d0ciLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6Ii0xM0l3X2JMamtDQjZwcWtCVGdYQUEiLCJ2ZXIiOiIxLjAifQ.YogLBZnZMdmPCHWsz_ncIaGhjFGOC_pmfLMkb0Sdoe4hhdm_wCCTlgV-DwIrpxBLsgpV2YreeVABPCyvXuM_PB_2CQIHpridf0Z89AImVQs26i_KlV10E8uXXvOZKsyiK5jkFSjYccHa123xEXZQogcVLxQxrEk980i3E7Vi4erSe51G8n6jl3ZaUOZTeWCirFDwqORP7FjpWEeM3ltyDx3Wrm9kVNSmln2mF56CqS6PNIL_n-R6ledvLrf0PHU5Up1IBPZORLn0koF6DezK5-Eq16gwO_aK21uLtncenDUk8gp73aT-3o0lP22xel3tWiRPLSTXFqF9Q55unJcpSw","time":"2018-02-05T17:31:16.493Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":30,"msg":"token decoded:  { header: \n   { typ: 'JWT',\n     alg: 'RS256',\n     x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n     kid: 'z44wMdHu8wKsumrbfaK98qxs5YI' },\n  payload: \n   { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n     iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n     iat: 1517851574,\n     nbf: 1517851574,\n     exp: 1517855474,\n     aio: 'ASQA2/8GAAAA0w4vVTC0SZlYhFd/XuPvXVyebsXxIrj+/qrJQaI95WA=',\n     amr: [ 'pwd' ],\n     c_hash: 'RHeGWrd94UpamyQqaXzWfg',\n     family_name: 'Chen',\n     given_name: 'Xi',\n     ipaddr: '73.41.83.228',\n     name: 'Xi Chen',\n     nonce: 'ng4jaD7hkQQSUoMtKBpqiVYGzuaNm4wG',\n     oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n     onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n     sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n     tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n     unique_name: 'XChen@contracosta.courts.ca.gov',\n     upn: 'XChen@contracosta.courts.ca.gov',\n     uti: '-13Iw_bLjkCB6pqkBTgXAA',\n     ver: '1.0' },\n  signature: 'YogLBZnZMdmPCHWsz_ncIaGhjFGOC_pmfLMkb0Sdoe4hhdm_wCCTlgV-DwIrpxBLsgpV2YreeVABPCyvXuM_PB_2CQIHpridf0Z89AImVQs26i_KlV10E8uXXvOZKsyiK5jkFSjYccHa123xEXZQogcVLxQxrEk980i3E7Vi4erSe51G8n6jl3ZaUOZTeWCirFDwqORP7FjpWEeM3ltyDx3Wrm9kVNSmln2mF56CqS6PNIL_n-R6ledvLrf0PHU5Up1IBPZORLn0koF6DezK5-Eq16gwO_aK21uLtncenDUk8gp73aT-3o0lP22xel3tWiRPLSTXFqF9Q55unJcpSw' }","time":"2018-02-05T17:31:16.495Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":20132,"level":30,"msg":"working on key: { kty: 'RSA',\n  use: 'sig',\n  kid: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  n: 'p3HhMQsqmgSjeiDsZ1ay-UAFgFMdBYgGGkGa2L0ew6_q3b2x9Ccdru_amVp1HXV2FVwbpK0HYsTSRvWIiCRRT-AgMSIlap7qlg8-iYvdFIJsorf84-sRN9Iq3F1pKD-W9vqsitcEbzljHCLSS2vUKSb7itwjc_AKjky3cX5ndMupQESZNTbiwanM9dAJ7K87pURXN66lS_q9u7wxWvjc3iLEp25PU_06moGDMe5BWuD6Rb_pdFM1plm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wSbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0Q',\n  e: 'AQAB',\n  x5c: [ 'MIIDBTCCAe2gAwIBAgIQaD0+a2FNl5JMaE2/7KUP5zANBgkqhkiG9w0BAQsFADAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MB4XDTE3MTEyODAwMDAwMFoXDTE5MTEyOTAwMDAwMFowLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKdx4TELKpoEo3og7GdWsvlABYBTHQWIBhpBmti9HsOv6t29sfQnHa7v2pladR11dhVcG6StB2LE0kb1iIgkUU/gIDEiJWqe6pYPPomL3RSCbKK3/OPrETfSKtxdaSg/lvb6rIrXBG85Yxwi0ktr1Ckm+4rcI3PwCo5Mt3F+Z3TLqUBEmTU24sGpzPXQCeyvO6VEVzeupUv6vbu8MVr43N4ixKduT1P9OpqBgzHuQVrg+kW/6XRTNaZZthTlITG8VEa8I02S2Q4VyosdzcrMQmRp75MTA2YKdqTexTKmWKaXFIcGCbvMEm35sIfIVziQ8YMSEC+7GBoh3k2g2BFRgtECAwEAAaMhMB8wHQYDVR0OBBYEFGpho/kx4FeBzTTBIbYVWfFdGIblMA0GCSqGSIb3DQEBCwUAA4IBAQBgaeYvuV4sYJZNPXbxN6FIc0oA4bCg1+DFalT3qzW0bFbl7pXP5YPY/adZlT8+cTznjMgzPPvcXaQdcytR16YqHJVX0ik67NrrQ3g0TtGLc42SuzE+6awryiLQY0Zd799bJwrRcDZUqm/6jKOEOd+utf+3o+VU57w+n7iQLuSL1mKYGMsyzMYCj6xVtYl75iam86leT0/tlXHJ8oqxU5w3xVY6P7v0Sz2UteQNQvhKi6R1/cjfiJUp+OzHpaEor6ls7HSvojY2zm1DIaH6EBp2L9TBFt8IALAEN5hX6XYpKmCHRUlzYwoWo7YwzKiot0XdbDW+zPKGPKtIlbg6cw/+' ] }","time":"2018-02-05T17:31:16.496Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":30,"msg":"PEMkey generated: -----BEGIN RSA PUBLIC KEY-----\nMIIBCgKCAQEAp3HhMQsqmgSjeiDsZ1ay+UAFgFMdBYgGGkGa2L0ew6/q3b2x9Ccd\nru/amVp1HXV2FVwbpK0HYsTSRvWIiCRRT+AgMSIlap7qlg8+iYvdFIJsorf84+sR\nN9Iq3F1pKD+W9vqsitcEbzljHCLSS2vUKSb7itwjc/AKjky3cX5ndMupQESZNTbi\nwanM9dAJ7K87pURXN66lS/q9u7wxWvjc3iLEp25PU/06moGDMe5BWuD6Rb/pdFM1\nplm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wS\nbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0QIDAQAB\n-----END RSA PUBLIC KEY-----\n","time":"2018-02-05T17:31:16.498Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":30,"msg":"Claims received:  { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n  iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n  iat: 1517851574,\n  nbf: 1517851574,\n  exp: 1517855474,\n  aio: 'ASQA2/8GAAAA0w4vVTC0SZlYhFd/XuPvXVyebsXxIrj+/qrJQaI95WA=',\n  amr: [ 'pwd' ],\n  c_hash: 'RHeGWrd94UpamyQqaXzWfg',\n  family_name: 'Chen',\n  given_name: 'Xi',\n  ipaddr: '73.41.83.228',\n  name: 'Xi Chen',\n  nonce: 'ng4jaD7hkQQSUoMtKBpqiVYGzuaNm4wG',\n  oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n  onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n  sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n  tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n  unique_name: 'XChen@contracosta.courts.ca.gov',\n  upn: 'XChen@contracosta.courts.ca.gov',\n  uti: '-13Iw_bLjkCB6pqkBTgXAA',\n  ver: '1.0' }","time":"2018-02-05T17:31:16.500Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":30,"msg":"entering Strategy.prototype._authCodeFlowHandler, received code: AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzpznQlcydI-xhfpE9E_30V8ddE35ViTjERh8CMeaDKLl_yeY6E_-Cpe6-WhIqBlMRstlY7swM8MNUdf1qZT6Gs28s0h7eJHjv2PqIi34PlB0tEo0Z2STEkSeMnEyHsa3HD8D4cM6puoOf6gdOlEOf0v2bTtHn5sYLWW1Y92BXTF1GhQT4nW_Hh3H4tS0AoB8Y91qrcD1EyDJ0kEYmG6d58AjW5_bxdykhWjN_yC1R85UYkRAGD6YJjyDac-Y_SU4768VvLB1ssscKRRrFI9iaK7bFgVa_VBm9uBXAMgWry8aD54whT5Lw3qHYN2JcNHkJ6FZWnHHfzqcoF8aOy0Kx9Ofj1Z6BBzuuej_G97g4pNNn501ZFspwLeAfcjlB7fcxlGdFeESpPikhxuGyGnfvkktukPadjovsao9dy-qj6hAqZttjzQZikIoPcGKhva5uZQnXWwuDmrqxI8InJw-KWB2DxtKwb-VgQKC7OirHWQfNAQ1iR6x4eWvr-tQCrPbC4ET0xM8_nQFXSjP8EkKL7vTftJh76xTgXDDZuxCk8SAeX4xNZKQ8L491D975EqauzZJIlfCS3sLn5jVBctAl6nNrroW-zn5924vHF14xk-0gAA","time":"2018-02-05T17:31:16.501Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":30,"msg":"In _getAccessTokenBySecretOrAssertion: we are using client secret","time":"2018-02-05T17:31:16.501Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":30,"msg":"received id_token:  eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUxNTc1LCJuYmYiOjE1MTc4NTE1NzUsImV4cCI6MTUxNzg1NTQ3NSwiYWlvIjoiQVNRQTIvOEdBQUFBQmZ1b2xBQVhsRml4SWcvUzQ5b1AwRnpDbzlZNkZSTW5pc3lFWktScTJnZz0iLCJhbXIiOlsicHdkIl0sImZhbWlseV9uYW1lIjoiQ2hlbiIsImdpdmVuX25hbWUiOiJYaSIsImlwYWRkciI6IjczLjQxLjgzLjIyOCIsIm5hbWUiOiJYaSBDaGVuIiwibm9uY2UiOiJuZzRqYUQ3aGtRUVNVb010S0JwcWlWWUd6dWFObTR3RyIsIm9pZCI6IjlmNTU0ZmYyLWQ0NTUtNDkxMi1iYzE3LWZiOTBhYjY3NzI2NiIsIm9ucHJlbV9zaWQiOiJTLTEtNS0yMS00OTc0MDQ4NTUtNTk3NjM1OTkyLTk4ODg4MjU3Ni0xNDI4MCIsInN1YiI6InpGZHFRZXlWLV9aTmVNNzdmZHlOc0c4Vzk0ejJ3OVpTdlU2ZjlqTmIxejgiLCJ0aWQiOiI4Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYiLCJ1bmlxdWVfbmFtZSI6IlhDaGVuQGNvbnRyYWNvc3RhLmNvdXJ0cy5jYS5nb3YiLCJ1cG4iOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXRpIjoiV0tiZnQzZ2hPVWVsWlJLS0xwa1ZBQSIsInZlciI6IjEuMCJ9.hECVvcp-ikta2eydBDnlTgSZRQSyyYUEJvHkWK0vIanhSNEA-P8YOqLJWPvqxZ9OCf8x8nyWMlvGqK7kF4VthCNJwXQkNhSHppd-QV4dP1xfwJUF2fAZvxrUiZ3zOnDuSeU9OGn1rLQclzavXtLfUycBtgg5xUa32IYX6t4sJjk5LchHbNLNltwbaSajU-pkSZJ9Mm-cmyV2wMstjr_VCSiKhAAsYYcNHjIiUt_PrIvMpIeP8JnGGn93V6mQ0KSy3RbDqQShrWxfxJRlQOBDyWltU3HO7_W0DSKrtK9OmWmMEYG4-Sy9LSGvbdJfXEWHfHqs0_3WumbwmBpMzZycAA","time":"2018-02-05T17:31:16.761Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":30,"msg":"received access_token:  eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiJodHRwczovL2dyYXBoLndpbmRvd3MubmV0IiwiaXNzIjoiaHR0cHM6Ly9zdHMud2luZG93cy5uZXQvOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmLyIsImlhdCI6MTUxNzg1MTU3NSwibmJmIjoxNTE3ODUxNTc1LCJleHAiOjE1MTc4NTU0NzUsImFjciI6IjEiLCJhaW8iOiJBU1FBMi84R0FBQUFDQWlrMlB1Z1haMjkzNjQ1ZU5jVTUvcTZJT29WK2dlc2NmWGRTaFMwcDFrPSIsImFtciI6WyJwd2QiXSwiYXBwaWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJhcHBpZGFjciI6IjEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm9pZCI6IjlmNTU0ZmYyLWQ0NTUtNDkxMi1iYzE3LWZiOTBhYjY3NzI2NiIsIm9ucHJlbV9zaWQiOiJTLTEtNS0yMS00OTc0MDQ4NTUtNTk3NjM1OTkyLTk4ODg4MjU3Ni0xNDI4MCIsInB1aWQiOiIxMDAzM0ZGRkEyNkVDOTBDIiwic2NwIjoiTWFpbC5SZWFkIG9mZmxpbmVfYWNjZXNzIG9wZW5pZCBwcm9maWxlIFVzZXIuUmVhZCIsInN1YiI6IjVMZWlBbTJONDQ5MWF2LUdtTE9fV081QVVmR0xuNmdWdjlEdU5oS2swU3ciLCJ0ZW5hbnRfcmVnaW9uX3Njb3BlIjoiTkEiLCJ0aWQiOiI4Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYiLCJ1bmlxdWVfbmFtZSI6IlhDaGVuQGNvbnRyYWNvc3RhLmNvdXJ0cy5jYS5nb3YiLCJ1cG4iOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXRpIjoiV0tiZnQzZ2hPVWVsWlJLS0xwa1ZBQSIsInZlciI6IjEuMCJ9.VMvmFL8-SaKcIm_9AYlmSTBEacsxgc0l9Re4oRn_imAPDtRxRoTiFTZb9BnhCpFnPmmf5uxL9fYUCdlJW6DOEW2N5qItLuW7WZCHLCGOMCzpSqjIjRqbihXSa-mpM8JGX_UON7v86D0TRXGD5bfB-dmFs_xAGSRy8HX9wqnE81yqS4eTesx_mhpgx9y4Jma9Lw6YZq2KlMhqLv3PbUQurZoeGv_8YVHW7IkTXbuGrF2uBcKl8341mK9xdr1KfEHRQbuLwxRr-X5STjPKfrrOthw0SXdqu1JVJ3fQMIGFW6FkQSdIeCXHBetdxgTMRD1PCbGQ8hA-qoVbt70dCjsczA","time":"2018-02-05T17:31:16.761Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":30,"msg":"received refresh_token:  AQABAAAAAABHh4kmS_aKT5XrjzxRAtHz-v2lXTfMAHsk19ZQVKQ-CK3MZyHEJmqa7iiac-HNifFX06k2FP2moH2YREQLptS08ZfwENY-vfK7eFD3o9bD780SPe5NL3qzdtJIPJUrndyDB6xn2URw1s0_y3Nopi7vXnI7c7_U3Bg6E8EtHNgOpIKXEMfH23c-IRphcpKcMITp3EDQmeObvLHGhICtp6aK616ZF5M-OznVO6g1DpeL0WHuOt8ET6selJDzsMmqv8XymcAhiqzGKRcnCX9DhUe8b0ZG-PreymF6aIMnAKuGWXTpyzhlRSJM2eW62ozSEYSfxORYuCSzEqtclOBeRlJBSDpRUQQ2pJ6heAKEqXBPzVqfp3Pr59GhX7K0ELyAx_CWfwkycbW4xYN4Ra0xC5qvvf6iwM5E1G9vlcRG-duWn5g7YfJsZm0UwNtRmkPxaeWtpjcB8bRRBMjECa9t7c7Ypvr0vfuWPyCuq1mWQU2bWOl71sdtF02ClQzxr-SoVrP2RMtt59AdhDBOioI122DOeIWvdufd8EKnRtNi-bgtDtON0QkHzr1SmAO8l3KbfRY5d_UgewA7a3_CZzTcsZjLj6p5-H1tBZCmfRuNTdDF1xnZPALKZk1UM33mslCBo5VsiM1Ba9Dp6oPZN96QKxuYPmZ6V-1tCJJWIAEzMbPAHzUC_JiZ7JbyBqFUyBILNjpBY7BWa5J1xVfMSiylBm3yU9ps3W9W7sAnzJf_aB7gH8DrqL5PF6uZVLIgh6gEczIZlUsoGs5lDzOjCs6H903T0rRWu27ZHrBmHdMGaBluv3henz99c2qr8R9Jn7LMLLe3e3GCq6fj4-RLFhCUWdk-IAA","time":"2018-02-05T17:31:16.762Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":30,"msg":"token decoded:  { header: \n   { typ: 'JWT',\n     alg: 'RS256',\n     x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n     kid: 'z44wMdHu8wKsumrbfaK98qxs5YI' },\n  payload: \n   { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n     iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n     iat: 1517851575,\n     nbf: 1517851575,\n     exp: 1517855475,\n     aio: 'ASQA2/8GAAAABfuolAAXlFixIg/S49oP0FzCo9Y6FRMnisyEZKRq2gg=',\n     amr: [ 'pwd' ],\n     family_name: 'Chen',\n     given_name: 'Xi',\n     ipaddr: '73.41.83.228',\n     name: 'Xi Chen',\n     nonce: 'ng4jaD7hkQQSUoMtKBpqiVYGzuaNm4wG',\n     oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n     onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n     sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n     tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n     unique_name: 'XChen@contracosta.courts.ca.gov',\n     upn: 'XChen@contracosta.courts.ca.gov',\n     uti: 'WKbft3ghOUelZRKKLpkVAA',\n     ver: '1.0' },\n  signature: 'hECVvcp-ikta2eydBDnlTgSZRQSyyYUEJvHkWK0vIanhSNEA-P8YOqLJWPvqxZ9OCf8x8nyWMlvGqK7kF4VthCNJwXQkNhSHppd-QV4dP1xfwJUF2fAZvxrUiZ3zOnDuSeU9OGn1rLQclzavXtLfUycBtgg5xUa32IYX6t4sJjk5LchHbNLNltwbaSajU-pkSZJ9Mm-cmyV2wMstjr_VCSiKhAAsYYcNHjIiUt_PrIvMpIeP8JnGGn93V6mQ0KSy3RbDqQShrWxfxJRlQOBDyWltU3HO7_W0DSKrtK9OmWmMEYG4-Sy9LSGvbdJfXEWHfHqs0_3WumbwmBpMzZycAA' }","time":"2018-02-05T17:31:16.764Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":20132,"level":30,"msg":"working on key: { kty: 'RSA',\n  use: 'sig',\n  kid: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  n: 'p3HhMQsqmgSjeiDsZ1ay-UAFgFMdBYgGGkGa2L0ew6_q3b2x9Ccdru_amVp1HXV2FVwbpK0HYsTSRvWIiCRRT-AgMSIlap7qlg8-iYvdFIJsorf84-sRN9Iq3F1pKD-W9vqsitcEbzljHCLSS2vUKSb7itwjc_AKjky3cX5ndMupQESZNTbiwanM9dAJ7K87pURXN66lS_q9u7wxWvjc3iLEp25PU_06moGDMe5BWuD6Rb_pdFM1plm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wSbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0Q',\n  e: 'AQAB',\n  x5c: [ 'MIIDBTCCAe2gAwIBAgIQaD0+a2FNl5JMaE2/7KUP5zANBgkqhkiG9w0BAQsFADAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MB4XDTE3MTEyODAwMDAwMFoXDTE5MTEyOTAwMDAwMFowLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKdx4TELKpoEo3og7GdWsvlABYBTHQWIBhpBmti9HsOv6t29sfQnHa7v2pladR11dhVcG6StB2LE0kb1iIgkUU/gIDEiJWqe6pYPPomL3RSCbKK3/OPrETfSKtxdaSg/lvb6rIrXBG85Yxwi0ktr1Ckm+4rcI3PwCo5Mt3F+Z3TLqUBEmTU24sGpzPXQCeyvO6VEVzeupUv6vbu8MVr43N4ixKduT1P9OpqBgzHuQVrg+kW/6XRTNaZZthTlITG8VEa8I02S2Q4VyosdzcrMQmRp75MTA2YKdqTexTKmWKaXFIcGCbvMEm35sIfIVziQ8YMSEC+7GBoh3k2g2BFRgtECAwEAAaMhMB8wHQYDVR0OBBYEFGpho/kx4FeBzTTBIbYVWfFdGIblMA0GCSqGSIb3DQEBCwUAA4IBAQBgaeYvuV4sYJZNPXbxN6FIc0oA4bCg1+DFalT3qzW0bFbl7pXP5YPY/adZlT8+cTznjMgzPPvcXaQdcytR16YqHJVX0ik67NrrQ3g0TtGLc42SuzE+6awryiLQY0Zd799bJwrRcDZUqm/6jKOEOd+utf+3o+VU57w+n7iQLuSL1mKYGMsyzMYCj6xVtYl75iam86leT0/tlXHJ8oqxU5w3xVY6P7v0Sz2UteQNQvhKi6R1/cjfiJUp+OzHpaEor6ls7HSvojY2zm1DIaH6EBp2L9TBFt8IALAEN5hX6XYpKmCHRUlzYwoWo7YwzKiot0XdbDW+zPKGPKtIlbg6cw/+' ] }","time":"2018-02-05T17:31:16.765Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":30,"msg":"PEMkey generated: -----BEGIN RSA PUBLIC KEY-----\nMIIBCgKCAQEAp3HhMQsqmgSjeiDsZ1ay+UAFgFMdBYgGGkGa2L0ew6/q3b2x9Ccd\nru/amVp1HXV2FVwbpK0HYsTSRvWIiCRRT+AgMSIlap7qlg8+iYvdFIJsorf84+sR\nN9Iq3F1pKD+W9vqsitcEbzljHCLSS2vUKSb7itwjc/AKjky3cX5ndMupQESZNTbi\nwanM9dAJ7K87pURXN66lS/q9u7wxWvjc3iLEp25PU/06moGDMe5BWuD6Rb/pdFM1\nplm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wS\nbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0QIDAQAB\n-----END RSA PUBLIC KEY-----\n","time":"2018-02-05T17:31:16.766Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":30,"msg":"Claims received:  { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n  iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n  iat: 1517851575,\n  nbf: 1517851575,\n  exp: 1517855475,\n  aio: 'ASQA2/8GAAAABfuolAAXlFixIg/S49oP0FzCo9Y6FRMnisyEZKRq2gg=',\n  amr: [ 'pwd' ],\n  family_name: 'Chen',\n  given_name: 'Xi',\n  ipaddr: '73.41.83.228',\n  name: 'Xi Chen',\n  nonce: 'ng4jaD7hkQQSUoMtKBpqiVYGzuaNm4wG',\n  oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n  onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n  sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n  tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n  unique_name: 'XChen@contracosta.courts.ca.gov',\n  upn: 'XChen@contracosta.courts.ca.gov',\n  uti: 'WKbft3ghOUelZRKKLpkVAA',\n  ver: '1.0' }","time":"2018-02-05T17:31:16.769Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":20132,"level":30,"msg":"v2 has no userinfo endpoint, using the content in id_token as the profile","time":"2018-02-05T17:31:16.773Z","v":0}
OIDCStrategy invoked
email:  XChen@contracosta.courts.ca.gov
err:  null
user:  { _id: 5a737e49e440d2445c40b21c,
  updatedAt: 2018-02-01T20:53:29.268Z,
  createdAt: 2018-02-01T20:53:29.268Z,
  authType: 'azure',
  email: 'xchen@contracosta.courts.ca.gov',
  __v: 0,
  role: 'Member',
  cases: [],
  profile: { firstName: 'Xi', lastName: 'Chen' } }
serializing user:  { _id: 5a737e49e440d2445c40b21c,
  updatedAt: 2018-02-01T20:53:29.268Z,
  createdAt: 2018-02-01T20:53:29.268Z,
  authType: 'azure',
  email: 'xchen@contracosta.courts.ca.gov',
  __v: 0,
  role: 'Member',
  cases: [],
  profile: { firstName: 'Xi', lastName: 'Chen' } }
We received a posted return from AzureAD:  IncomingMessage {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 16384,
     buffer: BufferList { head: null, tail: null, length: 0 },
     length: 0,
     pipes: null,
     pipesCount: 0,
     flowing: true,
     ended: true,
     endEmitted: true,
     reading: false,
     sync: true,
     needReadable: false,
     emittedReadable: false,
     readableListening: false,
     resumeScheduled: false,
     defaultEncoding: 'utf8',
     ranOut: false,
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: false,
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  socket: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 5461,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 2013,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 489,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 161779,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 165459,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 24851 } },
  connection: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 5461,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 2013,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 489,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 161779,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 165459,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 24851 } },
  httpVersionMajor: 1,
  httpVersionMinor: 1,
  httpVersion: '1.1',
  complete: true,
  headers: 
   { host: 'localhost:3000',
     connection: 'keep-alive',
     'content-length': '2231',
     'cache-control': 'max-age=0',
     'upgrade-insecure-requests': '1',
     origin: 'null',
     'content-type': 'application/x-www-form-urlencoded',
     'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'accept-encoding': 'gzip, deflate, br',
     'accept-language': 'en-US,en;q=0.9',
     cookie: 'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517851875885.fbd08e9a6335a4c3df307cd18241271171ff249c0bc3c7224fa61cfe8f89f1db0effc24d48cc5e481c334e3c76d761c8e041c58c50e3bb46757e320311401022b2b0511115c8ccbedc5cf65851b66aacbfdb640f76a6a799e5c309c03309fd044d6a3b8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.ccf77aed1edb11f3d6a857a65b91675e=0' },
  rawHeaders: 
   [ 'Host',
     'localhost:3000',
     'Connection',
     'keep-alive',
     'Content-Length',
     '2231',
     'Cache-Control',
     'max-age=0',
     'Upgrade-Insecure-Requests',
     '1',
     'Origin',
     'null',
     'Content-Type',
     'application/x-www-form-urlencoded',
     'User-Agent',
     'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     'Accept',
     'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'Accept-Encoding',
     'gzip, deflate, br',
     'Accept-Language',
     'en-US,en;q=0.9',
     'Cookie',
     'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517851875885.fbd08e9a6335a4c3df307cd18241271171ff249c0bc3c7224fa61cfe8f89f1db0effc24d48cc5e481c334e3c76d761c8e041c58c50e3bb46757e320311401022b2b0511115c8ccbedc5cf65851b66aacbfdb640f76a6a799e5c309c03309fd044d6a3b8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.ccf77aed1edb11f3d6a857a65b91675e=0' ],
  trailers: {},
  rawTrailers: [],
  upgrade: false,
  url: '/api/auth/openid/return',
  method: 'POST',
  statusCode: null,
  statusMessage: null,
  client: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 5461,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 2013,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 489,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 161779,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 165459,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 24851 } },
  _consuming: true,
  _dumped: false,
  next: [Function: next],
  baseUrl: '',
  originalUrl: '/api/auth/openid/return',
  _parsedUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  params: {},
  query: {},
  res: 
   ServerResponse {
     domain: null,
     _events: { finish: [Object], end: [Function: onevent] },
     _eventsCount: 2,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: false,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: true,
     useChunkedEncodingByDefault: true,
     sendDate: true,
     _removedHeader: {},
     _contentLength: null,
     _hasBody: true,
     _trailer: '',
     finished: false,
     _headerSent: false,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 2013,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 165459,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 2013,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 165459,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     _header: null,
     _headers: 
      { 'x-powered-by': 'Express',
        'access-control-allow-origin': '*',
        'access-control-allow-methods': 'PUT, GET, POST, DELETE, OPTIONS',
        'access-control-allow-headers': 'Origin, X-Requested-With, Content-Type, Accept, Authorization, Access-Control-Allow-Credentials',
        'access-control-allow-credentials': 'true',
        'set-cookie': 'passport-aad.1517851875885.fbd08e9a6335a4c3df307cd18241271171ff249c0bc3c7224fa61cfe8f89f1db0effc24d48cc5e481c334e3c76d761c8e041c58c50e3bb46757e320311401022b2b0511115c8ccbedc5cf65851b66aacbfdb640f76a6a799e5c309c03309fd044d6a3b8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.ccf77aed1edb11f3d6a857a65b91675e=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT' },
     _headerNames: 
      { 'x-powered-by': 'X-Powered-By',
        'access-control-allow-origin': 'Access-Control-Allow-Origin',
        'access-control-allow-methods': 'Access-Control-Allow-Methods',
        'access-control-allow-headers': 'Access-Control-Allow-Headers',
        'access-control-allow-credentials': 'Access-Control-Allow-Credentials',
        'set-cookie': 'Set-Cookie' },
     _onPendingData: [Function: updateOutgoingData],
     req: [Circular],
     locals: {},
     writeHead: [Function: writeHead],
     end: [Function: end],
     _startAt: undefined,
     _startTime: undefined,
     __onFinished: { [Function: listener] queue: [Object] } },
  _parsedOriginalUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  sessionStore: 
   MongoStore {
     domain: null,
     _events: 
      { disconnect: [Function: ondisconnect],
        connect: [Function: onconnect] },
     _eventsCount: 2,
     _maxListeners: undefined,
     ttl: 1209600,
     collectionName: 'sessions',
     autoRemove: 'native',
     autoRemoveInterval: 10,
     transformFunctions: 
      { serialize: [Function: stringify],
        unserialize: [Function: parse] },
     options: { mongooseConnection: [Object], clear_interval: 86400 },
     state: 'connected',
     generate: [Function],
     db: 
      Db {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        s: [Object],
        serverConfig: [Getter],
        bufferMaxEntries: [Getter],
        databaseName: [Getter] },
     collectionReadyPromise: Promise { [Object] },
     collection: Collection { s: [Object] } },
  sessionID: 'R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL',
  session: 
   Session {
     cookie: 
      { path: '/',
        _expires: 2018-02-06T17:31:15.886Z,
        originalMaxAge: 86399999,
        httpOnly: true },
     passport: { user: 'xchen@contracosta.courts.ca.gov' } },
  secret: undefined,
  cookies: 
   { 'connect.sid': 's:R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw++TohQY8/YlSxxXW1AgPhmysT1xLoD7PEkUE',
     'passport-aad.1517851875885.fbd08e9a6335a4c3df307cd18241271171ff249c0bc3c7224fa61cfe8f89f1db0effc24d48cc5e481c334e3c76d761c8e041c58c50e3bb46757e320311401022b2b0511115c8ccbedc5cf65851b66aacbfdb640f76a6a799e5c309c03309fd044d6a3b8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.ccf77aed1edb11f3d6a857a65b91675e': '0' },
  signedCookies: {},
  body: 
   { code: 'AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzpznQlcydI-xhfpE9E_30V8ddE35ViTjERh8CMeaDKLl_yeY6E_-Cpe6-WhIqBlMRstlY7swM8MNUdf1qZT6Gs28s0h7eJHjv2PqIi34PlB0tEo0Z2STEkSeMnEyHsa3HD8D4cM6puoOf6gdOlEOf0v2bTtHn5sYLWW1Y92BXTF1GhQT4nW_Hh3H4tS0AoB8Y91qrcD1EyDJ0kEYmG6d58AjW5_bxdykhWjN_yC1R85UYkRAGD6YJjyDac-Y_SU4768VvLB1ssscKRRrFI9iaK7bFgVa_VBm9uBXAMgWry8aD54whT5Lw3qHYN2JcNHkJ6FZWnHHfzqcoF8aOy0Kx9Ofj1Z6BBzuuej_G97g4pNNn501ZFspwLeAfcjlB7fcxlGdFeESpPikhxuGyGnfvkktukPadjovsao9dy-qj6hAqZttjzQZikIoPcGKhva5uZQnXWwuDmrqxI8InJw-KWB2DxtKwb-VgQKC7OirHWQfNAQ1iR6x4eWvr-tQCrPbC4ET0xM8_nQFXSjP8EkKL7vTftJh76xTgXDDZuxCk8SAeX4xNZKQ8L491D975EqauzZJIlfCS3sLn5jVBctAl6nNrroW-zn5924vHF14xk-0gAA',
     id_token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUxNTc0LCJuYmYiOjE1MTc4NTE1NzQsImV4cCI6MTUxNzg1NTQ3NCwiYWlvIjoiQVNRQTIvOEdBQUFBMHc0dlZUQzBTWmxZaEZkL1h1UHZYVnllYnNYeElyaisvcXJKUWFJOTVXQT0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6IlJIZUdXcmQ5NFVwYW15UXFhWHpXZmciLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoibmc0amFEN2hrUVFTVW9NdEtCcHFpVllHenVhTm00d0ciLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6Ii0xM0l3X2JMamtDQjZwcWtCVGdYQUEiLCJ2ZXIiOiIxLjAifQ.YogLBZnZMdmPCHWsz_ncIaGhjFGOC_pmfLMkb0Sdoe4hhdm_wCCTlgV-DwIrpxBLsgpV2YreeVABPCyvXuM_PB_2CQIHpridf0Z89AImVQs26i_KlV10E8uXXvOZKsyiK5jkFSjYccHa123xEXZQogcVLxQxrEk980i3E7Vi4erSe51G8n6jl3ZaUOZTeWCirFDwqORP7FjpWEeM3ltyDx3Wrm9kVNSmln2mF56CqS6PNIL_n-R6ledvLrf0PHU5Up1IBPZORLn0koF6DezK5-Eq16gwO_aK21uLtncenDUk8gp73aT-3o0lP22xel3tWiRPLSTXFqF9Q55unJcpSw',
     state: 'my_state',
     session_state: 'a4eab50d-afe3-40e1-92b7-517677a51945' },
  _body: true,
  length: undefined,
  read: [Function],
  _startAt: [ 731786, 37201471 ],
  _startTime: 2018-02-05T17:31:16.378Z,
  _remoteAddress: '::1',
  _passport: 
   { instance: 
      Authenticator {
        _key: 'passport',
        _strategies: [Object],
        _serializers: [Object],
        _deserializers: [Object],
        _infoTransformers: [],
        _framework: [Object],
        _userProperty: 'user',
        Authenticator: [Function: Authenticator],
        Passport: [Function: Authenticator],
        Strategy: [Object],
        strategies: [Object] },
     session: { user: 'xchen@contracosta.courts.ca.gov' } },
  user: 
   { _id: 5a737e49e440d2445c40b21c,
     updatedAt: 2018-02-01T20:53:29.268Z,
     createdAt: 2018-02-01T20:53:29.268Z,
     authType: 'azure',
     email: 'xchen@contracosta.courts.ca.gov',
     __v: 0,
     role: 'Member',
     cases: [],
     profile: { firstName: 'Xi', lastName: 'Chen' } },
  route: 
   Route {
     path: '/api/auth/openid/return',
     stack: [ [Object], [Object] ],
     methods: { post: true } },
  authInfo: {} }
[0mPOST /api/auth/openid/return [31m500 [0m492.491 ms - 3362[0m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `babel-node index.js --presets es2015,stage-2`[39m
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":10868,"level":40,"msg":"Using http for redirectUrl is not recommended, please consider using https","time":"2018-02-05T17:47:59.602Z","v":0}
C:\Users\xichentop\Documents\ContraCostaInternship\mainsite-xc\server
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `babel-node index.js --presets es2015,stage-2`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `babel-node index.js --presets es2015,stage-2`[39m
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":9156,"level":40,"msg":"Using http for redirectUrl is not recommended, please consider using https","time":"2018-02-05T17:48:44.400Z","v":0}
C:\Users\xichentop\Documents\ContraCostaInternship\mainsite-xc\server
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `babel-node index.js --presets es2015,stage-2`[39m
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":24992,"level":40,"msg":"Using http for redirectUrl is not recommended, please consider using https","time":"2018-02-05T17:52:23.404Z","v":0}
C:\Users\xichentop\Documents\ContraCostaInternship\mainsite-xc\server
Connected to DB
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `babel-node index.js --presets es2015,stage-2`[39m
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":40,"msg":"Using http for redirectUrl is not recommended, please consider using https","time":"2018-02-05T17:54:20.368Z","v":0}
C:\Users\xichentop\Documents\ContraCostaInternship\mainsite-xc\server
Connected to DB
deserializing user...
adding header
we are getting a get request
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":30,"msg":"metadataUrl is: https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9","time":"2018-02-05T17:54:27.734Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":30,"msg":"received the following items in params: {\"policy\":null,\"cachekey\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":{\"url\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":null,\"authtype\":\"oidc\"}}","time":"2018-02-05T17:54:27.735Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":2040,"level":30,"msg":"Parsing JSON retreived from the endpoint","time":"2018-02-05T17:54:27.887Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":2040,"level":30,"msg":"Request to update the Open ID Connect Metadata","time":"2018-02-05T17:54:27.888Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":2040,"level":30,"msg":"Algorithm retrieved was:  [ 'RS256' ]","time":"2018-02-05T17:54:27.889Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":2040,"level":30,"msg":"Issuer we are using is:  https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/","time":"2018-02-05T17:54:27.889Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":2040,"level":30,"msg":"Key Endpoint we will use is:  https://login.microsoftonline.com/common/discovery/keys","time":"2018-02-05T17:54:27.890Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":2040,"level":30,"msg":"Authentication endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/authorize","time":"2018-02-05T17:54:27.890Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":2040,"level":30,"msg":"Token endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/token","time":"2018-02-05T17:54:27.890Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":2040,"level":30,"msg":"User info endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/openid/userinfo","time":"2018-02-05T17:54:27.890Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":2040,"level":30,"msg":"The logout endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/logout","time":"2018-02-05T17:54:27.890Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":30,"msg":"entering Strategy.prototype._flowInitializationHandler","time":"2018-02-05T17:54:28.014Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":30,"msg":"We are sending the response_type:  code id_token","time":"2018-02-05T17:54:28.014Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":30,"msg":"We are sending the response_mode:  form_post","time":"2018-02-05T17:54:28.014Z","v":0}
[0mGET /api/auth/azure-login [36m302 [0m381.159 ms - 0[0m
deserializing user...
adding header
we have received a post request:  IncomingMessage {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 16384,
     buffer: BufferList { head: null, tail: null, length: 0 },
     length: 0,
     pipes: null,
     pipesCount: 0,
     flowing: true,
     ended: true,
     endEmitted: true,
     reading: false,
     sync: true,
     needReadable: false,
     emittedReadable: false,
     readableListening: false,
     resumeScheduled: false,
     defaultEncoding: 'utf8',
     ranOut: false,
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: false,
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  socket: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 5455,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 2013,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 489,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 10258,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 14103,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25265 } },
  connection: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 5455,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 2013,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 489,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 10258,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 14103,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25265 } },
  httpVersionMajor: 1,
  httpVersionMinor: 1,
  httpVersion: '1.1',
  complete: true,
  headers: 
   { host: 'localhost:3000',
     connection: 'keep-alive',
     'content-length': '2225',
     'cache-control': 'max-age=0',
     'upgrade-insecure-requests': '1',
     origin: 'null',
     'content-type': 'application/x-www-form-urlencoded',
     'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'accept-encoding': 'gzip, deflate, br',
     'accept-language': 'en-US,en;q=0.9',
     cookie: 'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517853268016.fbd08e9a6335a4c3df307cd182412711448e5ba314aded2b79a21fd7b798d5861ae5f5694986645a35334f2c1aea64fce041c58c50e3bb46757e320311401022b2b0512e5fa8f3e7f200db4577a07f8a89cc7a0906aeb49ee4ee7ed1345f8b112e6e148ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.221ce2bd51d1c0676b5e2bf47f54a6ea=0' },
  rawHeaders: 
   [ 'Host',
     'localhost:3000',
     'Connection',
     'keep-alive',
     'Content-Length',
     '2225',
     'Cache-Control',
     'max-age=0',
     'Upgrade-Insecure-Requests',
     '1',
     'Origin',
     'null',
     'Content-Type',
     'application/x-www-form-urlencoded',
     'User-Agent',
     'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     'Accept',
     'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'Accept-Encoding',
     'gzip, deflate, br',
     'Accept-Language',
     'en-US,en;q=0.9',
     'Cookie',
     'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517853268016.fbd08e9a6335a4c3df307cd182412711448e5ba314aded2b79a21fd7b798d5861ae5f5694986645a35334f2c1aea64fce041c58c50e3bb46757e320311401022b2b0512e5fa8f3e7f200db4577a07f8a89cc7a0906aeb49ee4ee7ed1345f8b112e6e148ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.221ce2bd51d1c0676b5e2bf47f54a6ea=0' ],
  trailers: {},
  rawTrailers: [],
  upgrade: false,
  url: '/api/auth/openid/return',
  method: 'POST',
  statusCode: null,
  statusMessage: null,
  client: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 5455,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 2013,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 489,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 10258,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 14103,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25265 } },
  _consuming: true,
  _dumped: false,
  next: [Function: next],
  baseUrl: '',
  originalUrl: '/api/auth/openid/return',
  _parsedUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  params: {},
  query: {},
  res: 
   ServerResponse {
     domain: null,
     _events: { finish: [Object], end: [Function: onevent] },
     _eventsCount: 2,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: false,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: true,
     useChunkedEncodingByDefault: true,
     sendDate: true,
     _removedHeader: {},
     _contentLength: null,
     _hasBody: true,
     _trailer: '',
     finished: false,
     _headerSent: false,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 2013,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 14103,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 2013,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 14103,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     _header: null,
     _headers: 
      { 'x-powered-by': 'Express',
        'access-control-allow-origin': '*',
        'access-control-allow-methods': 'PUT, GET, POST, DELETE, OPTIONS',
        'access-control-allow-headers': 'Origin, X-Requested-With, Content-Type, Accept, Authorization, Access-Control-Allow-Credentials',
        'access-control-allow-credentials': 'true' },
     _headerNames: 
      { 'x-powered-by': 'X-Powered-By',
        'access-control-allow-origin': 'Access-Control-Allow-Origin',
        'access-control-allow-methods': 'Access-Control-Allow-Methods',
        'access-control-allow-headers': 'Access-Control-Allow-Headers',
        'access-control-allow-credentials': 'Access-Control-Allow-Credentials' },
     _onPendingData: [Function: updateOutgoingData],
     req: [Circular],
     locals: {},
     writeHead: [Function: writeHead],
     end: [Function: end],
     _startAt: undefined,
     _startTime: undefined,
     __onFinished: { [Function: listener] queue: [Object] } },
  _parsedOriginalUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  sessionStore: 
   MongoStore {
     domain: null,
     _events: 
      { disconnect: [Function: ondisconnect],
        connect: [Function: onconnect] },
     _eventsCount: 2,
     _maxListeners: undefined,
     ttl: 1209600,
     collectionName: 'sessions',
     autoRemove: 'native',
     autoRemoveInterval: 10,
     transformFunctions: 
      { serialize: [Function: stringify],
        unserialize: [Function: parse] },
     options: { mongooseConnection: [Object], clear_interval: 86400 },
     state: 'connected',
     generate: [Function],
     db: 
      Db {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        s: [Object],
        serverConfig: [Getter],
        bufferMaxEntries: [Getter],
        databaseName: [Getter] },
     collectionReadyPromise: Promise { [Object] },
     collection: Collection { s: [Object] } },
  sessionID: 'R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL',
  session: 
   Session {
     cookie: 
      { path: '/',
        _expires: 2018-02-06T17:54:28.017Z,
        originalMaxAge: 86399999,
        httpOnly: true },
     passport: { user: 'xchen@contracosta.courts.ca.gov' } },
  secret: undefined,
  cookies: 
   { 'connect.sid': 's:R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw++TohQY8/YlSxxXW1AgPhmysT1xLoD7PEkUE',
     'passport-aad.1517853268016.fbd08e9a6335a4c3df307cd182412711448e5ba314aded2b79a21fd7b798d5861ae5f5694986645a35334f2c1aea64fce041c58c50e3bb46757e320311401022b2b0512e5fa8f3e7f200db4577a07f8a89cc7a0906aeb49ee4ee7ed1345f8b112e6e148ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.221ce2bd51d1c0676b5e2bf47f54a6ea': '0' },
  signedCookies: {},
  body: 
   { code: 'AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzRT39he60NmuuxShT7YAZ9ToI7bAkIE7o-QpWrZvGtBcsSieJ79PUs_iaJDI7gyPFBThfZTjrgnUt6YMugUVElChwW_cFpmtkfi_BrGeZtSdO52455ZdmuC2ATniemlLgLIkLC2TvA5GVqqAkIvfm4ioVryvKogM3VxgLtwX32zxwwgp8GhejOwjp0xRT5xOm3e89hEBOYaO6Lkv1T0dRPc3ibMbVatSCwO95PcBgQmRe0_ucBDf9LgEutksGExyUSHQC3rVy_aaiA6iQ5oXtXx0AvVIVQHdA8f0PxdrKxWhl512ifZC_bJuG5l-wicJgwinGbX0tmYzn0JkSL_xSKzSuSEzSVmYWCw9rnJs21nC3N8csPylKnZMQnFM_m6ml4OpeCmaltREIzs4OlokEchbqExbjQbBW64SqmUMR5l4K_JbCquRWS8gDlE95U4jYQ4uoJIJ3tvt2soY3LN6VKxDYMkpq5hhV_uKYU7jWeOseK9DPJjeiKFAEOTLoJHnojaK3WNwRZ-DLqRaTPaUNXyy_Qa4JF1InKbwpVlwhDyVytgQnbqoULG-4SlwqqVwIR9saJrLfsnN6tbb11Rmf2HkcxItWQma_Puy02LQ9CjAgAA',
     id_token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUyOTY2LCJuYmYiOjE1MTc4NTI5NjYsImV4cCI6MTUxNzg1Njg2NiwiYWlvIjoiWTJOZ1lHQzFVSmE5eWMxbzhpSysvSWpodjhyd1NybGxpNTB2dlh1dGJEemZPNkZIVnhvQSIsImFtciI6WyJwd2QiXSwiY19oYXNoIjoibjdkeUtOUk5XUjZVTTJzVldCRVV2ZyIsImZhbWlseV9uYW1lIjoiQ2hlbiIsImdpdmVuX25hbWUiOiJYaSIsImlwYWRkciI6IjczLjQxLjgzLjIyOCIsIm5hbWUiOiJYaSBDaGVuIiwibm9uY2UiOiJRLVRVOGprRXZ3R0ZzWVpqTTJ4Ym5XdDBrcjc4eFdzaCIsIm9pZCI6IjlmNTU0ZmYyLWQ0NTUtNDkxMi1iYzE3LWZiOTBhYjY3NzI2NiIsIm9ucHJlbV9zaWQiOiJTLTEtNS0yMS00OTc0MDQ4NTUtNTk3NjM1OTkyLTk4ODg4MjU3Ni0xNDI4MCIsInN1YiI6InpGZHFRZXlWLV9aTmVNNzdmZHlOc0c4Vzk0ejJ3OVpTdlU2ZjlqTmIxejgiLCJ0aWQiOiI4Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYiLCJ1bmlxdWVfbmFtZSI6IlhDaGVuQGNvbnRyYWNvc3RhLmNvdXJ0cy5jYS5nb3YiLCJ1cG4iOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXRpIjoiVDJGX2NTaVo2ME90OGQ0WGJIb1hBQSIsInZlciI6IjEuMCJ9.IwrtKa4JLExme2LWL3K0tikakw2h-whtqMn6XYk5T8yFxkH65dD11D5p4HGZKPB84uZknu7vionixrzCj21xC22Q0jMnO0qRFW4KZDq_B33wqNTNWnwoxYHuDKI93tyZZ3aoyHrgUHh3KQYlCOV4ArUkkGpWgKszNvDA6gRU5CgsYyjlYzzq3itjUJ-6P05u6CORIBgBpLC3h5tjkMS12myznFYvS4ECUmwqqI2ZPM9YpUh5LUOeB_omGQs-MikYJNvgBiQOfk2ZMZ2xpjX93zk8he66jTDakH8Y_14riLscDA-wmuSHG-dMWMcZIVK4Mz_ruuRuiU1tHL2CJMFnwg',
     state: 'CUSTOMZ0MWk_P_pAWJVvq7fVUIc2WxJ7cATrtEmy_state',
     session_state: 'a4eab50d-afe3-40e1-92b7-517677a51945' },
  _body: true,
  length: undefined,
  read: [Function],
  _startAt: [ 733178, 125727272 ],
  _startTime: 2018-02-05T17:54:28.465Z,
  _remoteAddress: '::1',
  _passport: 
   { instance: 
      Authenticator {
        _key: 'passport',
        _strategies: [Object],
        _serializers: [Object],
        _deserializers: [Object],
        _infoTransformers: [],
        _framework: [Object],
        _userProperty: 'user',
        Authenticator: [Function: Authenticator],
        Passport: [Function: Authenticator],
        Strategy: [Object],
        strategies: [Object] },
     session: { user: 'xchen@contracosta.courts.ca.gov' } },
  user: 
   { _id: 5a737e49e440d2445c40b21c,
     updatedAt: 2018-02-01T20:53:29.268Z,
     createdAt: 2018-02-01T20:53:29.268Z,
     authType: 'azure',
     email: 'xchen@contracosta.courts.ca.gov',
     __v: 0,
     role: 'Member',
     cases: [],
     profile: { firstName: 'Xi', lastName: 'Chen' } },
  route: 
   Route {
     path: '/api/auth/openid/return',
     stack: [ [Object], [Object] ],
     methods: { post: true } } }
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":30,"msg":"metadataUrl is: https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9","time":"2018-02-05T17:54:28.587Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":30,"msg":"received the following items in params: {\"id_token\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUyOTY2LCJuYmYiOjE1MTc4NTI5NjYsImV4cCI6MTUxNzg1Njg2NiwiYWlvIjoiWTJOZ1lHQzFVSmE5eWMxbzhpSysvSWpodjhyd1NybGxpNTB2dlh1dGJEemZPNkZIVnhvQSIsImFtciI6WyJwd2QiXSwiY19oYXNoIjoibjdkeUtOUk5XUjZVTTJzVldCRVV2ZyIsImZhbWlseV9uYW1lIjoiQ2hlbiIsImdpdmVuX25hbWUiOiJYaSIsImlwYWRkciI6IjczLjQxLjgzLjIyOCIsIm5hbWUiOiJYaSBDaGVuIiwibm9uY2UiOiJRLVRVOGprRXZ3R0ZzWVpqTTJ4Ym5XdDBrcjc4eFdzaCIsIm9pZCI6IjlmNTU0ZmYyLWQ0NTUtNDkxMi1iYzE3LWZiOTBhYjY3NzI2NiIsIm9ucHJlbV9zaWQiOiJTLTEtNS0yMS00OTc0MDQ4NTUtNTk3NjM1OTkyLTk4ODg4MjU3Ni0xNDI4MCIsInN1YiI6InpGZHFRZXlWLV9aTmVNNzdmZHlOc0c4Vzk0ejJ3OVpTdlU2ZjlqTmIxejgiLCJ0aWQiOiI4Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYiLCJ1bmlxdWVfbmFtZSI6IlhDaGVuQGNvbnRyYWNvc3RhLmNvdXJ0cy5jYS5nb3YiLCJ1cG4iOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXRpIjoiVDJGX2NTaVo2ME90OGQ0WGJIb1hBQSIsInZlciI6IjEuMCJ9.IwrtKa4JLExme2LWL3K0tikakw2h-whtqMn6XYk5T8yFxkH65dD11D5p4HGZKPB84uZknu7vionixrzCj21xC22Q0jMnO0qRFW4KZDq_B33wqNTNWnwoxYHuDKI93tyZZ3aoyHrgUHh3KQYlCOV4ArUkkGpWgKszNvDA6gRU5CgsYyjlYzzq3itjUJ-6P05u6CORIBgBpLC3h5tjkMS12myznFYvS4ECUmwqqI2ZPM9YpUh5LUOeB_omGQs-MikYJNvgBiQOfk2ZMZ2xpjX93zk8he66jTDakH8Y_14riLscDA-wmuSHG-dMWMcZIVK4Mz_ruuRuiU1tHL2CJMFnwg\",\"code\":\"AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzRT39he60NmuuxShT7YAZ9ToI7bAkIE7o-QpWrZvGtBcsSieJ79PUs_iaJDI7gyPFBThfZTjrgnUt6YMugUVElChwW_cFpmtkfi_BrGeZtSdO52455ZdmuC2ATniemlLgLIkLC2TvA5GVqqAkIvfm4ioVryvKogM3VxgLtwX32zxwwgp8GhejOwjp0xRT5xOm3e89hEBOYaO6Lkv1T0dRPc3ibMbVatSCwO95PcBgQmRe0_ucBDf9LgEutksGExyUSHQC3rVy_aaiA6iQ5oXtXx0AvVIVQHdA8f0PxdrKxWhl512ifZC_bJuG5l-wicJgwinGbX0tmYzn0JkSL_xSKzSuSEzSVmYWCw9rnJs21nC3N8csPylKnZMQnFM_m6ml4OpeCmaltREIzs4OlokEchbqExbjQbBW64SqmUMR5l4K_JbCquRWS8gDlE95U4jYQ4uoJIJ3tvt2soY3LN6VKxDYMkpq5hhV_uKYU7jWeOseK9DPJjeiKFAEOTLoJHnojaK3WNwRZ-DLqRaTPaUNXyy_Qa4JF1InKbwpVlwhDyVytgQnbqoULG-4SlwqqVwIR9saJrLfsnN6tbb11Rmf2HkcxItWQma_Puy02LQ9CjAgAA\",\"state\":\"CUSTOMZ0MWk_P_pAWJVvq7fVUIc2WxJ7cATrtEmy_state\",\"nonce\":\"Q-TU8jkEvwGFsYZjM2xbnWt0kr78xWsh\",\"resource\":\"https://graph.windows.net\",\"cachekey\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":{\"url\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":null,\"authtype\":\"oidc\"}}","time":"2018-02-05T17:54:28.587Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":30,"msg":"entering Strategy.prototype._hybridFlowHandler, received code: AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzRT39he60NmuuxShT7YAZ9ToI7bAkIE7o-QpWrZvGtBcsSieJ79PUs_iaJDI7gyPFBThfZTjrgnUt6YMugUVElChwW_cFpmtkfi_BrGeZtSdO52455ZdmuC2ATniemlLgLIkLC2TvA5GVqqAkIvfm4ioVryvKogM3VxgLtwX32zxwwgp8GhejOwjp0xRT5xOm3e89hEBOYaO6Lkv1T0dRPc3ibMbVatSCwO95PcBgQmRe0_ucBDf9LgEutksGExyUSHQC3rVy_aaiA6iQ5oXtXx0AvVIVQHdA8f0PxdrKxWhl512ifZC_bJuG5l-wicJgwinGbX0tmYzn0JkSL_xSKzSuSEzSVmYWCw9rnJs21nC3N8csPylKnZMQnFM_m6ml4OpeCmaltREIzs4OlokEchbqExbjQbBW64SqmUMR5l4K_JbCquRWS8gDlE95U4jYQ4uoJIJ3tvt2soY3LN6VKxDYMkpq5hhV_uKYU7jWeOseK9DPJjeiKFAEOTLoJHnojaK3WNwRZ-DLqRaTPaUNXyy_Qa4JF1InKbwpVlwhDyVytgQnbqoULG-4SlwqqVwIR9saJrLfsnN6tbb11Rmf2HkcxItWQma_Puy02LQ9CjAgAA, received id_token: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUyOTY2LCJuYmYiOjE1MTc4NTI5NjYsImV4cCI6MTUxNzg1Njg2NiwiYWlvIjoiWTJOZ1lHQzFVSmE5eWMxbzhpSysvSWpodjhyd1NybGxpNTB2dlh1dGJEemZPNkZIVnhvQSIsImFtciI6WyJwd2QiXSwiY19oYXNoIjoibjdkeUtOUk5XUjZVTTJzVldCRVV2ZyIsImZhbWlseV9uYW1lIjoiQ2hlbiIsImdpdmVuX25hbWUiOiJYaSIsImlwYWRkciI6IjczLjQxLjgzLjIyOCIsIm5hbWUiOiJYaSBDaGVuIiwibm9uY2UiOiJRLVRVOGprRXZ3R0ZzWVpqTTJ4Ym5XdDBrcjc4eFdzaCIsIm9pZCI6IjlmNTU0ZmYyLWQ0NTUtNDkxMi1iYzE3LWZiOTBhYjY3NzI2NiIsIm9ucHJlbV9zaWQiOiJTLTEtNS0yMS00OTc0MDQ4NTUtNTk3NjM1OTkyLTk4ODg4MjU3Ni0xNDI4MCIsInN1YiI6InpGZHFRZXlWLV9aTmVNNzdmZHlOc0c4Vzk0ejJ3OVpTdlU2ZjlqTmIxejgiLCJ0aWQiOiI4Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYiLCJ1bmlxdWVfbmFtZSI6IlhDaGVuQGNvbnRyYWNvc3RhLmNvdXJ0cy5jYS5nb3YiLCJ1cG4iOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXRpIjoiVDJGX2NTaVo2ME90OGQ0WGJIb1hBQSIsInZlciI6IjEuMCJ9.IwrtKa4JLExme2LWL3K0tikakw2h-whtqMn6XYk5T8yFxkH65dD11D5p4HGZKPB84uZknu7vionixrzCj21xC22Q0jMnO0qRFW4KZDq_B33wqNTNWnwoxYHuDKI93tyZZ3aoyHrgUHh3KQYlCOV4ArUkkGpWgKszNvDA6gRU5CgsYyjlYzzq3itjUJ-6P05u6CORIBgBpLC3h5tjkMS12myznFYvS4ECUmwqqI2ZPM9YpUh5LUOeB_omGQs-MikYJNvgBiQOfk2ZMZ2xpjX93zk8he66jTDakH8Y_14riLscDA-wmuSHG-dMWMcZIVK4Mz_ruuRuiU1tHL2CJMFnwg","time":"2018-02-05T17:54:28.587Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":30,"msg":"token decoded:  { header: \n   { typ: 'JWT',\n     alg: 'RS256',\n     x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n     kid: 'z44wMdHu8wKsumrbfaK98qxs5YI' },\n  payload: \n   { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n     iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n     iat: 1517852966,\n     nbf: 1517852966,\n     exp: 1517856866,\n     aio: 'Y2NgYGC1UJa9yc1o8iK+/Ijhv8rwSrlli50vvXutbDzfO6FHVxoA',\n     amr: [ 'pwd' ],\n     c_hash: 'n7dyKNRNWR6UM2sVWBEUvg',\n     family_name: 'Chen',\n     given_name: 'Xi',\n     ipaddr: '73.41.83.228',\n     name: 'Xi Chen',\n     nonce: 'Q-TU8jkEvwGFsYZjM2xbnWt0kr78xWsh',\n     oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n     onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n     sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n     tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n     unique_name: 'XChen@contracosta.courts.ca.gov',\n     upn: 'XChen@contracosta.courts.ca.gov',\n     uti: 'T2F_cSiZ60Ot8d4XbHoXAA',\n     ver: '1.0' },\n  signature: 'IwrtKa4JLExme2LWL3K0tikakw2h-whtqMn6XYk5T8yFxkH65dD11D5p4HGZKPB84uZknu7vionixrzCj21xC22Q0jMnO0qRFW4KZDq_B33wqNTNWnwoxYHuDKI93tyZZ3aoyHrgUHh3KQYlCOV4ArUkkGpWgKszNvDA6gRU5CgsYyjlYzzq3itjUJ-6P05u6CORIBgBpLC3h5tjkMS12myznFYvS4ECUmwqqI2ZPM9YpUh5LUOeB_omGQs-MikYJNvgBiQOfk2ZMZ2xpjX93zk8he66jTDakH8Y_14riLscDA-wmuSHG-dMWMcZIVK4Mz_ruuRuiU1tHL2CJMFnwg' }","time":"2018-02-05T17:54:28.589Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":2040,"level":30,"msg":"working on key: { kty: 'RSA',\n  use: 'sig',\n  kid: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  n: 'p3HhMQsqmgSjeiDsZ1ay-UAFgFMdBYgGGkGa2L0ew6_q3b2x9Ccdru_amVp1HXV2FVwbpK0HYsTSRvWIiCRRT-AgMSIlap7qlg8-iYvdFIJsorf84-sRN9Iq3F1pKD-W9vqsitcEbzljHCLSS2vUKSb7itwjc_AKjky3cX5ndMupQESZNTbiwanM9dAJ7K87pURXN66lS_q9u7wxWvjc3iLEp25PU_06moGDMe5BWuD6Rb_pdFM1plm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wSbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0Q',\n  e: 'AQAB',\n  x5c: [ 'MIIDBTCCAe2gAwIBAgIQaD0+a2FNl5JMaE2/7KUP5zANBgkqhkiG9w0BAQsFADAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MB4XDTE3MTEyODAwMDAwMFoXDTE5MTEyOTAwMDAwMFowLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKdx4TELKpoEo3og7GdWsvlABYBTHQWIBhpBmti9HsOv6t29sfQnHa7v2pladR11dhVcG6StB2LE0kb1iIgkUU/gIDEiJWqe6pYPPomL3RSCbKK3/OPrETfSKtxdaSg/lvb6rIrXBG85Yxwi0ktr1Ckm+4rcI3PwCo5Mt3F+Z3TLqUBEmTU24sGpzPXQCeyvO6VEVzeupUv6vbu8MVr43N4ixKduT1P9OpqBgzHuQVrg+kW/6XRTNaZZthTlITG8VEa8I02S2Q4VyosdzcrMQmRp75MTA2YKdqTexTKmWKaXFIcGCbvMEm35sIfIVziQ8YMSEC+7GBoh3k2g2BFRgtECAwEAAaMhMB8wHQYDVR0OBBYEFGpho/kx4FeBzTTBIbYVWfFdGIblMA0GCSqGSIb3DQEBCwUAA4IBAQBgaeYvuV4sYJZNPXbxN6FIc0oA4bCg1+DFalT3qzW0bFbl7pXP5YPY/adZlT8+cTznjMgzPPvcXaQdcytR16YqHJVX0ik67NrrQ3g0TtGLc42SuzE+6awryiLQY0Zd799bJwrRcDZUqm/6jKOEOd+utf+3o+VU57w+n7iQLuSL1mKYGMsyzMYCj6xVtYl75iam86leT0/tlXHJ8oqxU5w3xVY6P7v0Sz2UteQNQvhKi6R1/cjfiJUp+OzHpaEor6ls7HSvojY2zm1DIaH6EBp2L9TBFt8IALAEN5hX6XYpKmCHRUlzYwoWo7YwzKiot0XdbDW+zPKGPKtIlbg6cw/+' ] }","time":"2018-02-05T17:54:28.590Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":30,"msg":"PEMkey generated: -----BEGIN RSA PUBLIC KEY-----\nMIIBCgKCAQEAp3HhMQsqmgSjeiDsZ1ay+UAFgFMdBYgGGkGa2L0ew6/q3b2x9Ccd\nru/amVp1HXV2FVwbpK0HYsTSRvWIiCRRT+AgMSIlap7qlg8+iYvdFIJsorf84+sR\nN9Iq3F1pKD+W9vqsitcEbzljHCLSS2vUKSb7itwjc/AKjky3cX5ndMupQESZNTbi\nwanM9dAJ7K87pURXN66lS/q9u7wxWvjc3iLEp25PU/06moGDMe5BWuD6Rb/pdFM1\nplm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wS\nbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0QIDAQAB\n-----END RSA PUBLIC KEY-----\n","time":"2018-02-05T17:54:28.590Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":30,"msg":"Claims received:  { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n  iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n  iat: 1517852966,\n  nbf: 1517852966,\n  exp: 1517856866,\n  aio: 'Y2NgYGC1UJa9yc1o8iK+/Ijhv8rwSrlli50vvXutbDzfO6FHVxoA',\n  amr: [ 'pwd' ],\n  c_hash: 'n7dyKNRNWR6UM2sVWBEUvg',\n  family_name: 'Chen',\n  given_name: 'Xi',\n  ipaddr: '73.41.83.228',\n  name: 'Xi Chen',\n  nonce: 'Q-TU8jkEvwGFsYZjM2xbnWt0kr78xWsh',\n  oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n  onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n  sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n  tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n  unique_name: 'XChen@contracosta.courts.ca.gov',\n  upn: 'XChen@contracosta.courts.ca.gov',\n  uti: 'T2F_cSiZ60Ot8d4XbHoXAA',\n  ver: '1.0' }","time":"2018-02-05T17:54:28.594Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":30,"msg":"entering Strategy.prototype._authCodeFlowHandler, received code: AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzRT39he60NmuuxShT7YAZ9ToI7bAkIE7o-QpWrZvGtBcsSieJ79PUs_iaJDI7gyPFBThfZTjrgnUt6YMugUVElChwW_cFpmtkfi_BrGeZtSdO52455ZdmuC2ATniemlLgLIkLC2TvA5GVqqAkIvfm4ioVryvKogM3VxgLtwX32zxwwgp8GhejOwjp0xRT5xOm3e89hEBOYaO6Lkv1T0dRPc3ibMbVatSCwO95PcBgQmRe0_ucBDf9LgEutksGExyUSHQC3rVy_aaiA6iQ5oXtXx0AvVIVQHdA8f0PxdrKxWhl512ifZC_bJuG5l-wicJgwinGbX0tmYzn0JkSL_xSKzSuSEzSVmYWCw9rnJs21nC3N8csPylKnZMQnFM_m6ml4OpeCmaltREIzs4OlokEchbqExbjQbBW64SqmUMR5l4K_JbCquRWS8gDlE95U4jYQ4uoJIJ3tvt2soY3LN6VKxDYMkpq5hhV_uKYU7jWeOseK9DPJjeiKFAEOTLoJHnojaK3WNwRZ-DLqRaTPaUNXyy_Qa4JF1InKbwpVlwhDyVytgQnbqoULG-4SlwqqVwIR9saJrLfsnN6tbb11Rmf2HkcxItWQma_Puy02LQ9CjAgAA","time":"2018-02-05T17:54:28.595Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":30,"msg":"In _getAccessTokenBySecretOrAssertion: we are using client secret","time":"2018-02-05T17:54:28.595Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":30,"msg":"received id_token:  eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUyOTY3LCJuYmYiOjE1MTc4NTI5NjcsImV4cCI6MTUxNzg1Njg2NywiYWlvIjoiWTJOZ1lGRE4yU2FsMUNuM3VtWHVpaVZsRld1Q1p0aFZGcVJkNXQzNDJENnBUakhNOVNNQSIsImFtciI6WyJwd2QiXSwiZmFtaWx5X25hbWUiOiJDaGVuIiwiZ2l2ZW5fbmFtZSI6IlhpIiwiaXBhZGRyIjoiNzMuNDEuODMuMjI4IiwibmFtZSI6IlhpIENoZW4iLCJub25jZSI6IlEtVFU4amtFdndHRnNZWmpNMnhibld0MGtyNzh4V3NoIiwib2lkIjoiOWY1NTRmZjItZDQ1NS00OTEyLWJjMTctZmI5MGFiNjc3MjY2Iiwib25wcmVtX3NpZCI6IlMtMS01LTIxLTQ5NzQwNDg1NS01OTc2MzU5OTItOTg4ODgyNTc2LTE0MjgwIiwic3ViIjoiekZkcVFleVYtX1pOZU03N2ZkeU5zRzhXOTR6Mnc5WlN2VTZmOWpOYjF6OCIsInRpZCI6IjhjYTlkOGYxLWQ5NzYtNDQ0NS1hM2NjLTNmZmMzZTI5YTNmZiIsInVuaXF1ZV9uYW1lIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInVwbiI6IlhDaGVuQGNvbnRyYWNvc3RhLmNvdXJ0cy5jYS5nb3YiLCJ1dGkiOiJvZG9HS28tWXFFQ3ZxekphYURVWEFBIiwidmVyIjoiMS4wIn0.PXW32xTD-iovAsX6xYFLVHZl_cyZwCqUpVXqJEMQ72Uh8Y_YtQU3Sx6qIkRtQDq8csh1b6yRg_h5w63P6mLk7VeV8pcFVdNTUY92rL4vz7bWL7_6Ico3L4lL6ONtf7dxv9PMFureCMBJZfo44Wc8N2CSkPNEeFuo4TThOE8vf4qfuNM1B27p_29tbKSjNEzUPAqD44VQADFs2qCZFFpB7Ni5pvkNzqoJXQXQ8ltKrN0asYHMC93r2PSNhAQyyOwEgym8mXEcLGu8rokl1p4uzrJwiZsVrjPSWthFmL345hnxhzzu_6SXAD1sk0L0-hhJSMdxJnokQ3IenlIHcv6i4w","time":"2018-02-05T17:54:28.845Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":30,"msg":"received access_token:  eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiJodHRwczovL2dyYXBoLndpbmRvd3MubmV0IiwiaXNzIjoiaHR0cHM6Ly9zdHMud2luZG93cy5uZXQvOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmLyIsImlhdCI6MTUxNzg1Mjk2NywibmJmIjoxNTE3ODUyOTY3LCJleHAiOjE1MTc4NTY4NjcsImFjciI6IjEiLCJhaW8iOiJZMk5nWUdqVlRLZ1FXdGNyc09xNXd0UTdhc3Z1Tis3aHl1NVdXblZQb3RweFIvU0RGaWtBIiwiYW1yIjpbInB3ZCJdLCJhcHBpZCI6IjJmNmZlYTEyLWUzYzEtNDdkNS1hZTcyLTUyODVjNmVlY2VmMSIsImFwcGlkYWNyIjoiMSIsImZhbWlseV9uYW1lIjoiQ2hlbiIsImdpdmVuX25hbWUiOiJYaSIsImlwYWRkciI6IjczLjQxLjgzLjIyOCIsIm5hbWUiOiJYaSBDaGVuIiwib2lkIjoiOWY1NTRmZjItZDQ1NS00OTEyLWJjMTctZmI5MGFiNjc3MjY2Iiwib25wcmVtX3NpZCI6IlMtMS01LTIxLTQ5NzQwNDg1NS01OTc2MzU5OTItOTg4ODgyNTc2LTE0MjgwIiwicHVpZCI6IjEwMDMzRkZGQTI2RUM5MEMiLCJzY3AiOiJNYWlsLlJlYWQgb2ZmbGluZV9hY2Nlc3Mgb3BlbmlkIHByb2ZpbGUgVXNlci5SZWFkIiwic3ViIjoiNUxlaUFtMk40NDkxYXYtR21MT19XTzVBVWZHTG42Z1Z2OUR1TmhLazBTdyIsInRlbmFudF9yZWdpb25fc2NvcGUiOiJOQSIsInRpZCI6IjhjYTlkOGYxLWQ5NzYtNDQ0NS1hM2NjLTNmZmMzZTI5YTNmZiIsInVuaXF1ZV9uYW1lIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInVwbiI6IlhDaGVuQGNvbnRyYWNvc3RhLmNvdXJ0cy5jYS5nb3YiLCJ1dGkiOiJvZG9HS28tWXFFQ3ZxekphYURVWEFBIiwidmVyIjoiMS4wIn0.mzvHMMRU18lrDZD3KoLWCjvPu0KiDjZTAYIOCIBQLdyiL-qWObD_xXRNwNhD2QgJ8f2lCWd354Snb-HLlfMkJBDwAxM8tknVuLiJHlk74JmRjJlR7czWdWIUsc9TAQtYBXgXLtkSJsBDmHJIehH_uMKAoNcW6066-xG4TZmZHfghqUY1Ua8ID1eL2biI1P78gkKUBdCHG_dBCmHyVc9griGaB34nhmCosyJjEBJ05o0Dpd-yRkK-j--ctM0XE1aqz6sKJDVl8GC1sbY9zJPKdtOcSXnEO7RvoChe7UM8jP6xpo-7-TtpRDRKwweBj-U3asnHDRW0zqZxHyOx5rQWFQ","time":"2018-02-05T17:54:28.845Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":30,"msg":"received refresh_token:  AQABAAAAAABHh4kmS_aKT5XrjzxRAtHz9XqZWGw43GIJDudXPnGeObJaoVsvNyNJpLoqOdwWPCNWwqSaySc9UsIs8aJc2x4-mRK_vuroz7ghwCPElQV_AdoODBpueziEZfUsHNw96r4FSg-thENRTEFU_AjnoFuMHIGb3JkEjLlpTt8UST7vaISaaaMvwxLqCINbtA1M6IGVou40skH8n6w2RaJXtZ8TiStHK_T9oXH_3j-oz-FVYTOORhL_a1Nhw4EXLybVW_se1p32R4RgD7OwPMmWiWqokm7FOncMOy2ERgdecjVlpW_v5022QLsWu2y8NA78Ectis-RPp4WgWVvL4qC_h_k_6RNVJsZiQ_HB5CuDYjdmFCCNhYBvVI_obvbcQ6HcUYsY1qnRnL3xWTkGX0gv6vo3kcQwY2byriHl4h5u5EjNJJhZB5q3DyFFNNhShMFTyCyZclClX_L8zTSnSxwUuXO8B2ZV7JQ3DduXbP7oltcRppBpDWy9sfCKmKJBGbT1MY2rnPFRXGk6LeDiHoOUt37kNo3hA6Gocje-L1TgzTKxqSOse177EgWKiAsZ3uuBDrBM-Vhfsg7nQtm6-_jmAVJsjdlsaHMs6dmCB5tYohsQpeINiShE60ZnoruE8jA9OpB4tXyzdrsqy4uRaECpbZArGKqkclFaVIrKj5JjLOnEwZ0F7_uhWlyfmKvA-DsCGmW0HUTgEOFrJ5VLlcg9XC3Htw257OckN4zM7ajn21oz8FuY1xO0wkYGv0kY_BTQZiiQFlQNDW6rRLIGj6YyKbf-olChlFkfT4pRzvKF6NLqHQB17sLPOVFxEUW0cqp-WgTMTcSckXRf3lEPzxgi-3RoIAA","time":"2018-02-05T17:54:28.845Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":30,"msg":"token decoded:  { header: \n   { typ: 'JWT',\n     alg: 'RS256',\n     x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n     kid: 'z44wMdHu8wKsumrbfaK98qxs5YI' },\n  payload: \n   { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n     iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n     iat: 1517852967,\n     nbf: 1517852967,\n     exp: 1517856867,\n     aio: 'Y2NgYFDN2Sal1Cn3umXuiiVlFWuCZthVFqRd5t342D6pTjHM9SMA',\n     amr: [ 'pwd' ],\n     family_name: 'Chen',\n     given_name: 'Xi',\n     ipaddr: '73.41.83.228',\n     name: 'Xi Chen',\n     nonce: 'Q-TU8jkEvwGFsYZjM2xbnWt0kr78xWsh',\n     oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n     onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n     sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n     tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n     unique_name: 'XChen@contracosta.courts.ca.gov',\n     upn: 'XChen@contracosta.courts.ca.gov',\n     uti: 'odoGKo-YqECvqzJaaDUXAA',\n     ver: '1.0' },\n  signature: 'PXW32xTD-iovAsX6xYFLVHZl_cyZwCqUpVXqJEMQ72Uh8Y_YtQU3Sx6qIkRtQDq8csh1b6yRg_h5w63P6mLk7VeV8pcFVdNTUY92rL4vz7bWL7_6Ico3L4lL6ONtf7dxv9PMFureCMBJZfo44Wc8N2CSkPNEeFuo4TThOE8vf4qfuNM1B27p_29tbKSjNEzUPAqD44VQADFs2qCZFFpB7Ni5pvkNzqoJXQXQ8ltKrN0asYHMC93r2PSNhAQyyOwEgym8mXEcLGu8rokl1p4uzrJwiZsVrjPSWthFmL345hnxhzzu_6SXAD1sk0L0-hhJSMdxJnokQ3IenlIHcv6i4w' }","time":"2018-02-05T17:54:28.845Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":2040,"level":30,"msg":"working on key: { kty: 'RSA',\n  use: 'sig',\n  kid: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  n: 'p3HhMQsqmgSjeiDsZ1ay-UAFgFMdBYgGGkGa2L0ew6_q3b2x9Ccdru_amVp1HXV2FVwbpK0HYsTSRvWIiCRRT-AgMSIlap7qlg8-iYvdFIJsorf84-sRN9Iq3F1pKD-W9vqsitcEbzljHCLSS2vUKSb7itwjc_AKjky3cX5ndMupQESZNTbiwanM9dAJ7K87pURXN66lS_q9u7wxWvjc3iLEp25PU_06moGDMe5BWuD6Rb_pdFM1plm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wSbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0Q',\n  e: 'AQAB',\n  x5c: [ 'MIIDBTCCAe2gAwIBAgIQaD0+a2FNl5JMaE2/7KUP5zANBgkqhkiG9w0BAQsFADAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MB4XDTE3MTEyODAwMDAwMFoXDTE5MTEyOTAwMDAwMFowLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKdx4TELKpoEo3og7GdWsvlABYBTHQWIBhpBmti9HsOv6t29sfQnHa7v2pladR11dhVcG6StB2LE0kb1iIgkUU/gIDEiJWqe6pYPPomL3RSCbKK3/OPrETfSKtxdaSg/lvb6rIrXBG85Yxwi0ktr1Ckm+4rcI3PwCo5Mt3F+Z3TLqUBEmTU24sGpzPXQCeyvO6VEVzeupUv6vbu8MVr43N4ixKduT1P9OpqBgzHuQVrg+kW/6XRTNaZZthTlITG8VEa8I02S2Q4VyosdzcrMQmRp75MTA2YKdqTexTKmWKaXFIcGCbvMEm35sIfIVziQ8YMSEC+7GBoh3k2g2BFRgtECAwEAAaMhMB8wHQYDVR0OBBYEFGpho/kx4FeBzTTBIbYVWfFdGIblMA0GCSqGSIb3DQEBCwUAA4IBAQBgaeYvuV4sYJZNPXbxN6FIc0oA4bCg1+DFalT3qzW0bFbl7pXP5YPY/adZlT8+cTznjMgzPPvcXaQdcytR16YqHJVX0ik67NrrQ3g0TtGLc42SuzE+6awryiLQY0Zd799bJwrRcDZUqm/6jKOEOd+utf+3o+VU57w+n7iQLuSL1mKYGMsyzMYCj6xVtYl75iam86leT0/tlXHJ8oqxU5w3xVY6P7v0Sz2UteQNQvhKi6R1/cjfiJUp+OzHpaEor6ls7HSvojY2zm1DIaH6EBp2L9TBFt8IALAEN5hX6XYpKmCHRUlzYwoWo7YwzKiot0XdbDW+zPKGPKtIlbg6cw/+' ] }","time":"2018-02-05T17:54:28.846Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":30,"msg":"PEMkey generated: -----BEGIN RSA PUBLIC KEY-----\nMIIBCgKCAQEAp3HhMQsqmgSjeiDsZ1ay+UAFgFMdBYgGGkGa2L0ew6/q3b2x9Ccd\nru/amVp1HXV2FVwbpK0HYsTSRvWIiCRRT+AgMSIlap7qlg8+iYvdFIJsorf84+sR\nN9Iq3F1pKD+W9vqsitcEbzljHCLSS2vUKSb7itwjc/AKjky3cX5ndMupQESZNTbi\nwanM9dAJ7K87pURXN66lS/q9u7wxWvjc3iLEp25PU/06moGDMe5BWuD6Rb/pdFM1\nplm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wS\nbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0QIDAQAB\n-----END RSA PUBLIC KEY-----\n","time":"2018-02-05T17:54:28.846Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":30,"msg":"Claims received:  { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n  iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n  iat: 1517852967,\n  nbf: 1517852967,\n  exp: 1517856867,\n  aio: 'Y2NgYFDN2Sal1Cn3umXuiiVlFWuCZthVFqRd5t342D6pTjHM9SMA',\n  amr: [ 'pwd' ],\n  family_name: 'Chen',\n  given_name: 'Xi',\n  ipaddr: '73.41.83.228',\n  name: 'Xi Chen',\n  nonce: 'Q-TU8jkEvwGFsYZjM2xbnWt0kr78xWsh',\n  oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n  onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n  sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n  tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n  unique_name: 'XChen@contracosta.courts.ca.gov',\n  upn: 'XChen@contracosta.courts.ca.gov',\n  uti: 'odoGKo-YqECvqzJaaDUXAA',\n  ver: '1.0' }","time":"2018-02-05T17:54:28.846Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":2040,"level":30,"msg":"v2 has no userinfo endpoint, using the content in id_token as the profile","time":"2018-02-05T17:54:28.847Z","v":0}
OIDCStrategy invoked
email:  XChen@contracosta.courts.ca.gov
err:  null
user:  { _id: 5a737e49e440d2445c40b21c,
  updatedAt: 2018-02-01T20:53:29.268Z,
  createdAt: 2018-02-01T20:53:29.268Z,
  authType: 'azure',
  email: 'xchen@contracosta.courts.ca.gov',
  __v: 0,
  role: 'Member',
  cases: [],
  profile: { firstName: 'Xi', lastName: 'Chen' } }
serializing user:  { _id: 5a737e49e440d2445c40b21c,
  updatedAt: 2018-02-01T20:53:29.268Z,
  createdAt: 2018-02-01T20:53:29.268Z,
  authType: 'azure',
  email: 'xchen@contracosta.courts.ca.gov',
  __v: 0,
  role: 'Member',
  cases: [],
  profile: { firstName: 'Xi', lastName: 'Chen' } }
We received a posted return from AzureAD:  IncomingMessage {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 16384,
     buffer: BufferList { head: null, tail: null, length: 0 },
     length: 0,
     pipes: null,
     pipesCount: 0,
     flowing: true,
     ended: true,
     endEmitted: true,
     reading: false,
     sync: true,
     needReadable: false,
     emittedReadable: false,
     readableListening: false,
     resumeScheduled: false,
     defaultEncoding: 'utf8',
     ranOut: false,
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: false,
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  socket: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 5455,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 2013,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 489,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 10258,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 14103,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25265 } },
  connection: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 5455,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 2013,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 489,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 10258,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 14103,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25265 } },
  httpVersionMajor: 1,
  httpVersionMinor: 1,
  httpVersion: '1.1',
  complete: true,
  headers: 
   { host: 'localhost:3000',
     connection: 'keep-alive',
     'content-length': '2225',
     'cache-control': 'max-age=0',
     'upgrade-insecure-requests': '1',
     origin: 'null',
     'content-type': 'application/x-www-form-urlencoded',
     'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'accept-encoding': 'gzip, deflate, br',
     'accept-language': 'en-US,en;q=0.9',
     cookie: 'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517853268016.fbd08e9a6335a4c3df307cd182412711448e5ba314aded2b79a21fd7b798d5861ae5f5694986645a35334f2c1aea64fce041c58c50e3bb46757e320311401022b2b0512e5fa8f3e7f200db4577a07f8a89cc7a0906aeb49ee4ee7ed1345f8b112e6e148ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.221ce2bd51d1c0676b5e2bf47f54a6ea=0' },
  rawHeaders: 
   [ 'Host',
     'localhost:3000',
     'Connection',
     'keep-alive',
     'Content-Length',
     '2225',
     'Cache-Control',
     'max-age=0',
     'Upgrade-Insecure-Requests',
     '1',
     'Origin',
     'null',
     'Content-Type',
     'application/x-www-form-urlencoded',
     'User-Agent',
     'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     'Accept',
     'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'Accept-Encoding',
     'gzip, deflate, br',
     'Accept-Language',
     'en-US,en;q=0.9',
     'Cookie',
     'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517853268016.fbd08e9a6335a4c3df307cd182412711448e5ba314aded2b79a21fd7b798d5861ae5f5694986645a35334f2c1aea64fce041c58c50e3bb46757e320311401022b2b0512e5fa8f3e7f200db4577a07f8a89cc7a0906aeb49ee4ee7ed1345f8b112e6e148ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.221ce2bd51d1c0676b5e2bf47f54a6ea=0' ],
  trailers: {},
  rawTrailers: [],
  upgrade: false,
  url: '/api/auth/openid/return',
  method: 'POST',
  statusCode: null,
  statusMessage: null,
  client: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 5455,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 2013,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 489,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 10258,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 14103,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25265 } },
  _consuming: true,
  _dumped: false,
  next: [Function: next],
  baseUrl: '',
  originalUrl: '/api/auth/openid/return',
  _parsedUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  params: {},
  query: {},
  res: 
   ServerResponse {
     domain: null,
     _events: { finish: [Object], end: [Function: onevent] },
     _eventsCount: 2,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: false,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: true,
     useChunkedEncodingByDefault: true,
     sendDate: true,
     _removedHeader: {},
     _contentLength: null,
     _hasBody: true,
     _trailer: '',
     finished: false,
     _headerSent: false,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 2013,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 14103,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 2013,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 14103,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     _header: null,
     _headers: 
      { 'x-powered-by': 'Express',
        'access-control-allow-origin': '*',
        'access-control-allow-methods': 'PUT, GET, POST, DELETE, OPTIONS',
        'access-control-allow-headers': 'Origin, X-Requested-With, Content-Type, Accept, Authorization, Access-Control-Allow-Credentials',
        'access-control-allow-credentials': 'true',
        'set-cookie': 'passport-aad.1517853268016.fbd08e9a6335a4c3df307cd182412711448e5ba314aded2b79a21fd7b798d5861ae5f5694986645a35334f2c1aea64fce041c58c50e3bb46757e320311401022b2b0512e5fa8f3e7f200db4577a07f8a89cc7a0906aeb49ee4ee7ed1345f8b112e6e148ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.221ce2bd51d1c0676b5e2bf47f54a6ea=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT' },
     _headerNames: 
      { 'x-powered-by': 'X-Powered-By',
        'access-control-allow-origin': 'Access-Control-Allow-Origin',
        'access-control-allow-methods': 'Access-Control-Allow-Methods',
        'access-control-allow-headers': 'Access-Control-Allow-Headers',
        'access-control-allow-credentials': 'Access-Control-Allow-Credentials',
        'set-cookie': 'Set-Cookie' },
     _onPendingData: [Function: updateOutgoingData],
     req: [Circular],
     locals: {},
     writeHead: [Function: writeHead],
     end: [Function: end],
     _startAt: undefined,
     _startTime: undefined,
     __onFinished: { [Function: listener] queue: [Object] } },
  _parsedOriginalUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  sessionStore: 
   MongoStore {
     domain: null,
     _events: 
      { disconnect: [Function: ondisconnect],
        connect: [Function: onconnect] },
     _eventsCount: 2,
     _maxListeners: undefined,
     ttl: 1209600,
     collectionName: 'sessions',
     autoRemove: 'native',
     autoRemoveInterval: 10,
     transformFunctions: 
      { serialize: [Function: stringify],
        unserialize: [Function: parse] },
     options: { mongooseConnection: [Object], clear_interval: 86400 },
     state: 'connected',
     generate: [Function],
     db: 
      Db {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        s: [Object],
        serverConfig: [Getter],
        bufferMaxEntries: [Getter],
        databaseName: [Getter] },
     collectionReadyPromise: Promise { [Object] },
     collection: Collection { s: [Object] } },
  sessionID: 'R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL',
  session: 
   Session {
     cookie: 
      { path: '/',
        _expires: 2018-02-06T17:54:28.017Z,
        originalMaxAge: 86399999,
        httpOnly: true },
     passport: { user: 'xchen@contracosta.courts.ca.gov' } },
  secret: undefined,
  cookies: 
   { 'connect.sid': 's:R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw++TohQY8/YlSxxXW1AgPhmysT1xLoD7PEkUE',
     'passport-aad.1517853268016.fbd08e9a6335a4c3df307cd182412711448e5ba314aded2b79a21fd7b798d5861ae5f5694986645a35334f2c1aea64fce041c58c50e3bb46757e320311401022b2b0512e5fa8f3e7f200db4577a07f8a89cc7a0906aeb49ee4ee7ed1345f8b112e6e148ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.221ce2bd51d1c0676b5e2bf47f54a6ea': '0' },
  signedCookies: {},
  body: 
   { code: 'AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzRT39he60NmuuxShT7YAZ9ToI7bAkIE7o-QpWrZvGtBcsSieJ79PUs_iaJDI7gyPFBThfZTjrgnUt6YMugUVElChwW_cFpmtkfi_BrGeZtSdO52455ZdmuC2ATniemlLgLIkLC2TvA5GVqqAkIvfm4ioVryvKogM3VxgLtwX32zxwwgp8GhejOwjp0xRT5xOm3e89hEBOYaO6Lkv1T0dRPc3ibMbVatSCwO95PcBgQmRe0_ucBDf9LgEutksGExyUSHQC3rVy_aaiA6iQ5oXtXx0AvVIVQHdA8f0PxdrKxWhl512ifZC_bJuG5l-wicJgwinGbX0tmYzn0JkSL_xSKzSuSEzSVmYWCw9rnJs21nC3N8csPylKnZMQnFM_m6ml4OpeCmaltREIzs4OlokEchbqExbjQbBW64SqmUMR5l4K_JbCquRWS8gDlE95U4jYQ4uoJIJ3tvt2soY3LN6VKxDYMkpq5hhV_uKYU7jWeOseK9DPJjeiKFAEOTLoJHnojaK3WNwRZ-DLqRaTPaUNXyy_Qa4JF1InKbwpVlwhDyVytgQnbqoULG-4SlwqqVwIR9saJrLfsnN6tbb11Rmf2HkcxItWQma_Puy02LQ9CjAgAA',
     id_token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUyOTY2LCJuYmYiOjE1MTc4NTI5NjYsImV4cCI6MTUxNzg1Njg2NiwiYWlvIjoiWTJOZ1lHQzFVSmE5eWMxbzhpSysvSWpodjhyd1NybGxpNTB2dlh1dGJEemZPNkZIVnhvQSIsImFtciI6WyJwd2QiXSwiY19oYXNoIjoibjdkeUtOUk5XUjZVTTJzVldCRVV2ZyIsImZhbWlseV9uYW1lIjoiQ2hlbiIsImdpdmVuX25hbWUiOiJYaSIsImlwYWRkciI6IjczLjQxLjgzLjIyOCIsIm5hbWUiOiJYaSBDaGVuIiwibm9uY2UiOiJRLVRVOGprRXZ3R0ZzWVpqTTJ4Ym5XdDBrcjc4eFdzaCIsIm9pZCI6IjlmNTU0ZmYyLWQ0NTUtNDkxMi1iYzE3LWZiOTBhYjY3NzI2NiIsIm9ucHJlbV9zaWQiOiJTLTEtNS0yMS00OTc0MDQ4NTUtNTk3NjM1OTkyLTk4ODg4MjU3Ni0xNDI4MCIsInN1YiI6InpGZHFRZXlWLV9aTmVNNzdmZHlOc0c4Vzk0ejJ3OVpTdlU2ZjlqTmIxejgiLCJ0aWQiOiI4Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYiLCJ1bmlxdWVfbmFtZSI6IlhDaGVuQGNvbnRyYWNvc3RhLmNvdXJ0cy5jYS5nb3YiLCJ1cG4iOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXRpIjoiVDJGX2NTaVo2ME90OGQ0WGJIb1hBQSIsInZlciI6IjEuMCJ9.IwrtKa4JLExme2LWL3K0tikakw2h-whtqMn6XYk5T8yFxkH65dD11D5p4HGZKPB84uZknu7vionixrzCj21xC22Q0jMnO0qRFW4KZDq_B33wqNTNWnwoxYHuDKI93tyZZ3aoyHrgUHh3KQYlCOV4ArUkkGpWgKszNvDA6gRU5CgsYyjlYzzq3itjUJ-6P05u6CORIBgBpLC3h5tjkMS12myznFYvS4ECUmwqqI2ZPM9YpUh5LUOeB_omGQs-MikYJNvgBiQOfk2ZMZ2xpjX93zk8he66jTDakH8Y_14riLscDA-wmuSHG-dMWMcZIVK4Mz_ruuRuiU1tHL2CJMFnwg',
     state: 'my_state',
     session_state: 'a4eab50d-afe3-40e1-92b7-517677a51945' },
  _body: true,
  length: undefined,
  read: [Function],
  _startAt: [ 733178, 125727272 ],
  _startTime: 2018-02-05T17:54:28.465Z,
  _remoteAddress: '::1',
  _passport: 
   { instance: 
      Authenticator {
        _key: 'passport',
        _strategies: [Object],
        _serializers: [Object],
        _deserializers: [Object],
        _infoTransformers: [],
        _framework: [Object],
        _userProperty: 'user',
        Authenticator: [Function: Authenticator],
        Passport: [Function: Authenticator],
        Strategy: [Object],
        strategies: [Object] },
     session: { user: 'xchen@contracosta.courts.ca.gov' } },
  user: 
   { _id: 5a737e49e440d2445c40b21c,
     updatedAt: 2018-02-01T20:53:29.268Z,
     createdAt: 2018-02-01T20:53:29.268Z,
     authType: 'azure',
     email: 'xchen@contracosta.courts.ca.gov',
     __v: 0,
     role: 'Member',
     cases: [],
     profile: { firstName: 'Xi', lastName: 'Chen' } },
  route: 
   Route {
     path: '/api/auth/openid/return',
     stack: [ [Object], [Object] ],
     methods: { post: true } },
  authInfo: {} }
[0mPOST /api/auth/openid/return [31m500 [0m478.220 ms - 3354[0m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `babel-node index.js --presets es2015,stage-2`[39m
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":40,"msg":"Using http for redirectUrl is not recommended, please consider using https","time":"2018-02-05T17:56:06.166Z","v":0}
C:\Users\xichentop\Documents\ContraCostaInternship\mainsite-xc\server
Connected to DB
deserializing user...
adding header
we are getting a get request
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":30,"msg":"metadataUrl is: https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9","time":"2018-02-05T17:56:24.479Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":30,"msg":"received the following items in params: {\"policy\":null,\"cachekey\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":{\"url\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":null,\"authtype\":\"oidc\"}}","time":"2018-02-05T17:56:24.479Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":18028,"level":30,"msg":"Parsing JSON retreived from the endpoint","time":"2018-02-05T17:56:24.626Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":18028,"level":30,"msg":"Request to update the Open ID Connect Metadata","time":"2018-02-05T17:56:24.626Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":18028,"level":30,"msg":"Algorithm retrieved was:  [ 'RS256' ]","time":"2018-02-05T17:56:24.627Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":18028,"level":30,"msg":"Issuer we are using is:  https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/","time":"2018-02-05T17:56:24.627Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":18028,"level":30,"msg":"Key Endpoint we will use is:  https://login.microsoftonline.com/common/discovery/keys","time":"2018-02-05T17:56:24.627Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":18028,"level":30,"msg":"Authentication endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/authorize","time":"2018-02-05T17:56:24.627Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":18028,"level":30,"msg":"Token endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/token","time":"2018-02-05T17:56:24.627Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":18028,"level":30,"msg":"User info endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/openid/userinfo","time":"2018-02-05T17:56:24.627Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":18028,"level":30,"msg":"The logout endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/logout","time":"2018-02-05T17:56:24.627Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":30,"msg":"entering Strategy.prototype._flowInitializationHandler","time":"2018-02-05T17:56:24.825Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":30,"msg":"We are sending the response_type:  code id_token","time":"2018-02-05T17:56:24.825Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":30,"msg":"We are sending the response_mode:  form_post","time":"2018-02-05T17:56:24.825Z","v":0}
[0mGET /api/auth/azure-login [36m302 [0m425.411 ms - 0[0m
deserializing user...
adding header
we have received a post request:  IncomingMessage {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 16384,
     buffer: BufferList { head: null, tail: null, length: 0 },
     length: 0,
     pipes: null,
     pipesCount: 0,
     flowing: true,
     ended: true,
     endEmitted: true,
     reading: false,
     sync: true,
     needReadable: false,
     emittedReadable: false,
     readableListening: false,
     resumeScheduled: false,
     defaultEncoding: 'utf8',
     ranOut: false,
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: false,
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  socket: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 20476,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 24500,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25279 } },
  connection: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 20476,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 24500,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25279 } },
  httpVersionMajor: 1,
  httpVersionMinor: 1,
  httpVersion: '1.1',
  complete: true,
  headers: 
   { host: 'localhost:3000',
     connection: 'keep-alive',
     'content-length': '2231',
     'cache-control': 'max-age=0',
     'upgrade-insecure-requests': '1',
     origin: 'null',
     'content-type': 'application/x-www-form-urlencoded',
     'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'accept-encoding': 'gzip, deflate, br',
     'accept-language': 'en-US,en;q=0.9',
     cookie: 'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517853384826.fbd08e9a6335a4c3df307cd1824127115bca73822dbcf20d65d321c28584c7832bc197726ccd63501a4d780107dc29c8e041c58c50e3bb46757e320311401022b2b0511e358be49caa24cb006b8658a095e242755698b2a6e0dd2f8b331ad25f356a068ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.7cffacc3b0c81c91beb547568fd1efb3=0' },
  rawHeaders: 
   [ 'Host',
     'localhost:3000',
     'Connection',
     'keep-alive',
     'Content-Length',
     '2231',
     'Cache-Control',
     'max-age=0',
     'Upgrade-Insecure-Requests',
     '1',
     'Origin',
     'null',
     'Content-Type',
     'application/x-www-form-urlencoded',
     'User-Agent',
     'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     'Accept',
     'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'Accept-Encoding',
     'gzip, deflate, br',
     'Accept-Language',
     'en-US,en;q=0.9',
     'Cookie',
     'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517853384826.fbd08e9a6335a4c3df307cd1824127115bca73822dbcf20d65d321c28584c7832bc197726ccd63501a4d780107dc29c8e041c58c50e3bb46757e320311401022b2b0511e358be49caa24cb006b8658a095e242755698b2a6e0dd2f8b331ad25f356a068ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.7cffacc3b0c81c91beb547568fd1efb3=0' ],
  trailers: {},
  rawTrailers: [],
  upgrade: false,
  url: '/api/auth/openid/return',
  method: 'POST',
  statusCode: null,
  statusMessage: null,
  client: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 20476,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 24500,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25279 } },
  _consuming: true,
  _dumped: false,
  next: [Function: next],
  baseUrl: '',
  originalUrl: '/api/auth/openid/return',
  _parsedUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  params: {},
  query: {},
  res: 
   ServerResponse {
     domain: null,
     _events: { finish: [Object], end: [Function: onevent] },
     _eventsCount: 2,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: false,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: true,
     useChunkedEncodingByDefault: true,
     sendDate: true,
     _removedHeader: {},
     _contentLength: null,
     _hasBody: true,
     _trailer: '',
     finished: false,
     _headerSent: false,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1773,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 24500,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1773,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 24500,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     _header: null,
     _headers: 
      { 'x-powered-by': 'Express',
        'access-control-allow-origin': '*',
        'access-control-allow-methods': 'PUT, GET, POST, DELETE, OPTIONS',
        'access-control-allow-headers': 'Origin, X-Requested-With, Content-Type, Accept, Authorization, Access-Control-Allow-Credentials',
        'access-control-allow-credentials': 'true' },
     _headerNames: 
      { 'x-powered-by': 'X-Powered-By',
        'access-control-allow-origin': 'Access-Control-Allow-Origin',
        'access-control-allow-methods': 'Access-Control-Allow-Methods',
        'access-control-allow-headers': 'Access-Control-Allow-Headers',
        'access-control-allow-credentials': 'Access-Control-Allow-Credentials' },
     _onPendingData: [Function: updateOutgoingData],
     req: [Circular],
     locals: {},
     writeHead: [Function: writeHead],
     end: [Function: end],
     _startAt: undefined,
     _startTime: undefined,
     __onFinished: { [Function: listener] queue: [Object] } },
  _parsedOriginalUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  sessionStore: 
   MongoStore {
     domain: null,
     _events: 
      { disconnect: [Function: ondisconnect],
        connect: [Function: onconnect] },
     _eventsCount: 2,
     _maxListeners: undefined,
     ttl: 1209600,
     collectionName: 'sessions',
     autoRemove: 'native',
     autoRemoveInterval: 10,
     transformFunctions: 
      { serialize: [Function: stringify],
        unserialize: [Function: parse] },
     options: { mongooseConnection: [Object], clear_interval: 86400 },
     state: 'connected',
     generate: [Function],
     db: 
      Db {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        s: [Object],
        serverConfig: [Getter],
        bufferMaxEntries: [Getter],
        databaseName: [Getter] },
     collectionReadyPromise: Promise { [Object] },
     collection: Collection { s: [Object] } },
  sessionID: 'R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL',
  session: 
   Session {
     cookie: 
      { path: '/',
        _expires: 2018-02-06T17:56:24.828Z,
        originalMaxAge: 86399999,
        httpOnly: true },
     passport: { user: 'xchen@contracosta.courts.ca.gov' } },
  secret: undefined,
  cookies: 
   { 'connect.sid': 's:R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw++TohQY8/YlSxxXW1AgPhmysT1xLoD7PEkUE',
     'passport-aad.1517853384826.fbd08e9a6335a4c3df307cd1824127115bca73822dbcf20d65d321c28584c7832bc197726ccd63501a4d780107dc29c8e041c58c50e3bb46757e320311401022b2b0511e358be49caa24cb006b8658a095e242755698b2a6e0dd2f8b331ad25f356a068ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.7cffacc3b0c81c91beb547568fd1efb3': '0' },
  signedCookies: {},
  body: 
   { code: 'AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzCKu4-Rs7rstOUqALJ66-2EcZj-MnFNyjt-c0yyik32rr9gle4zn2yVoWDahqzsCxBLcMbTVIkXUOep2LVUmXDCAbpCmx0LmKbAsdyjG54XDVGSebDVObzq2H6OGMnHHRZNbKA-dq7YJKphrENn3iFz_Y107Be2xpzHvmkk6Qx2wsPfoHdIxk4ZKAlLdA7OHTqGANryIKxuV2l52CUBumAEWj14SuKE412WKt7B09yaTWtVbUNS1p0tKQtIj31yuMiptXmn8GdGqsK_ypPILMLSev3OEVu7FH4BAmccNJv_pwmiIi6HjuyJEGp44GH1PKlnq-6tfFRiUcjYD-IkV11doGMgX_FN29gRJo6ItGwdygTKeKKRhL_650YXoyU1GWNJIjsCSGSV4hgaPaUHhJUYmMNE5HBwoJYkU7aBpt3rvmXdno_NHOP1-ruudcRZhdGS3IFWO5YRvcp4TUH2EOewoN2-BHGbDh-yayznb8rdshYWJUXYknffjpQC5Xu9i3-nKsosQtjzXrXoBE79WUvg09CZoNL7cvEUVDXObHqqrKVoybubdyrFHnc3eq1duuNKkUjEJBASTZRongwulqis4tAg8Q7XQ9SYYT_9kjinsgAA',
     id_token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUzMDgzLCJuYmYiOjE1MTc4NTMwODMsImV4cCI6MTUxNzg1Njk4MywiYWlvIjoiQVNRQTIvOEdBQUFBUmMwVW9oRm8wUm5oK1l1dFp4Vmt3VHZnYThsL3k1VWFyK1d2cTRxandjcz0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6IjNUMWFleVhmdWpfRU9OSUhxWFFZdWciLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoiYUd3QkMyT1Uza2FhWUV0UjFiTmRWU0dhMXVyYTZMd3oiLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6IjgtbWEtYVhMVFV5THotY3lINEFZQUEiLCJ2ZXIiOiIxLjAifQ.PUyPAi8DmTZ_EwAYurS0GvUBBIvibDpC0GbScB3DcObIxekubd12zS5G9n4syZapnBlciYLXGAoWfarre95TsfL7EnNCB8usCG5tnUbT6D9GDCNMSl3-z8CcB18ES6_RffLpcfJj7BGlCWQwXKUOIwGUB5HLFZ9wlEgiOFcw0rqb_HCw0v6WdIe7b_8wus4VjvlbFOkEiWA-a5_FFK9As-bqMJZGthW1IxDVla56eokV40mA2YPwMMxkXKqiMP1M6yp028sBkGvbqwO1P9AnRFluMbCviIT71PaAbnC0h0MMuUJT8wDSk_1M1cMDC6yqPNqCKqr59jcilANkxmIKoA',
     state: 'CUSTOMEtevRNOyl0i_djc2Wr7RFyPreITlID9qmy_state',
     session_state: 'a4eab50d-afe3-40e1-92b7-517677a51945' },
  _body: true,
  length: undefined,
  read: [Function],
  _startAt: [ 733294, 834573159 ],
  _startTime: 2018-02-05T17:56:25.174Z,
  _remoteAddress: '::1',
  _passport: 
   { instance: 
      Authenticator {
        _key: 'passport',
        _strategies: [Object],
        _serializers: [Object],
        _deserializers: [Object],
        _infoTransformers: [],
        _framework: [Object],
        _userProperty: 'user',
        Authenticator: [Function: Authenticator],
        Passport: [Function: Authenticator],
        Strategy: [Object],
        strategies: [Object] },
     session: { user: 'xchen@contracosta.courts.ca.gov' } },
  user: 
   { _id: 5a737e49e440d2445c40b21c,
     updatedAt: 2018-02-01T20:53:29.268Z,
     createdAt: 2018-02-01T20:53:29.268Z,
     authType: 'azure',
     email: 'xchen@contracosta.courts.ca.gov',
     __v: 0,
     role: 'Member',
     cases: [],
     profile: { firstName: 'Xi', lastName: 'Chen' } },
  route: 
   Route {
     path: '/api/auth/openid/return',
     stack: [ [Object], [Object] ],
     methods: { post: true } } }
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":30,"msg":"metadataUrl is: https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9","time":"2018-02-05T17:56:25.317Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":30,"msg":"received the following items in params: {\"id_token\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUzMDgzLCJuYmYiOjE1MTc4NTMwODMsImV4cCI6MTUxNzg1Njk4MywiYWlvIjoiQVNRQTIvOEdBQUFBUmMwVW9oRm8wUm5oK1l1dFp4Vmt3VHZnYThsL3k1VWFyK1d2cTRxandjcz0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6IjNUMWFleVhmdWpfRU9OSUhxWFFZdWciLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoiYUd3QkMyT1Uza2FhWUV0UjFiTmRWU0dhMXVyYTZMd3oiLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6IjgtbWEtYVhMVFV5THotY3lINEFZQUEiLCJ2ZXIiOiIxLjAifQ.PUyPAi8DmTZ_EwAYurS0GvUBBIvibDpC0GbScB3DcObIxekubd12zS5G9n4syZapnBlciYLXGAoWfarre95TsfL7EnNCB8usCG5tnUbT6D9GDCNMSl3-z8CcB18ES6_RffLpcfJj7BGlCWQwXKUOIwGUB5HLFZ9wlEgiOFcw0rqb_HCw0v6WdIe7b_8wus4VjvlbFOkEiWA-a5_FFK9As-bqMJZGthW1IxDVla56eokV40mA2YPwMMxkXKqiMP1M6yp028sBkGvbqwO1P9AnRFluMbCviIT71PaAbnC0h0MMuUJT8wDSk_1M1cMDC6yqPNqCKqr59jcilANkxmIKoA\",\"code\":\"AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzCKu4-Rs7rstOUqALJ66-2EcZj-MnFNyjt-c0yyik32rr9gle4zn2yVoWDahqzsCxBLcMbTVIkXUOep2LVUmXDCAbpCmx0LmKbAsdyjG54XDVGSebDVObzq2H6OGMnHHRZNbKA-dq7YJKphrENn3iFz_Y107Be2xpzHvmkk6Qx2wsPfoHdIxk4ZKAlLdA7OHTqGANryIKxuV2l52CUBumAEWj14SuKE412WKt7B09yaTWtVbUNS1p0tKQtIj31yuMiptXmn8GdGqsK_ypPILMLSev3OEVu7FH4BAmccNJv_pwmiIi6HjuyJEGp44GH1PKlnq-6tfFRiUcjYD-IkV11doGMgX_FN29gRJo6ItGwdygTKeKKRhL_650YXoyU1GWNJIjsCSGSV4hgaPaUHhJUYmMNE5HBwoJYkU7aBpt3rvmXdno_NHOP1-ruudcRZhdGS3IFWO5YRvcp4TUH2EOewoN2-BHGbDh-yayznb8rdshYWJUXYknffjpQC5Xu9i3-nKsosQtjzXrXoBE79WUvg09CZoNL7cvEUVDXObHqqrKVoybubdyrFHnc3eq1duuNKkUjEJBASTZRongwulqis4tAg8Q7XQ9SYYT_9kjinsgAA\",\"state\":\"CUSTOMEtevRNOyl0i_djc2Wr7RFyPreITlID9qmy_state\",\"nonce\":\"aGwBC2OU3kaaYEtR1bNdVSGa1ura6Lwz\",\"resource\":\"https://graph.windows.net\",\"cachekey\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":{\"url\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":null,\"authtype\":\"oidc\"}}","time":"2018-02-05T17:56:25.317Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":30,"msg":"entering Strategy.prototype._hybridFlowHandler, received code: AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzCKu4-Rs7rstOUqALJ66-2EcZj-MnFNyjt-c0yyik32rr9gle4zn2yVoWDahqzsCxBLcMbTVIkXUOep2LVUmXDCAbpCmx0LmKbAsdyjG54XDVGSebDVObzq2H6OGMnHHRZNbKA-dq7YJKphrENn3iFz_Y107Be2xpzHvmkk6Qx2wsPfoHdIxk4ZKAlLdA7OHTqGANryIKxuV2l52CUBumAEWj14SuKE412WKt7B09yaTWtVbUNS1p0tKQtIj31yuMiptXmn8GdGqsK_ypPILMLSev3OEVu7FH4BAmccNJv_pwmiIi6HjuyJEGp44GH1PKlnq-6tfFRiUcjYD-IkV11doGMgX_FN29gRJo6ItGwdygTKeKKRhL_650YXoyU1GWNJIjsCSGSV4hgaPaUHhJUYmMNE5HBwoJYkU7aBpt3rvmXdno_NHOP1-ruudcRZhdGS3IFWO5YRvcp4TUH2EOewoN2-BHGbDh-yayznb8rdshYWJUXYknffjpQC5Xu9i3-nKsosQtjzXrXoBE79WUvg09CZoNL7cvEUVDXObHqqrKVoybubdyrFHnc3eq1duuNKkUjEJBASTZRongwulqis4tAg8Q7XQ9SYYT_9kjinsgAA, received id_token: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUzMDgzLCJuYmYiOjE1MTc4NTMwODMsImV4cCI6MTUxNzg1Njk4MywiYWlvIjoiQVNRQTIvOEdBQUFBUmMwVW9oRm8wUm5oK1l1dFp4Vmt3VHZnYThsL3k1VWFyK1d2cTRxandjcz0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6IjNUMWFleVhmdWpfRU9OSUhxWFFZdWciLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoiYUd3QkMyT1Uza2FhWUV0UjFiTmRWU0dhMXVyYTZMd3oiLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6IjgtbWEtYVhMVFV5THotY3lINEFZQUEiLCJ2ZXIiOiIxLjAifQ.PUyPAi8DmTZ_EwAYurS0GvUBBIvibDpC0GbScB3DcObIxekubd12zS5G9n4syZapnBlciYLXGAoWfarre95TsfL7EnNCB8usCG5tnUbT6D9GDCNMSl3-z8CcB18ES6_RffLpcfJj7BGlCWQwXKUOIwGUB5HLFZ9wlEgiOFcw0rqb_HCw0v6WdIe7b_8wus4VjvlbFOkEiWA-a5_FFK9As-bqMJZGthW1IxDVla56eokV40mA2YPwMMxkXKqiMP1M6yp028sBkGvbqwO1P9AnRFluMbCviIT71PaAbnC0h0MMuUJT8wDSk_1M1cMDC6yqPNqCKqr59jcilANkxmIKoA","time":"2018-02-05T17:56:25.318Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":30,"msg":"token decoded:  { header: \n   { typ: 'JWT',\n     alg: 'RS256',\n     x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n     kid: 'z44wMdHu8wKsumrbfaK98qxs5YI' },\n  payload: \n   { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n     iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n     iat: 1517853083,\n     nbf: 1517853083,\n     exp: 1517856983,\n     aio: 'ASQA2/8GAAAARc0UohFo0Rnh+YutZxVkwTvga8l/y5Uar+Wvq4qjwcs=',\n     amr: [ 'pwd' ],\n     c_hash: '3T1aeyXfuj_EONIHqXQYug',\n     family_name: 'Chen',\n     given_name: 'Xi',\n     ipaddr: '73.41.83.228',\n     name: 'Xi Chen',\n     nonce: 'aGwBC2OU3kaaYEtR1bNdVSGa1ura6Lwz',\n     oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n     onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n     sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n     tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n     unique_name: 'XChen@contracosta.courts.ca.gov',\n     upn: 'XChen@contracosta.courts.ca.gov',\n     uti: '8-ma-aXLTUyLz-cyH4AYAA',\n     ver: '1.0' },\n  signature: 'PUyPAi8DmTZ_EwAYurS0GvUBBIvibDpC0GbScB3DcObIxekubd12zS5G9n4syZapnBlciYLXGAoWfarre95TsfL7EnNCB8usCG5tnUbT6D9GDCNMSl3-z8CcB18ES6_RffLpcfJj7BGlCWQwXKUOIwGUB5HLFZ9wlEgiOFcw0rqb_HCw0v6WdIe7b_8wus4VjvlbFOkEiWA-a5_FFK9As-bqMJZGthW1IxDVla56eokV40mA2YPwMMxkXKqiMP1M6yp028sBkGvbqwO1P9AnRFluMbCviIT71PaAbnC0h0MMuUJT8wDSk_1M1cMDC6yqPNqCKqr59jcilANkxmIKoA' }","time":"2018-02-05T17:56:25.321Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":18028,"level":30,"msg":"working on key: { kty: 'RSA',\n  use: 'sig',\n  kid: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  n: 'p3HhMQsqmgSjeiDsZ1ay-UAFgFMdBYgGGkGa2L0ew6_q3b2x9Ccdru_amVp1HXV2FVwbpK0HYsTSRvWIiCRRT-AgMSIlap7qlg8-iYvdFIJsorf84-sRN9Iq3F1pKD-W9vqsitcEbzljHCLSS2vUKSb7itwjc_AKjky3cX5ndMupQESZNTbiwanM9dAJ7K87pURXN66lS_q9u7wxWvjc3iLEp25PU_06moGDMe5BWuD6Rb_pdFM1plm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wSbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0Q',\n  e: 'AQAB',\n  x5c: [ 'MIIDBTCCAe2gAwIBAgIQaD0+a2FNl5JMaE2/7KUP5zANBgkqhkiG9w0BAQsFADAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MB4XDTE3MTEyODAwMDAwMFoXDTE5MTEyOTAwMDAwMFowLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKdx4TELKpoEo3og7GdWsvlABYBTHQWIBhpBmti9HsOv6t29sfQnHa7v2pladR11dhVcG6StB2LE0kb1iIgkUU/gIDEiJWqe6pYPPomL3RSCbKK3/OPrETfSKtxdaSg/lvb6rIrXBG85Yxwi0ktr1Ckm+4rcI3PwCo5Mt3F+Z3TLqUBEmTU24sGpzPXQCeyvO6VEVzeupUv6vbu8MVr43N4ixKduT1P9OpqBgzHuQVrg+kW/6XRTNaZZthTlITG8VEa8I02S2Q4VyosdzcrMQmRp75MTA2YKdqTexTKmWKaXFIcGCbvMEm35sIfIVziQ8YMSEC+7GBoh3k2g2BFRgtECAwEAAaMhMB8wHQYDVR0OBBYEFGpho/kx4FeBzTTBIbYVWfFdGIblMA0GCSqGSIb3DQEBCwUAA4IBAQBgaeYvuV4sYJZNPXbxN6FIc0oA4bCg1+DFalT3qzW0bFbl7pXP5YPY/adZlT8+cTznjMgzPPvcXaQdcytR16YqHJVX0ik67NrrQ3g0TtGLc42SuzE+6awryiLQY0Zd799bJwrRcDZUqm/6jKOEOd+utf+3o+VU57w+n7iQLuSL1mKYGMsyzMYCj6xVtYl75iam86leT0/tlXHJ8oqxU5w3xVY6P7v0Sz2UteQNQvhKi6R1/cjfiJUp+OzHpaEor6ls7HSvojY2zm1DIaH6EBp2L9TBFt8IALAEN5hX6XYpKmCHRUlzYwoWo7YwzKiot0XdbDW+zPKGPKtIlbg6cw/+' ] }","time":"2018-02-05T17:56:25.322Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":30,"msg":"PEMkey generated: -----BEGIN RSA PUBLIC KEY-----\nMIIBCgKCAQEAp3HhMQsqmgSjeiDsZ1ay+UAFgFMdBYgGGkGa2L0ew6/q3b2x9Ccd\nru/amVp1HXV2FVwbpK0HYsTSRvWIiCRRT+AgMSIlap7qlg8+iYvdFIJsorf84+sR\nN9Iq3F1pKD+W9vqsitcEbzljHCLSS2vUKSb7itwjc/AKjky3cX5ndMupQESZNTbi\nwanM9dAJ7K87pURXN66lS/q9u7wxWvjc3iLEp25PU/06moGDMe5BWuD6Rb/pdFM1\nplm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wS\nbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0QIDAQAB\n-----END RSA PUBLIC KEY-----\n","time":"2018-02-05T17:56:25.322Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":30,"msg":"Claims received:  { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n  iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n  iat: 1517853083,\n  nbf: 1517853083,\n  exp: 1517856983,\n  aio: 'ASQA2/8GAAAARc0UohFo0Rnh+YutZxVkwTvga8l/y5Uar+Wvq4qjwcs=',\n  amr: [ 'pwd' ],\n  c_hash: '3T1aeyXfuj_EONIHqXQYug',\n  family_name: 'Chen',\n  given_name: 'Xi',\n  ipaddr: '73.41.83.228',\n  name: 'Xi Chen',\n  nonce: 'aGwBC2OU3kaaYEtR1bNdVSGa1ura6Lwz',\n  oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n  onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n  sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n  tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n  unique_name: 'XChen@contracosta.courts.ca.gov',\n  upn: 'XChen@contracosta.courts.ca.gov',\n  uti: '8-ma-aXLTUyLz-cyH4AYAA',\n  ver: '1.0' }","time":"2018-02-05T17:56:25.326Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":30,"msg":"entering Strategy.prototype._authCodeFlowHandler, received code: AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzCKu4-Rs7rstOUqALJ66-2EcZj-MnFNyjt-c0yyik32rr9gle4zn2yVoWDahqzsCxBLcMbTVIkXUOep2LVUmXDCAbpCmx0LmKbAsdyjG54XDVGSebDVObzq2H6OGMnHHRZNbKA-dq7YJKphrENn3iFz_Y107Be2xpzHvmkk6Qx2wsPfoHdIxk4ZKAlLdA7OHTqGANryIKxuV2l52CUBumAEWj14SuKE412WKt7B09yaTWtVbUNS1p0tKQtIj31yuMiptXmn8GdGqsK_ypPILMLSev3OEVu7FH4BAmccNJv_pwmiIi6HjuyJEGp44GH1PKlnq-6tfFRiUcjYD-IkV11doGMgX_FN29gRJo6ItGwdygTKeKKRhL_650YXoyU1GWNJIjsCSGSV4hgaPaUHhJUYmMNE5HBwoJYkU7aBpt3rvmXdno_NHOP1-ruudcRZhdGS3IFWO5YRvcp4TUH2EOewoN2-BHGbDh-yayznb8rdshYWJUXYknffjpQC5Xu9i3-nKsosQtjzXrXoBE79WUvg09CZoNL7cvEUVDXObHqqrKVoybubdyrFHnc3eq1duuNKkUjEJBASTZRongwulqis4tAg8Q7XQ9SYYT_9kjinsgAA","time":"2018-02-05T17:56:25.327Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":30,"msg":"In _getAccessTokenBySecretOrAssertion: we are using client secret","time":"2018-02-05T17:56:25.327Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":30,"msg":"received id_token:  eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUzMDgzLCJuYmYiOjE1MTc4NTMwODMsImV4cCI6MTUxNzg1Njk4MywiYWlvIjoiQVNRQTIvOEdBQUFBTXRaR2wvSElkMU95Z2d6OE9vK1IreGpxeHoyaXRJemVvMTFzSjloY2tMaz0iLCJhbXIiOlsicHdkIl0sImZhbWlseV9uYW1lIjoiQ2hlbiIsImdpdmVuX25hbWUiOiJYaSIsImlwYWRkciI6IjczLjQxLjgzLjIyOCIsIm5hbWUiOiJYaSBDaGVuIiwibm9uY2UiOiJhR3dCQzJPVTNrYWFZRXRSMWJOZFZTR2ExdXJhNkx3eiIsIm9pZCI6IjlmNTU0ZmYyLWQ0NTUtNDkxMi1iYzE3LWZiOTBhYjY3NzI2NiIsIm9ucHJlbV9zaWQiOiJTLTEtNS0yMS00OTc0MDQ4NTUtNTk3NjM1OTkyLTk4ODg4MjU3Ni0xNDI4MCIsInN1YiI6InpGZHFRZXlWLV9aTmVNNzdmZHlOc0c4Vzk0ejJ3OVpTdlU2ZjlqTmIxejgiLCJ0aWQiOiI4Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYiLCJ1bmlxdWVfbmFtZSI6IlhDaGVuQGNvbnRyYWNvc3RhLmNvdXJ0cy5jYS5nb3YiLCJ1cG4iOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXRpIjoiU1dDTFFEb2JrVWlqUHNVQUxyY1dBQSIsInZlciI6IjEuMCJ9.O3wxM2qhRTzKLp8Brm0djpmk51qV7tJPZVGa1OzHnvIEiHdlZxteL2oHCR1UYGviQAqYrYKPD-mp8T1fd8NBMDseAfOhb7f-bGAdZi8cF7thBTXTZqq51ytXmL9vbMAmdm5ZhUrRQB6epqflcvLHiimucUvGQrWPnlMNOJO7sz1EVJ8kRp_WXp_4doIvYakMq9R_9K02SxFmetueWzTsPK01VnnBAl9UP9hLDDOPOFoMV_gTHFUJTb8PVJ-PviTX7IxyYH8Ylcj-ZAdJFDjE4y262bqMI34bkv00ocIJnZTftHzLE4zFeShAdARVyqezrPgiKUkfRyuj7St9_hbgww","time":"2018-02-05T17:56:25.595Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":30,"msg":"received access_token:  eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiJodHRwczovL2dyYXBoLndpbmRvd3MubmV0IiwiaXNzIjoiaHR0cHM6Ly9zdHMud2luZG93cy5uZXQvOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmLyIsImlhdCI6MTUxNzg1MzA4MywibmJmIjoxNTE3ODUzMDgzLCJleHAiOjE1MTc4NTY5ODMsImFjciI6IjEiLCJhaW8iOiJZMk5nWUJDTGZ4Qzh5V1Yya2ZyS05IWkZ2eDhYR3ZtdnllbS9NOVB6bWJTNEw3YUYrUllBIiwiYW1yIjpbInB3ZCJdLCJhcHBpZCI6IjJmNmZlYTEyLWUzYzEtNDdkNS1hZTcyLTUyODVjNmVlY2VmMSIsImFwcGlkYWNyIjoiMSIsImZhbWlseV9uYW1lIjoiQ2hlbiIsImdpdmVuX25hbWUiOiJYaSIsImlwYWRkciI6IjczLjQxLjgzLjIyOCIsIm5hbWUiOiJYaSBDaGVuIiwib2lkIjoiOWY1NTRmZjItZDQ1NS00OTEyLWJjMTctZmI5MGFiNjc3MjY2Iiwib25wcmVtX3NpZCI6IlMtMS01LTIxLTQ5NzQwNDg1NS01OTc2MzU5OTItOTg4ODgyNTc2LTE0MjgwIiwicHVpZCI6IjEwMDMzRkZGQTI2RUM5MEMiLCJzY3AiOiJNYWlsLlJlYWQgb2ZmbGluZV9hY2Nlc3Mgb3BlbmlkIHByb2ZpbGUgVXNlci5SZWFkIiwic3ViIjoiNUxlaUFtMk40NDkxYXYtR21MT19XTzVBVWZHTG42Z1Z2OUR1TmhLazBTdyIsInRlbmFudF9yZWdpb25fc2NvcGUiOiJOQSIsInRpZCI6IjhjYTlkOGYxLWQ5NzYtNDQ0NS1hM2NjLTNmZmMzZTI5YTNmZiIsInVuaXF1ZV9uYW1lIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInVwbiI6IlhDaGVuQGNvbnRyYWNvc3RhLmNvdXJ0cy5jYS5nb3YiLCJ1dGkiOiJTV0NMUURvYmtVaWpQc1VBTHJjV0FBIiwidmVyIjoiMS4wIn0.n0TQbYb3JI0XE6On_0l3AS-wUoXx9RSvPzXHHCtVAn03TBPMhFbZPZk7BWX9Dt43qWQFpYL6GFdyC1iI5alIfEOG3WI9SSqggHEdOlf_tUvx5d4tOyovswvaVEgj1QXsVy2CmlbGN8uqAu-F8VsINM46XmzhLXR1h7D6k_lvO15JhfyYUH23IbaIOthKHegpFBUqUOtkhY-mNIS112UkY5If1YqGiqdh4XnWT-TA8ZrpLNW0ce3F-xP4i7_8K4NHG3Nyl0-1xWZA52pw9beN5mmMXfviw4cv4HwH7PZFhRxonpiA4sdTWgFYtzJVvG3zZivR16GhqqMBEx4XyRLtGw","time":"2018-02-05T17:56:25.595Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":30,"msg":"received refresh_token:  AQABAAAAAABHh4kmS_aKT5XrjzxRAtHz-BLtIMQVj9cT3j9yqIZm6G2Jj2H1UP5S4LOKwnQQADsHCO8fexW546O0UtCD6jAeSWFXRctnPZ27ryQXU9jOkE49mDcST0nJT3FWo__as6PuKBBD6Z_4LrUdolSIXAqSJpwZFi_EPiq-h1OhdEsF8MXo02t330T8h6PkQqoFstyh2Ku6LMcTeROcqk3k4y4zFB-fDQQqY9ADO1G3UM2L230MxKXKcyIgo_YCAq4MRp13MafRBSToxAd2MdAaeajGqfg3trg0pJMM8hMis1nP9m6yCJWdfpCtI8QUSMO4LJXcyJAtSuqLc8-Fni51eNKQ5Y4s5wpk_WWb3p7lBGrsm486UgsKj1EEXhbB1EPJ8h1pTAaFwoCSsRFlyEoBWFb8IQymXkOvxpdWuzGAEPOlVLEfuS7OYy2xz2X6kE21qiz2koKzq-vw2gJVltXUzixyINywLgWAqYykUsKvZgb8A3RGdu3kk6Vhe77gtJIQlfYy2vJWDdXY6dwXAG7-scPQdiGgJ_9J1QlUYARRwiAAAm0LeOe9cpRK-7f5kZOSrnA9s0iHV62O7IB6nOgyn5c76xgWvz-A2JB6vHOh9qmMomVx8KMAsL77ZKG-0XIR-yoK-3EpuyDeRlh_MJmf-O6w9znBV8ZbX4rRd7D34ovi1KVfCMUrqS7Jf_0o2B8Imd4doI8bfemYzQbsXK3Vn8B5UetdqcgwV4DyyPfsOKyW8VhYjEtTcf5ByOyhsqEUhZ-tBeLVwfPnsPGrmVAlfP6dCgApoJ5e7Ttvjuauz4hg4wmpvZ3VW1Bb2lVozMSyawdMkpJFeaW_l6hD2_ZV-4LhIAA","time":"2018-02-05T17:56:25.595Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":30,"msg":"token decoded:  { header: \n   { typ: 'JWT',\n     alg: 'RS256',\n     x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n     kid: 'z44wMdHu8wKsumrbfaK98qxs5YI' },\n  payload: \n   { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n     iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n     iat: 1517853083,\n     nbf: 1517853083,\n     exp: 1517856983,\n     aio: 'ASQA2/8GAAAAMtZGl/HId1Oyggz8Oo+R+xjqxz2itIzeo11sJ9hckLk=',\n     amr: [ 'pwd' ],\n     family_name: 'Chen',\n     given_name: 'Xi',\n     ipaddr: '73.41.83.228',\n     name: 'Xi Chen',\n     nonce: 'aGwBC2OU3kaaYEtR1bNdVSGa1ura6Lwz',\n     oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n     onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n     sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n     tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n     unique_name: 'XChen@contracosta.courts.ca.gov',\n     upn: 'XChen@contracosta.courts.ca.gov',\n     uti: 'SWCLQDobkUijPsUALrcWAA',\n     ver: '1.0' },\n  signature: 'O3wxM2qhRTzKLp8Brm0djpmk51qV7tJPZVGa1OzHnvIEiHdlZxteL2oHCR1UYGviQAqYrYKPD-mp8T1fd8NBMDseAfOhb7f-bGAdZi8cF7thBTXTZqq51ytXmL9vbMAmdm5ZhUrRQB6epqflcvLHiimucUvGQrWPnlMNOJO7sz1EVJ8kRp_WXp_4doIvYakMq9R_9K02SxFmetueWzTsPK01VnnBAl9UP9hLDDOPOFoMV_gTHFUJTb8PVJ-PviTX7IxyYH8Ylcj-ZAdJFDjE4y262bqMI34bkv00ocIJnZTftHzLE4zFeShAdARVyqezrPgiKUkfRyuj7St9_hbgww' }","time":"2018-02-05T17:56:25.596Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":18028,"level":30,"msg":"working on key: { kty: 'RSA',\n  use: 'sig',\n  kid: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  n: 'p3HhMQsqmgSjeiDsZ1ay-UAFgFMdBYgGGkGa2L0ew6_q3b2x9Ccdru_amVp1HXV2FVwbpK0HYsTSRvWIiCRRT-AgMSIlap7qlg8-iYvdFIJsorf84-sRN9Iq3F1pKD-W9vqsitcEbzljHCLSS2vUKSb7itwjc_AKjky3cX5ndMupQESZNTbiwanM9dAJ7K87pURXN66lS_q9u7wxWvjc3iLEp25PU_06moGDMe5BWuD6Rb_pdFM1plm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wSbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0Q',\n  e: 'AQAB',\n  x5c: [ 'MIIDBTCCAe2gAwIBAgIQaD0+a2FNl5JMaE2/7KUP5zANBgkqhkiG9w0BAQsFADAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MB4XDTE3MTEyODAwMDAwMFoXDTE5MTEyOTAwMDAwMFowLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKdx4TELKpoEo3og7GdWsvlABYBTHQWIBhpBmti9HsOv6t29sfQnHa7v2pladR11dhVcG6StB2LE0kb1iIgkUU/gIDEiJWqe6pYPPomL3RSCbKK3/OPrETfSKtxdaSg/lvb6rIrXBG85Yxwi0ktr1Ckm+4rcI3PwCo5Mt3F+Z3TLqUBEmTU24sGpzPXQCeyvO6VEVzeupUv6vbu8MVr43N4ixKduT1P9OpqBgzHuQVrg+kW/6XRTNaZZthTlITG8VEa8I02S2Q4VyosdzcrMQmRp75MTA2YKdqTexTKmWKaXFIcGCbvMEm35sIfIVziQ8YMSEC+7GBoh3k2g2BFRgtECAwEAAaMhMB8wHQYDVR0OBBYEFGpho/kx4FeBzTTBIbYVWfFdGIblMA0GCSqGSIb3DQEBCwUAA4IBAQBgaeYvuV4sYJZNPXbxN6FIc0oA4bCg1+DFalT3qzW0bFbl7pXP5YPY/adZlT8+cTznjMgzPPvcXaQdcytR16YqHJVX0ik67NrrQ3g0TtGLc42SuzE+6awryiLQY0Zd799bJwrRcDZUqm/6jKOEOd+utf+3o+VU57w+n7iQLuSL1mKYGMsyzMYCj6xVtYl75iam86leT0/tlXHJ8oqxU5w3xVY6P7v0Sz2UteQNQvhKi6R1/cjfiJUp+OzHpaEor6ls7HSvojY2zm1DIaH6EBp2L9TBFt8IALAEN5hX6XYpKmCHRUlzYwoWo7YwzKiot0XdbDW+zPKGPKtIlbg6cw/+' ] }","time":"2018-02-05T17:56:25.597Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":30,"msg":"PEMkey generated: -----BEGIN RSA PUBLIC KEY-----\nMIIBCgKCAQEAp3HhMQsqmgSjeiDsZ1ay+UAFgFMdBYgGGkGa2L0ew6/q3b2x9Ccd\nru/amVp1HXV2FVwbpK0HYsTSRvWIiCRRT+AgMSIlap7qlg8+iYvdFIJsorf84+sR\nN9Iq3F1pKD+W9vqsitcEbzljHCLSS2vUKSb7itwjc/AKjky3cX5ndMupQESZNTbi\nwanM9dAJ7K87pURXN66lS/q9u7wxWvjc3iLEp25PU/06moGDMe5BWuD6Rb/pdFM1\nplm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wS\nbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0QIDAQAB\n-----END RSA PUBLIC KEY-----\n","time":"2018-02-05T17:56:25.597Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":30,"msg":"Claims received:  { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n  iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n  iat: 1517853083,\n  nbf: 1517853083,\n  exp: 1517856983,\n  aio: 'ASQA2/8GAAAAMtZGl/HId1Oyggz8Oo+R+xjqxz2itIzeo11sJ9hckLk=',\n  amr: [ 'pwd' ],\n  family_name: 'Chen',\n  given_name: 'Xi',\n  ipaddr: '73.41.83.228',\n  name: 'Xi Chen',\n  nonce: 'aGwBC2OU3kaaYEtR1bNdVSGa1ura6Lwz',\n  oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n  onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n  sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n  tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n  unique_name: 'XChen@contracosta.courts.ca.gov',\n  upn: 'XChen@contracosta.courts.ca.gov',\n  uti: 'SWCLQDobkUijPsUALrcWAA',\n  ver: '1.0' }","time":"2018-02-05T17:56:25.598Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":18028,"level":30,"msg":"v2 has no userinfo endpoint, using the content in id_token as the profile","time":"2018-02-05T17:56:25.598Z","v":0}
OIDCStrategy invoked
email:  XChen@contracosta.courts.ca.gov
err:  null
user:  { _id: 5a737e49e440d2445c40b21c,
  updatedAt: 2018-02-01T20:53:29.268Z,
  createdAt: 2018-02-01T20:53:29.268Z,
  authType: 'azure',
  email: 'xchen@contracosta.courts.ca.gov',
  __v: 0,
  role: 'Member',
  cases: [],
  profile: { firstName: 'Xi', lastName: 'Chen' } }
serializing user:  { _id: 5a737e49e440d2445c40b21c,
  updatedAt: 2018-02-01T20:53:29.268Z,
  createdAt: 2018-02-01T20:53:29.268Z,
  authType: 'azure',
  email: 'xchen@contracosta.courts.ca.gov',
  __v: 0,
  role: 'Member',
  cases: [],
  profile: { firstName: 'Xi', lastName: 'Chen' } }
We received a posted return from AzureAD:  IncomingMessage {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 16384,
     buffer: BufferList { head: null, tail: null, length: 0 },
     length: 0,
     pipes: null,
     pipesCount: 0,
     flowing: true,
     ended: true,
     endEmitted: true,
     reading: false,
     sync: true,
     needReadable: false,
     emittedReadable: false,
     readableListening: false,
     resumeScheduled: false,
     defaultEncoding: 'utf8',
     ranOut: false,
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: false,
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  socket: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 20476,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 24500,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25279 } },
  connection: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 20476,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 24500,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25279 } },
  httpVersionMajor: 1,
  httpVersionMinor: 1,
  httpVersion: '1.1',
  complete: true,
  headers: 
   { host: 'localhost:3000',
     connection: 'keep-alive',
     'content-length': '2231',
     'cache-control': 'max-age=0',
     'upgrade-insecure-requests': '1',
     origin: 'null',
     'content-type': 'application/x-www-form-urlencoded',
     'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'accept-encoding': 'gzip, deflate, br',
     'accept-language': 'en-US,en;q=0.9',
     cookie: 'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517853384826.fbd08e9a6335a4c3df307cd1824127115bca73822dbcf20d65d321c28584c7832bc197726ccd63501a4d780107dc29c8e041c58c50e3bb46757e320311401022b2b0511e358be49caa24cb006b8658a095e242755698b2a6e0dd2f8b331ad25f356a068ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.7cffacc3b0c81c91beb547568fd1efb3=0' },
  rawHeaders: 
   [ 'Host',
     'localhost:3000',
     'Connection',
     'keep-alive',
     'Content-Length',
     '2231',
     'Cache-Control',
     'max-age=0',
     'Upgrade-Insecure-Requests',
     '1',
     'Origin',
     'null',
     'Content-Type',
     'application/x-www-form-urlencoded',
     'User-Agent',
     'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     'Accept',
     'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'Accept-Encoding',
     'gzip, deflate, br',
     'Accept-Language',
     'en-US,en;q=0.9',
     'Cookie',
     'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517853384826.fbd08e9a6335a4c3df307cd1824127115bca73822dbcf20d65d321c28584c7832bc197726ccd63501a4d780107dc29c8e041c58c50e3bb46757e320311401022b2b0511e358be49caa24cb006b8658a095e242755698b2a6e0dd2f8b331ad25f356a068ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.7cffacc3b0c81c91beb547568fd1efb3=0' ],
  trailers: {},
  rawTrailers: [],
  upgrade: false,
  url: '/api/auth/openid/return',
  method: 'POST',
  statusCode: null,
  statusMessage: null,
  client: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 20476,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 24500,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25279 } },
  _consuming: true,
  _dumped: false,
  next: [Function: next],
  baseUrl: '',
  originalUrl: '/api/auth/openid/return',
  _parsedUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  params: {},
  query: {},
  res: 
   ServerResponse {
     domain: null,
     _events: { finish: [Object], end: [Function: onevent] },
     _eventsCount: 2,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: false,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: true,
     useChunkedEncodingByDefault: true,
     sendDate: true,
     _removedHeader: {},
     _contentLength: null,
     _hasBody: true,
     _trailer: '',
     finished: false,
     _headerSent: false,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1773,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 24500,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1773,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 24500,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     _header: null,
     _headers: 
      { 'x-powered-by': 'Express',
        'access-control-allow-origin': '*',
        'access-control-allow-methods': 'PUT, GET, POST, DELETE, OPTIONS',
        'access-control-allow-headers': 'Origin, X-Requested-With, Content-Type, Accept, Authorization, Access-Control-Allow-Credentials',
        'access-control-allow-credentials': 'true',
        'set-cookie': 'passport-aad.1517853384826.fbd08e9a6335a4c3df307cd1824127115bca73822dbcf20d65d321c28584c7832bc197726ccd63501a4d780107dc29c8e041c58c50e3bb46757e320311401022b2b0511e358be49caa24cb006b8658a095e242755698b2a6e0dd2f8b331ad25f356a068ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.7cffacc3b0c81c91beb547568fd1efb3=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT' },
     _headerNames: 
      { 'x-powered-by': 'X-Powered-By',
        'access-control-allow-origin': 'Access-Control-Allow-Origin',
        'access-control-allow-methods': 'Access-Control-Allow-Methods',
        'access-control-allow-headers': 'Access-Control-Allow-Headers',
        'access-control-allow-credentials': 'Access-Control-Allow-Credentials',
        'set-cookie': 'Set-Cookie' },
     _onPendingData: [Function: updateOutgoingData],
     req: [Circular],
     locals: {},
     writeHead: [Function: writeHead],
     end: [Function: end],
     _startAt: undefined,
     _startTime: undefined,
     __onFinished: { [Function: listener] queue: [Object] } },
  _parsedOriginalUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  sessionStore: 
   MongoStore {
     domain: null,
     _events: 
      { disconnect: [Function: ondisconnect],
        connect: [Function: onconnect] },
     _eventsCount: 2,
     _maxListeners: undefined,
     ttl: 1209600,
     collectionName: 'sessions',
     autoRemove: 'native',
     autoRemoveInterval: 10,
     transformFunctions: 
      { serialize: [Function: stringify],
        unserialize: [Function: parse] },
     options: { mongooseConnection: [Object], clear_interval: 86400 },
     state: 'connected',
     generate: [Function],
     db: 
      Db {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        s: [Object],
        serverConfig: [Getter],
        bufferMaxEntries: [Getter],
        databaseName: [Getter] },
     collectionReadyPromise: Promise { [Object] },
     collection: Collection { s: [Object] } },
  sessionID: 'R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL',
  session: 
   Session {
     cookie: 
      { path: '/',
        _expires: 2018-02-06T17:56:24.828Z,
        originalMaxAge: 86399999,
        httpOnly: true },
     passport: { user: 'xchen@contracosta.courts.ca.gov' } },
  secret: undefined,
  cookies: 
   { 'connect.sid': 's:R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw++TohQY8/YlSxxXW1AgPhmysT1xLoD7PEkUE',
     'passport-aad.1517853384826.fbd08e9a6335a4c3df307cd1824127115bca73822dbcf20d65d321c28584c7832bc197726ccd63501a4d780107dc29c8e041c58c50e3bb46757e320311401022b2b0511e358be49caa24cb006b8658a095e242755698b2a6e0dd2f8b331ad25f356a068ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.7cffacc3b0c81c91beb547568fd1efb3': '0' },
  signedCookies: {},
  body: 
   { code: 'AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzCKu4-Rs7rstOUqALJ66-2EcZj-MnFNyjt-c0yyik32rr9gle4zn2yVoWDahqzsCxBLcMbTVIkXUOep2LVUmXDCAbpCmx0LmKbAsdyjG54XDVGSebDVObzq2H6OGMnHHRZNbKA-dq7YJKphrENn3iFz_Y107Be2xpzHvmkk6Qx2wsPfoHdIxk4ZKAlLdA7OHTqGANryIKxuV2l52CUBumAEWj14SuKE412WKt7B09yaTWtVbUNS1p0tKQtIj31yuMiptXmn8GdGqsK_ypPILMLSev3OEVu7FH4BAmccNJv_pwmiIi6HjuyJEGp44GH1PKlnq-6tfFRiUcjYD-IkV11doGMgX_FN29gRJo6ItGwdygTKeKKRhL_650YXoyU1GWNJIjsCSGSV4hgaPaUHhJUYmMNE5HBwoJYkU7aBpt3rvmXdno_NHOP1-ruudcRZhdGS3IFWO5YRvcp4TUH2EOewoN2-BHGbDh-yayznb8rdshYWJUXYknffjpQC5Xu9i3-nKsosQtjzXrXoBE79WUvg09CZoNL7cvEUVDXObHqqrKVoybubdyrFHnc3eq1duuNKkUjEJBASTZRongwulqis4tAg8Q7XQ9SYYT_9kjinsgAA',
     id_token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUzMDgzLCJuYmYiOjE1MTc4NTMwODMsImV4cCI6MTUxNzg1Njk4MywiYWlvIjoiQVNRQTIvOEdBQUFBUmMwVW9oRm8wUm5oK1l1dFp4Vmt3VHZnYThsL3k1VWFyK1d2cTRxandjcz0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6IjNUMWFleVhmdWpfRU9OSUhxWFFZdWciLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoiYUd3QkMyT1Uza2FhWUV0UjFiTmRWU0dhMXVyYTZMd3oiLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6IjgtbWEtYVhMVFV5THotY3lINEFZQUEiLCJ2ZXIiOiIxLjAifQ.PUyPAi8DmTZ_EwAYurS0GvUBBIvibDpC0GbScB3DcObIxekubd12zS5G9n4syZapnBlciYLXGAoWfarre95TsfL7EnNCB8usCG5tnUbT6D9GDCNMSl3-z8CcB18ES6_RffLpcfJj7BGlCWQwXKUOIwGUB5HLFZ9wlEgiOFcw0rqb_HCw0v6WdIe7b_8wus4VjvlbFOkEiWA-a5_FFK9As-bqMJZGthW1IxDVla56eokV40mA2YPwMMxkXKqiMP1M6yp028sBkGvbqwO1P9AnRFluMbCviIT71PaAbnC0h0MMuUJT8wDSk_1M1cMDC6yqPNqCKqr59jcilANkxmIKoA',
     state: 'my_state',
     session_state: 'a4eab50d-afe3-40e1-92b7-517677a51945' },
  _body: true,
  length: undefined,
  read: [Function],
  _startAt: [ 733294, 834573159 ],
  _startTime: 2018-02-05T17:56:25.174Z,
  _remoteAddress: '::1',
  _passport: 
   { instance: 
      Authenticator {
        _key: 'passport',
        _strategies: [Object],
        _serializers: [Object],
        _deserializers: [Object],
        _infoTransformers: [],
        _framework: [Object],
        _userProperty: 'user',
        Authenticator: [Function: Authenticator],
        Passport: [Function: Authenticator],
        Strategy: [Object],
        strategies: [Object] },
     session: { user: 'xchen@contracosta.courts.ca.gov' } },
  user: 
   { _id: 5a737e49e440d2445c40b21c,
     updatedAt: 2018-02-01T20:53:29.268Z,
     createdAt: 2018-02-01T20:53:29.268Z,
     authType: 'azure',
     email: 'xchen@contracosta.courts.ca.gov',
     __v: 0,
     role: 'Member',
     cases: [],
     profile: { firstName: 'Xi', lastName: 'Chen' } },
  route: 
   Route {
     path: '/api/auth/openid/return',
     stack: [ [Object], [Object] ],
     methods: { post: true } },
  authInfo: {} }
[0mPOST /api/auth/openid/return [31m500 [0m507.569 ms - 3354[0m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `babel-node index.js --presets es2015,stage-2`[39m
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":40,"msg":"Using http for redirectUrl is not recommended, please consider using https","time":"2018-02-05T17:57:17.710Z","v":0}
C:\Users\xichentop\Documents\ContraCostaInternship\mainsite-xc\server
Connected to DB
deserializing user...
adding header
we are getting a get request
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":30,"msg":"metadataUrl is: https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9","time":"2018-02-05T17:57:36.261Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":30,"msg":"received the following items in params: {\"policy\":null,\"cachekey\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":{\"url\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":null,\"authtype\":\"oidc\"}}","time":"2018-02-05T17:57:36.261Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":7876,"level":30,"msg":"Parsing JSON retreived from the endpoint","time":"2018-02-05T17:57:36.608Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":7876,"level":30,"msg":"Request to update the Open ID Connect Metadata","time":"2018-02-05T17:57:36.608Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":7876,"level":30,"msg":"Algorithm retrieved was:  [ 'RS256' ]","time":"2018-02-05T17:57:36.609Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":7876,"level":30,"msg":"Issuer we are using is:  https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/","time":"2018-02-05T17:57:36.609Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":7876,"level":30,"msg":"Key Endpoint we will use is:  https://login.microsoftonline.com/common/discovery/keys","time":"2018-02-05T17:57:36.609Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":7876,"level":30,"msg":"Authentication endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/authorize","time":"2018-02-05T17:57:36.609Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":7876,"level":30,"msg":"Token endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/token","time":"2018-02-05T17:57:36.609Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":7876,"level":30,"msg":"User info endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/openid/userinfo","time":"2018-02-05T17:57:36.609Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":7876,"level":30,"msg":"The logout endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/logout","time":"2018-02-05T17:57:36.609Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":30,"msg":"entering Strategy.prototype._flowInitializationHandler","time":"2018-02-05T17:57:36.749Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":30,"msg":"We are sending the response_type:  code id_token","time":"2018-02-05T17:57:36.749Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":30,"msg":"We are sending the response_mode:  form_post","time":"2018-02-05T17:57:36.749Z","v":0}
[0mGET /api/auth/azure-login [36m302 [0m570.841 ms - 0[0m
deserializing user...
adding header
we have received a post request:  IncomingMessage {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 16384,
     buffer: BufferList { head: null, tail: null, length: 0 },
     length: 0,
     pipes: null,
     pipesCount: 0,
     flowing: true,
     ended: true,
     endEmitted: true,
     reading: false,
     sync: true,
     needReadable: false,
     emittedReadable: false,
     readableListening: false,
     resumeScheduled: false,
     defaultEncoding: 'utf8',
     ranOut: false,
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: false,
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  socket: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 21153,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 25170,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25308 } },
  connection: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 21153,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 25170,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25308 } },
  httpVersionMajor: 1,
  httpVersionMinor: 1,
  httpVersion: '1.1',
  complete: true,
  headers: 
   { host: 'localhost:3000',
     connection: 'keep-alive',
     'content-length': '2231',
     'cache-control': 'max-age=0',
     'upgrade-insecure-requests': '1',
     origin: 'null',
     'content-type': 'application/x-www-form-urlencoded',
     'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'accept-encoding': 'gzip, deflate, br',
     'accept-language': 'en-US,en;q=0.9',
     cookie: 'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517853456751.fbd08e9a6335a4c3df307cd1824127115dd326bf2cb3f2435fab2fd5928ce3802afed86d73e76a5b1c53755e25a0578be041c58c50e3bb46757e320311401022b2b051313c86f7eadc1ef06a44ca558e9ae57d050ca0bd8ae9e32d8e7e12dc0a0e681f8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.fbf9a79b242da0c2f48bf4c60289499c=0' },
  rawHeaders: 
   [ 'Host',
     'localhost:3000',
     'Connection',
     'keep-alive',
     'Content-Length',
     '2231',
     'Cache-Control',
     'max-age=0',
     'Upgrade-Insecure-Requests',
     '1',
     'Origin',
     'null',
     'Content-Type',
     'application/x-www-form-urlencoded',
     'User-Agent',
     'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     'Accept',
     'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'Accept-Encoding',
     'gzip, deflate, br',
     'Accept-Language',
     'en-US,en;q=0.9',
     'Cookie',
     'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517853456751.fbd08e9a6335a4c3df307cd1824127115dd326bf2cb3f2435fab2fd5928ce3802afed86d73e76a5b1c53755e25a0578be041c58c50e3bb46757e320311401022b2b051313c86f7eadc1ef06a44ca558e9ae57d050ca0bd8ae9e32d8e7e12dc0a0e681f8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.fbf9a79b242da0c2f48bf4c60289499c=0' ],
  trailers: {},
  rawTrailers: [],
  upgrade: false,
  url: '/api/auth/openid/return',
  method: 'POST',
  statusCode: null,
  statusMessage: null,
  client: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 21153,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 25170,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25308 } },
  _consuming: true,
  _dumped: false,
  next: [Function: next],
  baseUrl: '',
  originalUrl: '/api/auth/openid/return',
  _parsedUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  params: {},
  query: {},
  res: 
   ServerResponse {
     domain: null,
     _events: { finish: [Object], end: [Function: onevent] },
     _eventsCount: 2,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: false,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: true,
     useChunkedEncodingByDefault: true,
     sendDate: true,
     _removedHeader: {},
     _contentLength: null,
     _hasBody: true,
     _trailer: '',
     finished: false,
     _headerSent: false,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1773,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 25170,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1773,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 25170,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     _header: null,
     _headers: 
      { 'x-powered-by': 'Express',
        'access-control-allow-origin': '*',
        'access-control-allow-methods': 'PUT, GET, POST, DELETE, OPTIONS',
        'access-control-allow-headers': 'Origin, X-Requested-With, Content-Type, Accept, Authorization, Access-Control-Allow-Credentials',
        'access-control-allow-credentials': 'true' },
     _headerNames: 
      { 'x-powered-by': 'X-Powered-By',
        'access-control-allow-origin': 'Access-Control-Allow-Origin',
        'access-control-allow-methods': 'Access-Control-Allow-Methods',
        'access-control-allow-headers': 'Access-Control-Allow-Headers',
        'access-control-allow-credentials': 'Access-Control-Allow-Credentials' },
     _onPendingData: [Function: updateOutgoingData],
     req: [Circular],
     locals: {},
     writeHead: [Function: writeHead],
     end: [Function: end],
     _startAt: undefined,
     _startTime: undefined,
     __onFinished: { [Function: listener] queue: [Object] } },
  _parsedOriginalUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  sessionStore: 
   MongoStore {
     domain: null,
     _events: 
      { disconnect: [Function: ondisconnect],
        connect: [Function: onconnect] },
     _eventsCount: 2,
     _maxListeners: undefined,
     ttl: 1209600,
     collectionName: 'sessions',
     autoRemove: 'native',
     autoRemoveInterval: 10,
     transformFunctions: 
      { serialize: [Function: stringify],
        unserialize: [Function: parse] },
     options: { mongooseConnection: [Object], clear_interval: 86400 },
     state: 'connected',
     generate: [Function],
     db: 
      Db {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        s: [Object],
        serverConfig: [Getter],
        bufferMaxEntries: [Getter],
        databaseName: [Getter] },
     collectionReadyPromise: Promise { [Object] },
     collection: Collection { s: [Object] } },
  sessionID: 'R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL',
  session: 
   Session {
     cookie: 
      { path: '/',
        _expires: 2018-02-06T17:57:36.752Z,
        originalMaxAge: 86399999,
        httpOnly: true },
     passport: { user: 'xchen@contracosta.courts.ca.gov' } },
  secret: undefined,
  cookies: 
   { 'connect.sid': 's:R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw++TohQY8/YlSxxXW1AgPhmysT1xLoD7PEkUE',
     'passport-aad.1517853456751.fbd08e9a6335a4c3df307cd1824127115dd326bf2cb3f2435fab2fd5928ce3802afed86d73e76a5b1c53755e25a0578be041c58c50e3bb46757e320311401022b2b051313c86f7eadc1ef06a44ca558e9ae57d050ca0bd8ae9e32d8e7e12dc0a0e681f8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.fbf9a79b242da0c2f48bf4c60289499c': '0' },
  signedCookies: {},
  body: 
   { code: 'AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzNfWHkTEXE36aj-IQcBXcR6KYwpTxKOpsFju55Lx3u2yBw80uBqndUsKfS2HsxfhnA3ae8nvmK0iTgFcRma2RQUGPEJOaVthvp4_G4tkuiJsxN-6m0CIYSpLIg8j2hNrWUqX9BESUByv7574TTHoN0o0mAKbiZZCLE7uXFyl1o3YTapnIvh8VY6MO-IY2nEa2XT2N5_BSSn7TeqEYXjwhLMPCrpaXQCfBfudXHvipeGE7xBr6hBsB6qXZ4pTsV5rXlbjSXNBpyTtqpZ6kDkPNdGrDxDZetsx24drj3gSoStNq6Ko9OInMxV1_i88NEt1ywqKvNNvduuZDz9m-m85vEpBQYwIahC-p9wF-_yROrBIh107AmPWRdV8GwFPCzHys7sbk98kj6ev-5dugMPWALJYz1x2wNJPg6hv6g7FVLK_vkw22JSp7BqkPTVELvdeoO8v0deqjZOxL579iWbyMEnra55_K-JxAnkdS1onjLDXatx4sgRdvtP71JDX48SlRMIHN4_dhfeepGupYfRXIIDuedp2L2XHM2fU-9jqYoGwQOh0188VtPN1TqWwMuKwjCML09XxWvy4DmYux99ITTJm1XjLyBp08eu3oc5sLCoQgAA',
     id_token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUzMTU1LCJuYmYiOjE1MTc4NTMxNTUsImV4cCI6MTUxNzg1NzA1NSwiYWlvIjoiQVNRQTIvOEdBQUFBQmZ1b2xBQVhsRml4SWcvUzQ5b1AwRnpDbzlZNkZSTW5pc3lFWktScTJnZz0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6IjB1Mzc3a0Nyd0VKSExjck0yYUVLTFEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoiTk56UTVEdW5ZRC1sd0pzbUE4dmt6WnljNDh6b2N3dWMiLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6IkEyOXh5S1hFVlVLY3ZLUEJqNjBYQUEiLCJ2ZXIiOiIxLjAifQ.Quamlvm2ukWMou85NdbPkvs_6BMGiNyayvzx1xw8mk48wBixb99geOeisMzUaNNtz8CsTE8hKyeWkhj7rnqCdlqaCC1QKYLqg4n6vh8HgU2BTTnucHpxD7Rp1QxN3yCewCwKZIAQdLlXaskKiUT5mca6SG8mfwxvNOGwmfNUhGlkxQxllFPDp6OZWW5qQNE71hQzLlFFyywu9KWTVxAvc8Ej4-vxo8ceeG5k_1ubFTtAvDdCoM9nckMLJIX0jOovuh7ZcCv6pWwaujaGZ7XYaYeRin4IMEfpQ7nUybDZG5QmMiBVNGzFDonZHmiAuMe4IAxtKbDEb90lvUQkQZxU6w',
     state: 'CUSTOMCm0KSAO7VHgHsbG1VMxMYSYycWY3k8G2my_state',
     session_state: 'a4eab50d-afe3-40e1-92b7-517677a51945' },
  _body: true,
  length: undefined,
  read: [Function],
  _startAt: [ 733366, 717580300 ],
  _startTime: 2018-02-05T17:57:37.058Z,
  _remoteAddress: '::1',
  _passport: 
   { instance: 
      Authenticator {
        _key: 'passport',
        _strategies: [Object],
        _serializers: [Object],
        _deserializers: [Object],
        _infoTransformers: [],
        _framework: [Object],
        _userProperty: 'user',
        Authenticator: [Function: Authenticator],
        Passport: [Function: Authenticator],
        Strategy: [Object],
        strategies: [Object] },
     session: { user: 'xchen@contracosta.courts.ca.gov' } },
  user: 
   { _id: 5a737e49e440d2445c40b21c,
     updatedAt: 2018-02-01T20:53:29.268Z,
     createdAt: 2018-02-01T20:53:29.268Z,
     authType: 'azure',
     email: 'xchen@contracosta.courts.ca.gov',
     __v: 0,
     role: 'Member',
     cases: [],
     profile: { firstName: 'Xi', lastName: 'Chen' } },
  route: 
   Route {
     path: '/api/auth/openid/return',
     stack: [ [Object], [Object] ],
     methods: { post: true } } }
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":30,"msg":"metadataUrl is: https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9","time":"2018-02-05T17:57:37.150Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":30,"msg":"received the following items in params: {\"id_token\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUzMTU1LCJuYmYiOjE1MTc4NTMxNTUsImV4cCI6MTUxNzg1NzA1NSwiYWlvIjoiQVNRQTIvOEdBQUFBQmZ1b2xBQVhsRml4SWcvUzQ5b1AwRnpDbzlZNkZSTW5pc3lFWktScTJnZz0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6IjB1Mzc3a0Nyd0VKSExjck0yYUVLTFEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoiTk56UTVEdW5ZRC1sd0pzbUE4dmt6WnljNDh6b2N3dWMiLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6IkEyOXh5S1hFVlVLY3ZLUEJqNjBYQUEiLCJ2ZXIiOiIxLjAifQ.Quamlvm2ukWMou85NdbPkvs_6BMGiNyayvzx1xw8mk48wBixb99geOeisMzUaNNtz8CsTE8hKyeWkhj7rnqCdlqaCC1QKYLqg4n6vh8HgU2BTTnucHpxD7Rp1QxN3yCewCwKZIAQdLlXaskKiUT5mca6SG8mfwxvNOGwmfNUhGlkxQxllFPDp6OZWW5qQNE71hQzLlFFyywu9KWTVxAvc8Ej4-vxo8ceeG5k_1ubFTtAvDdCoM9nckMLJIX0jOovuh7ZcCv6pWwaujaGZ7XYaYeRin4IMEfpQ7nUybDZG5QmMiBVNGzFDonZHmiAuMe4IAxtKbDEb90lvUQkQZxU6w\",\"code\":\"AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzNfWHkTEXE36aj-IQcBXcR6KYwpTxKOpsFju55Lx3u2yBw80uBqndUsKfS2HsxfhnA3ae8nvmK0iTgFcRma2RQUGPEJOaVthvp4_G4tkuiJsxN-6m0CIYSpLIg8j2hNrWUqX9BESUByv7574TTHoN0o0mAKbiZZCLE7uXFyl1o3YTapnIvh8VY6MO-IY2nEa2XT2N5_BSSn7TeqEYXjwhLMPCrpaXQCfBfudXHvipeGE7xBr6hBsB6qXZ4pTsV5rXlbjSXNBpyTtqpZ6kDkPNdGrDxDZetsx24drj3gSoStNq6Ko9OInMxV1_i88NEt1ywqKvNNvduuZDz9m-m85vEpBQYwIahC-p9wF-_yROrBIh107AmPWRdV8GwFPCzHys7sbk98kj6ev-5dugMPWALJYz1x2wNJPg6hv6g7FVLK_vkw22JSp7BqkPTVELvdeoO8v0deqjZOxL579iWbyMEnra55_K-JxAnkdS1onjLDXatx4sgRdvtP71JDX48SlRMIHN4_dhfeepGupYfRXIIDuedp2L2XHM2fU-9jqYoGwQOh0188VtPN1TqWwMuKwjCML09XxWvy4DmYux99ITTJm1XjLyBp08eu3oc5sLCoQgAA\",\"state\":\"CUSTOMCm0KSAO7VHgHsbG1VMxMYSYycWY3k8G2my_state\",\"nonce\":\"NNzQ5DunYD-lwJsmA8vkzZyc48zocwuc\",\"resource\":\"https://graph.windows.net\",\"cachekey\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":{\"url\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":null,\"authtype\":\"oidc\"}}","time":"2018-02-05T17:57:37.150Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":30,"msg":"entering Strategy.prototype._hybridFlowHandler, received code: AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzNfWHkTEXE36aj-IQcBXcR6KYwpTxKOpsFju55Lx3u2yBw80uBqndUsKfS2HsxfhnA3ae8nvmK0iTgFcRma2RQUGPEJOaVthvp4_G4tkuiJsxN-6m0CIYSpLIg8j2hNrWUqX9BESUByv7574TTHoN0o0mAKbiZZCLE7uXFyl1o3YTapnIvh8VY6MO-IY2nEa2XT2N5_BSSn7TeqEYXjwhLMPCrpaXQCfBfudXHvipeGE7xBr6hBsB6qXZ4pTsV5rXlbjSXNBpyTtqpZ6kDkPNdGrDxDZetsx24drj3gSoStNq6Ko9OInMxV1_i88NEt1ywqKvNNvduuZDz9m-m85vEpBQYwIahC-p9wF-_yROrBIh107AmPWRdV8GwFPCzHys7sbk98kj6ev-5dugMPWALJYz1x2wNJPg6hv6g7FVLK_vkw22JSp7BqkPTVELvdeoO8v0deqjZOxL579iWbyMEnra55_K-JxAnkdS1onjLDXatx4sgRdvtP71JDX48SlRMIHN4_dhfeepGupYfRXIIDuedp2L2XHM2fU-9jqYoGwQOh0188VtPN1TqWwMuKwjCML09XxWvy4DmYux99ITTJm1XjLyBp08eu3oc5sLCoQgAA, received id_token: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUzMTU1LCJuYmYiOjE1MTc4NTMxNTUsImV4cCI6MTUxNzg1NzA1NSwiYWlvIjoiQVNRQTIvOEdBQUFBQmZ1b2xBQVhsRml4SWcvUzQ5b1AwRnpDbzlZNkZSTW5pc3lFWktScTJnZz0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6IjB1Mzc3a0Nyd0VKSExjck0yYUVLTFEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoiTk56UTVEdW5ZRC1sd0pzbUE4dmt6WnljNDh6b2N3dWMiLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6IkEyOXh5S1hFVlVLY3ZLUEJqNjBYQUEiLCJ2ZXIiOiIxLjAifQ.Quamlvm2ukWMou85NdbPkvs_6BMGiNyayvzx1xw8mk48wBixb99geOeisMzUaNNtz8CsTE8hKyeWkhj7rnqCdlqaCC1QKYLqg4n6vh8HgU2BTTnucHpxD7Rp1QxN3yCewCwKZIAQdLlXaskKiUT5mca6SG8mfwxvNOGwmfNUhGlkxQxllFPDp6OZWW5qQNE71hQzLlFFyywu9KWTVxAvc8Ej4-vxo8ceeG5k_1ubFTtAvDdCoM9nckMLJIX0jOovuh7ZcCv6pWwaujaGZ7XYaYeRin4IMEfpQ7nUybDZG5QmMiBVNGzFDonZHmiAuMe4IAxtKbDEb90lvUQkQZxU6w","time":"2018-02-05T17:57:37.152Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":30,"msg":"token decoded:  { header: \n   { typ: 'JWT',\n     alg: 'RS256',\n     x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n     kid: 'z44wMdHu8wKsumrbfaK98qxs5YI' },\n  payload: \n   { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n     iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n     iat: 1517853155,\n     nbf: 1517853155,\n     exp: 1517857055,\n     aio: 'ASQA2/8GAAAABfuolAAXlFixIg/S49oP0FzCo9Y6FRMnisyEZKRq2gg=',\n     amr: [ 'pwd' ],\n     c_hash: '0u377kCrwEJHLcrM2aEKLQ',\n     family_name: 'Chen',\n     given_name: 'Xi',\n     ipaddr: '73.41.83.228',\n     name: 'Xi Chen',\n     nonce: 'NNzQ5DunYD-lwJsmA8vkzZyc48zocwuc',\n     oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n     onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n     sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n     tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n     unique_name: 'XChen@contracosta.courts.ca.gov',\n     upn: 'XChen@contracosta.courts.ca.gov',\n     uti: 'A29xyKXEVUKcvKPBj60XAA',\n     ver: '1.0' },\n  signature: 'Quamlvm2ukWMou85NdbPkvs_6BMGiNyayvzx1xw8mk48wBixb99geOeisMzUaNNtz8CsTE8hKyeWkhj7rnqCdlqaCC1QKYLqg4n6vh8HgU2BTTnucHpxD7Rp1QxN3yCewCwKZIAQdLlXaskKiUT5mca6SG8mfwxvNOGwmfNUhGlkxQxllFPDp6OZWW5qQNE71hQzLlFFyywu9KWTVxAvc8Ej4-vxo8ceeG5k_1ubFTtAvDdCoM9nckMLJIX0jOovuh7ZcCv6pWwaujaGZ7XYaYeRin4IMEfpQ7nUybDZG5QmMiBVNGzFDonZHmiAuMe4IAxtKbDEb90lvUQkQZxU6w' }","time":"2018-02-05T17:57:37.154Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":7876,"level":30,"msg":"working on key: { kty: 'RSA',\n  use: 'sig',\n  kid: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  n: 'p3HhMQsqmgSjeiDsZ1ay-UAFgFMdBYgGGkGa2L0ew6_q3b2x9Ccdru_amVp1HXV2FVwbpK0HYsTSRvWIiCRRT-AgMSIlap7qlg8-iYvdFIJsorf84-sRN9Iq3F1pKD-W9vqsitcEbzljHCLSS2vUKSb7itwjc_AKjky3cX5ndMupQESZNTbiwanM9dAJ7K87pURXN66lS_q9u7wxWvjc3iLEp25PU_06moGDMe5BWuD6Rb_pdFM1plm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wSbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0Q',\n  e: 'AQAB',\n  x5c: [ 'MIIDBTCCAe2gAwIBAgIQaD0+a2FNl5JMaE2/7KUP5zANBgkqhkiG9w0BAQsFADAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MB4XDTE3MTEyODAwMDAwMFoXDTE5MTEyOTAwMDAwMFowLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKdx4TELKpoEo3og7GdWsvlABYBTHQWIBhpBmti9HsOv6t29sfQnHa7v2pladR11dhVcG6StB2LE0kb1iIgkUU/gIDEiJWqe6pYPPomL3RSCbKK3/OPrETfSKtxdaSg/lvb6rIrXBG85Yxwi0ktr1Ckm+4rcI3PwCo5Mt3F+Z3TLqUBEmTU24sGpzPXQCeyvO6VEVzeupUv6vbu8MVr43N4ixKduT1P9OpqBgzHuQVrg+kW/6XRTNaZZthTlITG8VEa8I02S2Q4VyosdzcrMQmRp75MTA2YKdqTexTKmWKaXFIcGCbvMEm35sIfIVziQ8YMSEC+7GBoh3k2g2BFRgtECAwEAAaMhMB8wHQYDVR0OBBYEFGpho/kx4FeBzTTBIbYVWfFdGIblMA0GCSqGSIb3DQEBCwUAA4IBAQBgaeYvuV4sYJZNPXbxN6FIc0oA4bCg1+DFalT3qzW0bFbl7pXP5YPY/adZlT8+cTznjMgzPPvcXaQdcytR16YqHJVX0ik67NrrQ3g0TtGLc42SuzE+6awryiLQY0Zd799bJwrRcDZUqm/6jKOEOd+utf+3o+VU57w+n7iQLuSL1mKYGMsyzMYCj6xVtYl75iam86leT0/tlXHJ8oqxU5w3xVY6P7v0Sz2UteQNQvhKi6R1/cjfiJUp+OzHpaEor6ls7HSvojY2zm1DIaH6EBp2L9TBFt8IALAEN5hX6XYpKmCHRUlzYwoWo7YwzKiot0XdbDW+zPKGPKtIlbg6cw/+' ] }","time":"2018-02-05T17:57:37.155Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":30,"msg":"PEMkey generated: -----BEGIN RSA PUBLIC KEY-----\nMIIBCgKCAQEAp3HhMQsqmgSjeiDsZ1ay+UAFgFMdBYgGGkGa2L0ew6/q3b2x9Ccd\nru/amVp1HXV2FVwbpK0HYsTSRvWIiCRRT+AgMSIlap7qlg8+iYvdFIJsorf84+sR\nN9Iq3F1pKD+W9vqsitcEbzljHCLSS2vUKSb7itwjc/AKjky3cX5ndMupQESZNTbi\nwanM9dAJ7K87pURXN66lS/q9u7wxWvjc3iLEp25PU/06moGDMe5BWuD6Rb/pdFM1\nplm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wS\nbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0QIDAQAB\n-----END RSA PUBLIC KEY-----\n","time":"2018-02-05T17:57:37.155Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":30,"msg":"Claims received:  { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n  iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n  iat: 1517853155,\n  nbf: 1517853155,\n  exp: 1517857055,\n  aio: 'ASQA2/8GAAAABfuolAAXlFixIg/S49oP0FzCo9Y6FRMnisyEZKRq2gg=',\n  amr: [ 'pwd' ],\n  c_hash: '0u377kCrwEJHLcrM2aEKLQ',\n  family_name: 'Chen',\n  given_name: 'Xi',\n  ipaddr: '73.41.83.228',\n  name: 'Xi Chen',\n  nonce: 'NNzQ5DunYD-lwJsmA8vkzZyc48zocwuc',\n  oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n  onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n  sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n  tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n  unique_name: 'XChen@contracosta.courts.ca.gov',\n  upn: 'XChen@contracosta.courts.ca.gov',\n  uti: 'A29xyKXEVUKcvKPBj60XAA',\n  ver: '1.0' }","time":"2018-02-05T17:57:37.158Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":30,"msg":"entering Strategy.prototype._authCodeFlowHandler, received code: AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzNfWHkTEXE36aj-IQcBXcR6KYwpTxKOpsFju55Lx3u2yBw80uBqndUsKfS2HsxfhnA3ae8nvmK0iTgFcRma2RQUGPEJOaVthvp4_G4tkuiJsxN-6m0CIYSpLIg8j2hNrWUqX9BESUByv7574TTHoN0o0mAKbiZZCLE7uXFyl1o3YTapnIvh8VY6MO-IY2nEa2XT2N5_BSSn7TeqEYXjwhLMPCrpaXQCfBfudXHvipeGE7xBr6hBsB6qXZ4pTsV5rXlbjSXNBpyTtqpZ6kDkPNdGrDxDZetsx24drj3gSoStNq6Ko9OInMxV1_i88NEt1ywqKvNNvduuZDz9m-m85vEpBQYwIahC-p9wF-_yROrBIh107AmPWRdV8GwFPCzHys7sbk98kj6ev-5dugMPWALJYz1x2wNJPg6hv6g7FVLK_vkw22JSp7BqkPTVELvdeoO8v0deqjZOxL579iWbyMEnra55_K-JxAnkdS1onjLDXatx4sgRdvtP71JDX48SlRMIHN4_dhfeepGupYfRXIIDuedp2L2XHM2fU-9jqYoGwQOh0188VtPN1TqWwMuKwjCML09XxWvy4DmYux99ITTJm1XjLyBp08eu3oc5sLCoQgAA","time":"2018-02-05T17:57:37.159Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":30,"msg":"In _getAccessTokenBySecretOrAssertion: we are using client secret","time":"2018-02-05T17:57:37.159Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":30,"msg":"received id_token:  eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUzMTU1LCJuYmYiOjE1MTc4NTMxNTUsImV4cCI6MTUxNzg1NzA1NSwiYWlvIjoiWTJOZ1lJZ29kbm9YTi91MjhrYlBBUFAxTFV3ZTg5cGVwbTlTbUpEeS9yMXhyTUxMT2YwQSIsImFtciI6WyJwd2QiXSwiZmFtaWx5X25hbWUiOiJDaGVuIiwiZ2l2ZW5fbmFtZSI6IlhpIiwiaXBhZGRyIjoiNzMuNDEuODMuMjI4IiwibmFtZSI6IlhpIENoZW4iLCJub25jZSI6Ik5OelE1RHVuWUQtbHdKc21BOHZrelp5YzQ4em9jd3VjIiwib2lkIjoiOWY1NTRmZjItZDQ1NS00OTEyLWJjMTctZmI5MGFiNjc3MjY2Iiwib25wcmVtX3NpZCI6IlMtMS01LTIxLTQ5NzQwNDg1NS01OTc2MzU5OTItOTg4ODgyNTc2LTE0MjgwIiwic3ViIjoiekZkcVFleVYtX1pOZU03N2ZkeU5zRzhXOTR6Mnc5WlN2VTZmOWpOYjF6OCIsInRpZCI6IjhjYTlkOGYxLWQ5NzYtNDQ0NS1hM2NjLTNmZmMzZTI5YTNmZiIsInVuaXF1ZV9uYW1lIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInVwbiI6IlhDaGVuQGNvbnRyYWNvc3RhLmNvdXJ0cy5jYS5nb3YiLCJ1dGkiOiJvT0g4MkVOTW5FeW44MlVxRGJFWkFBIiwidmVyIjoiMS4wIn0.PT4oZmai_KyyrGGN6H7yUNrHCw8Vshsc4UH4Gg0J9pA0ezr9VGKKcN7MDoDeYW9na6XIbUrgrBrTNhvf3GYPrPjrpmxbZczHldALu4fYJ9PSDI-Z6RaCdITjjXoepDZyPlHllmvjd6yVlkgfqVpW99RR5ahfIuun0nScMK-czU3MYVAUFS4a4MPvc8nOVFESt07KnF7VKvT_FCfxbiibf9hQuVpURF_LNulQZiqlObbocBagHQ6D6fV-BnaUEXsbidWJlDwZ_wGvO4BgMunMOrr-asoavr5kOGJc32mI2nSXs0rvDiFn3tZl2IqVmXljGF-v8MoVn_vphZpL1do2EA","time":"2018-02-05T17:57:37.423Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":30,"msg":"received access_token:  eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiJodHRwczovL2dyYXBoLndpbmRvd3MubmV0IiwiaXNzIjoiaHR0cHM6Ly9zdHMud2luZG93cy5uZXQvOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmLyIsImlhdCI6MTUxNzg1MzE1NSwibmJmIjoxNTE3ODUzMTU1LCJleHAiOjE1MTc4NTcwNTUsImFjciI6IjEiLCJhaW8iOiJZMk5nWUxqa0VjRHppS25sVmZsaW1ZV1BSRzA5cklSKzFXek4xcEhLUDdqK3lNR3EwTzhBIiwiYW1yIjpbInB3ZCJdLCJhcHBpZCI6IjJmNmZlYTEyLWUzYzEtNDdkNS1hZTcyLTUyODVjNmVlY2VmMSIsImFwcGlkYWNyIjoiMSIsImZhbWlseV9uYW1lIjoiQ2hlbiIsImdpdmVuX25hbWUiOiJYaSIsImlwYWRkciI6IjczLjQxLjgzLjIyOCIsIm5hbWUiOiJYaSBDaGVuIiwib2lkIjoiOWY1NTRmZjItZDQ1NS00OTEyLWJjMTctZmI5MGFiNjc3MjY2Iiwib25wcmVtX3NpZCI6IlMtMS01LTIxLTQ5NzQwNDg1NS01OTc2MzU5OTItOTg4ODgyNTc2LTE0MjgwIiwicHVpZCI6IjEwMDMzRkZGQTI2RUM5MEMiLCJzY3AiOiJNYWlsLlJlYWQgb2ZmbGluZV9hY2Nlc3Mgb3BlbmlkIHByb2ZpbGUgVXNlci5SZWFkIiwic3ViIjoiNUxlaUFtMk40NDkxYXYtR21MT19XTzVBVWZHTG42Z1Z2OUR1TmhLazBTdyIsInRlbmFudF9yZWdpb25fc2NvcGUiOiJOQSIsInRpZCI6IjhjYTlkOGYxLWQ5NzYtNDQ0NS1hM2NjLTNmZmMzZTI5YTNmZiIsInVuaXF1ZV9uYW1lIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInVwbiI6IlhDaGVuQGNvbnRyYWNvc3RhLmNvdXJ0cy5jYS5nb3YiLCJ1dGkiOiJvT0g4MkVOTW5FeW44MlVxRGJFWkFBIiwidmVyIjoiMS4wIn0.ZoEei4kIHHMYl1oa0AnoK0iykrzlmqE2myjU-xCmhwGv-ziQtrYu_E8fs_rYfTVTKi4jIxu5Fdqd-q0tAUinnYWPEVBX9tlGL0kxj4-uOfkkQJcS-mvxWHK-0HbT9u4M65fYH8F-PREhleYSUqN_jqEun2edkmnyk2NT0NyNuP9zvlrIgPw78dvdPXegPpAkVj8Qb2-qPXyEEF530U25Z4nTIOswy0wFWH8P5m-jwHXRSEBTj4VbM0ovFkuMFPWW40-NWdDkCloiy0HlyfyajG6RTQ2fLf9FBQ5Skm3dn-lVz_UPNFHVcex7qr11oUqGXov2SGKjyEmqJn40LQ1Ttg","time":"2018-02-05T17:57:37.423Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":30,"msg":"received refresh_token:  AQABAAAAAABHh4kmS_aKT5XrjzxRAtHz_kHXhmncBCTur5lOPwWVF12CqTc4diFyQxvzfVtfCnT9iwXPfT4bhiPSXhnxq3qhyOsWSGGjFSlWmca4TFghBmY7JPTAFqYprsIK_Br6vfDPjm1CyQBCcd3opS4VpzJ4Nxfc1fee5FTHPySkSbWhl9wqDaHmF1JbJzN0uZSrpXz4J1C9Jz1hJXfzNVA6a4_oaWF6f_PrAPwPWZq5K0nEPUPOqWFS0GwuvQCszk82Gg6hWGLtCZnERHNXzyN7C4hSqFdXR8-4c3v4xhbTLUYjGunW6bXypapDLk8Ua0TPw_u7S3j8CtzhVPcX92sxfCec3-uH0OKT_-z5322-YGLr0yEZX5Uq95bvMbODmT2budi2a-LNyv0iXCkWh3FUBmDTMwdVBsB3ucreDi7R7vqqzwrskqsLYa559266Ngm97AYngOUqR3fQ6fvqKvJkzNYW6uU3GdNKZAlXDTzC4PJWC5xYQH5TMWT3KTfSMhebUAWurSyOqyrG0TXbOnlH1P_ZB5OHBwPdr-e1cugsv5f4jziS-HRvXz506nrNorlviX9uxyzlMz4_VWkvx26PVh9xryR49LlyII1DIQ_oVQnezL6NoUXd4OUX1M3FtciZMEhcvQMTIooqBiK-Nxnh2M-D9suzbJr6sSDpyQggfoeDDAwhdUlbeMhaf1oZaAkThlLo5d5nHDfHKoURplv0s4NfnU0WKdREC72f0YC9n3Sjg4HtIZSyj5iHZR0nLulKBGDI9jmv4JqoXNWoR7xOAjT7hedXaQ5cdqUIu4subCqGWvM4aiTcY-6aLG-n42v4RlCw0MOMoTUJm58S98Ozz2kVIAA","time":"2018-02-05T17:57:37.423Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":30,"msg":"token decoded:  { header: \n   { typ: 'JWT',\n     alg: 'RS256',\n     x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n     kid: 'z44wMdHu8wKsumrbfaK98qxs5YI' },\n  payload: \n   { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n     iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n     iat: 1517853155,\n     nbf: 1517853155,\n     exp: 1517857055,\n     aio: 'Y2NgYIgodnoXN/u28kbPAPP1LUwe89pepm9SmJDy/r1xrMLLOf0A',\n     amr: [ 'pwd' ],\n     family_name: 'Chen',\n     given_name: 'Xi',\n     ipaddr: '73.41.83.228',\n     name: 'Xi Chen',\n     nonce: 'NNzQ5DunYD-lwJsmA8vkzZyc48zocwuc',\n     oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n     onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n     sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n     tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n     unique_name: 'XChen@contracosta.courts.ca.gov',\n     upn: 'XChen@contracosta.courts.ca.gov',\n     uti: 'oOH82ENMnEyn82UqDbEZAA',\n     ver: '1.0' },\n  signature: 'PT4oZmai_KyyrGGN6H7yUNrHCw8Vshsc4UH4Gg0J9pA0ezr9VGKKcN7MDoDeYW9na6XIbUrgrBrTNhvf3GYPrPjrpmxbZczHldALu4fYJ9PSDI-Z6RaCdITjjXoepDZyPlHllmvjd6yVlkgfqVpW99RR5ahfIuun0nScMK-czU3MYVAUFS4a4MPvc8nOVFESt07KnF7VKvT_FCfxbiibf9hQuVpURF_LNulQZiqlObbocBagHQ6D6fV-BnaUEXsbidWJlDwZ_wGvO4BgMunMOrr-asoavr5kOGJc32mI2nSXs0rvDiFn3tZl2IqVmXljGF-v8MoVn_vphZpL1do2EA' }","time":"2018-02-05T17:57:37.424Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":7876,"level":30,"msg":"working on key: { kty: 'RSA',\n  use: 'sig',\n  kid: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  n: 'p3HhMQsqmgSjeiDsZ1ay-UAFgFMdBYgGGkGa2L0ew6_q3b2x9Ccdru_amVp1HXV2FVwbpK0HYsTSRvWIiCRRT-AgMSIlap7qlg8-iYvdFIJsorf84-sRN9Iq3F1pKD-W9vqsitcEbzljHCLSS2vUKSb7itwjc_AKjky3cX5ndMupQESZNTbiwanM9dAJ7K87pURXN66lS_q9u7wxWvjc3iLEp25PU_06moGDMe5BWuD6Rb_pdFM1plm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wSbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0Q',\n  e: 'AQAB',\n  x5c: [ 'MIIDBTCCAe2gAwIBAgIQaD0+a2FNl5JMaE2/7KUP5zANBgkqhkiG9w0BAQsFADAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MB4XDTE3MTEyODAwMDAwMFoXDTE5MTEyOTAwMDAwMFowLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKdx4TELKpoEo3og7GdWsvlABYBTHQWIBhpBmti9HsOv6t29sfQnHa7v2pladR11dhVcG6StB2LE0kb1iIgkUU/gIDEiJWqe6pYPPomL3RSCbKK3/OPrETfSKtxdaSg/lvb6rIrXBG85Yxwi0ktr1Ckm+4rcI3PwCo5Mt3F+Z3TLqUBEmTU24sGpzPXQCeyvO6VEVzeupUv6vbu8MVr43N4ixKduT1P9OpqBgzHuQVrg+kW/6XRTNaZZthTlITG8VEa8I02S2Q4VyosdzcrMQmRp75MTA2YKdqTexTKmWKaXFIcGCbvMEm35sIfIVziQ8YMSEC+7GBoh3k2g2BFRgtECAwEAAaMhMB8wHQYDVR0OBBYEFGpho/kx4FeBzTTBIbYVWfFdGIblMA0GCSqGSIb3DQEBCwUAA4IBAQBgaeYvuV4sYJZNPXbxN6FIc0oA4bCg1+DFalT3qzW0bFbl7pXP5YPY/adZlT8+cTznjMgzPPvcXaQdcytR16YqHJVX0ik67NrrQ3g0TtGLc42SuzE+6awryiLQY0Zd799bJwrRcDZUqm/6jKOEOd+utf+3o+VU57w+n7iQLuSL1mKYGMsyzMYCj6xVtYl75iam86leT0/tlXHJ8oqxU5w3xVY6P7v0Sz2UteQNQvhKi6R1/cjfiJUp+OzHpaEor6ls7HSvojY2zm1DIaH6EBp2L9TBFt8IALAEN5hX6XYpKmCHRUlzYwoWo7YwzKiot0XdbDW+zPKGPKtIlbg6cw/+' ] }","time":"2018-02-05T17:57:37.424Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":30,"msg":"PEMkey generated: -----BEGIN RSA PUBLIC KEY-----\nMIIBCgKCAQEAp3HhMQsqmgSjeiDsZ1ay+UAFgFMdBYgGGkGa2L0ew6/q3b2x9Ccd\nru/amVp1HXV2FVwbpK0HYsTSRvWIiCRRT+AgMSIlap7qlg8+iYvdFIJsorf84+sR\nN9Iq3F1pKD+W9vqsitcEbzljHCLSS2vUKSb7itwjc/AKjky3cX5ndMupQESZNTbi\nwanM9dAJ7K87pURXN66lS/q9u7wxWvjc3iLEp25PU/06moGDMe5BWuD6Rb/pdFM1\nplm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wS\nbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0QIDAQAB\n-----END RSA PUBLIC KEY-----\n","time":"2018-02-05T17:57:37.424Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":30,"msg":"Claims received:  { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n  iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n  iat: 1517853155,\n  nbf: 1517853155,\n  exp: 1517857055,\n  aio: 'Y2NgYIgodnoXN/u28kbPAPP1LUwe89pepm9SmJDy/r1xrMLLOf0A',\n  amr: [ 'pwd' ],\n  family_name: 'Chen',\n  given_name: 'Xi',\n  ipaddr: '73.41.83.228',\n  name: 'Xi Chen',\n  nonce: 'NNzQ5DunYD-lwJsmA8vkzZyc48zocwuc',\n  oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n  onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n  sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n  tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n  unique_name: 'XChen@contracosta.courts.ca.gov',\n  upn: 'XChen@contracosta.courts.ca.gov',\n  uti: 'oOH82ENMnEyn82UqDbEZAA',\n  ver: '1.0' }","time":"2018-02-05T17:57:37.425Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":7876,"level":30,"msg":"v2 has no userinfo endpoint, using the content in id_token as the profile","time":"2018-02-05T17:57:37.425Z","v":0}
OIDCStrategy invoked
email:  XChen@contracosta.courts.ca.gov
err:  null
user:  { _id: 5a737e49e440d2445c40b21c,
  updatedAt: 2018-02-01T20:53:29.268Z,
  createdAt: 2018-02-01T20:53:29.268Z,
  authType: 'azure',
  email: 'xchen@contracosta.courts.ca.gov',
  __v: 0,
  role: 'Member',
  cases: [],
  profile: { firstName: 'Xi', lastName: 'Chen' } }
serializing user:  { _id: 5a737e49e440d2445c40b21c,
  updatedAt: 2018-02-01T20:53:29.268Z,
  createdAt: 2018-02-01T20:53:29.268Z,
  authType: 'azure',
  email: 'xchen@contracosta.courts.ca.gov',
  __v: 0,
  role: 'Member',
  cases: [],
  profile: { firstName: 'Xi', lastName: 'Chen' } }
We received a posted return from AzureAD:  IncomingMessage {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 16384,
     buffer: BufferList { head: null, tail: null, length: 0 },
     length: 0,
     pipes: null,
     pipesCount: 0,
     flowing: true,
     ended: true,
     endEmitted: true,
     reading: false,
     sync: true,
     needReadable: false,
     emittedReadable: false,
     readableListening: false,
     resumeScheduled: false,
     defaultEncoding: 'utf8',
     ranOut: false,
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: false,
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  socket: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 21153,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 25170,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25308 } },
  connection: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 21153,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 25170,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25308 } },
  httpVersionMajor: 1,
  httpVersionMinor: 1,
  httpVersion: '1.1',
  complete: true,
  headers: 
   { host: 'localhost:3000',
     connection: 'keep-alive',
     'content-length': '2231',
     'cache-control': 'max-age=0',
     'upgrade-insecure-requests': '1',
     origin: 'null',
     'content-type': 'application/x-www-form-urlencoded',
     'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'accept-encoding': 'gzip, deflate, br',
     'accept-language': 'en-US,en;q=0.9',
     cookie: 'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517853456751.fbd08e9a6335a4c3df307cd1824127115dd326bf2cb3f2435fab2fd5928ce3802afed86d73e76a5b1c53755e25a0578be041c58c50e3bb46757e320311401022b2b051313c86f7eadc1ef06a44ca558e9ae57d050ca0bd8ae9e32d8e7e12dc0a0e681f8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.fbf9a79b242da0c2f48bf4c60289499c=0' },
  rawHeaders: 
   [ 'Host',
     'localhost:3000',
     'Connection',
     'keep-alive',
     'Content-Length',
     '2231',
     'Cache-Control',
     'max-age=0',
     'Upgrade-Insecure-Requests',
     '1',
     'Origin',
     'null',
     'Content-Type',
     'application/x-www-form-urlencoded',
     'User-Agent',
     'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     'Accept',
     'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'Accept-Encoding',
     'gzip, deflate, br',
     'Accept-Language',
     'en-US,en;q=0.9',
     'Cookie',
     'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517853456751.fbd08e9a6335a4c3df307cd1824127115dd326bf2cb3f2435fab2fd5928ce3802afed86d73e76a5b1c53755e25a0578be041c58c50e3bb46757e320311401022b2b051313c86f7eadc1ef06a44ca558e9ae57d050ca0bd8ae9e32d8e7e12dc0a0e681f8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.fbf9a79b242da0c2f48bf4c60289499c=0' ],
  trailers: {},
  rawTrailers: [],
  upgrade: false,
  url: '/api/auth/openid/return',
  method: 'POST',
  statusCode: null,
  statusMessage: null,
  client: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 21153,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 25170,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25308 } },
  _consuming: true,
  _dumped: false,
  next: [Function: next],
  baseUrl: '',
  originalUrl: '/api/auth/openid/return',
  _parsedUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  params: {},
  query: {},
  res: 
   ServerResponse {
     domain: null,
     _events: { finish: [Object], end: [Function: onevent] },
     _eventsCount: 2,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: false,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: true,
     useChunkedEncodingByDefault: true,
     sendDate: true,
     _removedHeader: {},
     _contentLength: null,
     _hasBody: true,
     _trailer: '',
     finished: false,
     _headerSent: false,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1773,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 25170,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1773,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 25170,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     _header: null,
     _headers: 
      { 'x-powered-by': 'Express',
        'access-control-allow-origin': '*',
        'access-control-allow-methods': 'PUT, GET, POST, DELETE, OPTIONS',
        'access-control-allow-headers': 'Origin, X-Requested-With, Content-Type, Accept, Authorization, Access-Control-Allow-Credentials',
        'access-control-allow-credentials': 'true',
        'set-cookie': 'passport-aad.1517853456751.fbd08e9a6335a4c3df307cd1824127115dd326bf2cb3f2435fab2fd5928ce3802afed86d73e76a5b1c53755e25a0578be041c58c50e3bb46757e320311401022b2b051313c86f7eadc1ef06a44ca558e9ae57d050ca0bd8ae9e32d8e7e12dc0a0e681f8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.fbf9a79b242da0c2f48bf4c60289499c=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT' },
     _headerNames: 
      { 'x-powered-by': 'X-Powered-By',
        'access-control-allow-origin': 'Access-Control-Allow-Origin',
        'access-control-allow-methods': 'Access-Control-Allow-Methods',
        'access-control-allow-headers': 'Access-Control-Allow-Headers',
        'access-control-allow-credentials': 'Access-Control-Allow-Credentials',
        'set-cookie': 'Set-Cookie' },
     _onPendingData: [Function: updateOutgoingData],
     req: [Circular],
     locals: {},
     writeHead: [Function: writeHead],
     end: [Function: end],
     _startAt: undefined,
     _startTime: undefined,
     __onFinished: { [Function: listener] queue: [Object] } },
  _parsedOriginalUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  sessionStore: 
   MongoStore {
     domain: null,
     _events: 
      { disconnect: [Function: ondisconnect],
        connect: [Function: onconnect] },
     _eventsCount: 2,
     _maxListeners: undefined,
     ttl: 1209600,
     collectionName: 'sessions',
     autoRemove: 'native',
     autoRemoveInterval: 10,
     transformFunctions: 
      { serialize: [Function: stringify],
        unserialize: [Function: parse] },
     options: { mongooseConnection: [Object], clear_interval: 86400 },
     state: 'connected',
     generate: [Function],
     db: 
      Db {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        s: [Object],
        serverConfig: [Getter],
        bufferMaxEntries: [Getter],
        databaseName: [Getter] },
     collectionReadyPromise: Promise { [Object] },
     collection: Collection { s: [Object] } },
  sessionID: 'R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL',
  session: 
   Session {
     cookie: 
      { path: '/',
        _expires: 2018-02-06T17:57:36.752Z,
        originalMaxAge: 86399999,
        httpOnly: true },
     passport: { user: 'xchen@contracosta.courts.ca.gov' } },
  secret: undefined,
  cookies: 
   { 'connect.sid': 's:R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw++TohQY8/YlSxxXW1AgPhmysT1xLoD7PEkUE',
     'passport-aad.1517853456751.fbd08e9a6335a4c3df307cd1824127115dd326bf2cb3f2435fab2fd5928ce3802afed86d73e76a5b1c53755e25a0578be041c58c50e3bb46757e320311401022b2b051313c86f7eadc1ef06a44ca558e9ae57d050ca0bd8ae9e32d8e7e12dc0a0e681f8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.fbf9a79b242da0c2f48bf4c60289499c': '0' },
  signedCookies: {},
  body: 
   { code: 'AQABAAIAAABHh4kmS_aKT5XrjzxRAtHzNfWHkTEXE36aj-IQcBXcR6KYwpTxKOpsFju55Lx3u2yBw80uBqndUsKfS2HsxfhnA3ae8nvmK0iTgFcRma2RQUGPEJOaVthvp4_G4tkuiJsxN-6m0CIYSpLIg8j2hNrWUqX9BESUByv7574TTHoN0o0mAKbiZZCLE7uXFyl1o3YTapnIvh8VY6MO-IY2nEa2XT2N5_BSSn7TeqEYXjwhLMPCrpaXQCfBfudXHvipeGE7xBr6hBsB6qXZ4pTsV5rXlbjSXNBpyTtqpZ6kDkPNdGrDxDZetsx24drj3gSoStNq6Ko9OInMxV1_i88NEt1ywqKvNNvduuZDz9m-m85vEpBQYwIahC-p9wF-_yROrBIh107AmPWRdV8GwFPCzHys7sbk98kj6ev-5dugMPWALJYz1x2wNJPg6hv6g7FVLK_vkw22JSp7BqkPTVELvdeoO8v0deqjZOxL579iWbyMEnra55_K-JxAnkdS1onjLDXatx4sgRdvtP71JDX48SlRMIHN4_dhfeepGupYfRXIIDuedp2L2XHM2fU-9jqYoGwQOh0188VtPN1TqWwMuKwjCML09XxWvy4DmYux99ITTJm1XjLyBp08eu3oc5sLCoQgAA',
     id_token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUzMTU1LCJuYmYiOjE1MTc4NTMxNTUsImV4cCI6MTUxNzg1NzA1NSwiYWlvIjoiQVNRQTIvOEdBQUFBQmZ1b2xBQVhsRml4SWcvUzQ5b1AwRnpDbzlZNkZSTW5pc3lFWktScTJnZz0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6IjB1Mzc3a0Nyd0VKSExjck0yYUVLTFEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoiTk56UTVEdW5ZRC1sd0pzbUE4dmt6WnljNDh6b2N3dWMiLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6IkEyOXh5S1hFVlVLY3ZLUEJqNjBYQUEiLCJ2ZXIiOiIxLjAifQ.Quamlvm2ukWMou85NdbPkvs_6BMGiNyayvzx1xw8mk48wBixb99geOeisMzUaNNtz8CsTE8hKyeWkhj7rnqCdlqaCC1QKYLqg4n6vh8HgU2BTTnucHpxD7Rp1QxN3yCewCwKZIAQdLlXaskKiUT5mca6SG8mfwxvNOGwmfNUhGlkxQxllFPDp6OZWW5qQNE71hQzLlFFyywu9KWTVxAvc8Ej4-vxo8ceeG5k_1ubFTtAvDdCoM9nckMLJIX0jOovuh7ZcCv6pWwaujaGZ7XYaYeRin4IMEfpQ7nUybDZG5QmMiBVNGzFDonZHmiAuMe4IAxtKbDEb90lvUQkQZxU6w',
     state: 'my_state',
     session_state: 'a4eab50d-afe3-40e1-92b7-517677a51945' },
  _body: true,
  length: undefined,
  read: [Function],
  _startAt: [ 733366, 717580300 ],
  _startTime: 2018-02-05T17:57:37.058Z,
  _remoteAddress: '::1',
  _passport: 
   { instance: 
      Authenticator {
        _key: 'passport',
        _strategies: [Object],
        _serializers: [Object],
        _deserializers: [Object],
        _infoTransformers: [],
        _framework: [Object],
        _userProperty: 'user',
        Authenticator: [Function: Authenticator],
        Passport: [Function: Authenticator],
        Strategy: [Object],
        strategies: [Object] },
     session: { user: 'xchen@contracosta.courts.ca.gov' } },
  user: 
   { _id: 5a737e49e440d2445c40b21c,
     updatedAt: 2018-02-01T20:53:29.268Z,
     createdAt: 2018-02-01T20:53:29.268Z,
     authType: 'azure',
     email: 'xchen@contracosta.courts.ca.gov',
     __v: 0,
     role: 'Member',
     cases: [],
     profile: { firstName: 'Xi', lastName: 'Chen' } },
  route: 
   Route {
     path: '/api/auth/openid/return',
     stack: [ [Object], [Object] ],
     methods: { post: true } },
  authInfo: {} }
[0mPOST /api/auth/openid/return [31m500 [0m458.768 ms - 3354[0m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `babel-node index.js --presets es2015,stage-2`[39m
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":40,"msg":"Using http for redirectUrl is not recommended, please consider using https","time":"2018-02-05T17:58:18.935Z","v":0}
handleRender:  undefined
C:\Users\xichentop\Documents\ContraCostaInternship\mainsite-xc\server
Connected to DB
deserializing user...
adding header
we are getting a get request
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":30,"msg":"metadataUrl is: https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9","time":"2018-02-05T17:58:43.394Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":30,"msg":"received the following items in params: {\"policy\":null,\"cachekey\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":{\"url\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":null,\"authtype\":\"oidc\"}}","time":"2018-02-05T17:58:43.395Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":11492,"level":30,"msg":"Parsing JSON retreived from the endpoint","time":"2018-02-05T17:58:43.568Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":11492,"level":30,"msg":"Request to update the Open ID Connect Metadata","time":"2018-02-05T17:58:43.568Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":11492,"level":30,"msg":"Algorithm retrieved was:  [ 'RS256' ]","time":"2018-02-05T17:58:43.569Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":11492,"level":30,"msg":"Issuer we are using is:  https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/","time":"2018-02-05T17:58:43.569Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":11492,"level":30,"msg":"Key Endpoint we will use is:  https://login.microsoftonline.com/common/discovery/keys","time":"2018-02-05T17:58:43.569Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":11492,"level":30,"msg":"Authentication endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/authorize","time":"2018-02-05T17:58:43.569Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":11492,"level":30,"msg":"Token endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/token","time":"2018-02-05T17:58:43.569Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":11492,"level":30,"msg":"User info endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/openid/userinfo","time":"2018-02-05T17:58:43.569Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":11492,"level":30,"msg":"The logout endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/logout","time":"2018-02-05T17:58:43.569Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":30,"msg":"entering Strategy.prototype._flowInitializationHandler","time":"2018-02-05T17:58:43.666Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":30,"msg":"We are sending the response_type:  code id_token","time":"2018-02-05T17:58:43.666Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":30,"msg":"We are sending the response_mode:  form_post","time":"2018-02-05T17:58:43.666Z","v":0}
[0mGET /api/auth/azure-login [36m302 [0m357.500 ms - 0[0m
deserializing user...
adding header
we have received a post request:  IncomingMessage {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 16384,
     buffer: BufferList { head: null, tail: null, length: 0 },
     length: 0,
     pipes: null,
     pipesCount: 0,
     flowing: true,
     ended: true,
     endEmitted: true,
     reading: false,
     sync: true,
     needReadable: false,
     emittedReadable: false,
     readableListening: false,
     resumeScheduled: false,
     defaultEncoding: 'utf8',
     ranOut: false,
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: false,
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  socket: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 5461,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 2013,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 489,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 25560,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 31365,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25324 } },
  connection: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 5461,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 2013,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 489,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 25560,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 31365,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25324 } },
  httpVersionMajor: 1,
  httpVersionMinor: 1,
  httpVersion: '1.1',
  complete: true,
  headers: 
   { host: 'localhost:3000',
     connection: 'keep-alive',
     'content-length': '2231',
     'cache-control': 'max-age=0',
     'upgrade-insecure-requests': '1',
     origin: 'null',
     'content-type': 'application/x-www-form-urlencoded',
     'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'accept-encoding': 'gzip, deflate, br',
     'accept-language': 'en-US,en;q=0.9',
     cookie: 'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517853523668.fbd08e9a6335a4c3df307cd1824127116ddf4ec105a2d72d5ed317d2b086dcf22ac3ee5366ee77484b56430b08dd49cae041c58c50e3bb46757e320311401022b2b0513524a4d4e7f51ff07e308d6fc8b3ce7e3763af97c5f4e209f20005e60f315a1d8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.5e84f62825ab9cefe842a25ebb6e8923=0' },
  rawHeaders: 
   [ 'Host',
     'localhost:3000',
     'Connection',
     'keep-alive',
     'Content-Length',
     '2231',
     'Cache-Control',
     'max-age=0',
     'Upgrade-Insecure-Requests',
     '1',
     'Origin',
     'null',
     'Content-Type',
     'application/x-www-form-urlencoded',
     'User-Agent',
     'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     'Accept',
     'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'Accept-Encoding',
     'gzip, deflate, br',
     'Accept-Language',
     'en-US,en;q=0.9',
     'Cookie',
     'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517853523668.fbd08e9a6335a4c3df307cd1824127116ddf4ec105a2d72d5ed317d2b086dcf22ac3ee5366ee77484b56430b08dd49cae041c58c50e3bb46757e320311401022b2b0513524a4d4e7f51ff07e308d6fc8b3ce7e3763af97c5f4e209f20005e60f315a1d8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.5e84f62825ab9cefe842a25ebb6e8923=0' ],
  trailers: {},
  rawTrailers: [],
  upgrade: false,
  url: '/api/auth/openid/return',
  method: 'POST',
  statusCode: null,
  statusMessage: null,
  client: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 5461,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 2013,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 489,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 25560,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 31365,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25324 } },
  _consuming: true,
  _dumped: false,
  next: [Function: next],
  baseUrl: '',
  originalUrl: '/api/auth/openid/return',
  _parsedUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  params: {},
  query: {},
  res: 
   ServerResponse {
     domain: null,
     _events: { finish: [Object], end: [Function: onevent] },
     _eventsCount: 2,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: false,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: true,
     useChunkedEncodingByDefault: true,
     sendDate: true,
     _removedHeader: {},
     _contentLength: null,
     _hasBody: true,
     _trailer: '',
     finished: false,
     _headerSent: false,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 2013,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 31365,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 2013,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 31365,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     _header: null,
     _headers: 
      { 'x-powered-by': 'Express',
        'access-control-allow-origin': '*',
        'access-control-allow-methods': 'PUT, GET, POST, DELETE, OPTIONS',
        'access-control-allow-headers': 'Origin, X-Requested-With, Content-Type, Accept, Authorization, Access-Control-Allow-Credentials',
        'access-control-allow-credentials': 'true' },
     _headerNames: 
      { 'x-powered-by': 'X-Powered-By',
        'access-control-allow-origin': 'Access-Control-Allow-Origin',
        'access-control-allow-methods': 'Access-Control-Allow-Methods',
        'access-control-allow-headers': 'Access-Control-Allow-Headers',
        'access-control-allow-credentials': 'Access-Control-Allow-Credentials' },
     _onPendingData: [Function: updateOutgoingData],
     req: [Circular],
     locals: {},
     writeHead: [Function: writeHead],
     end: [Function: end],
     _startAt: undefined,
     _startTime: undefined,
     __onFinished: { [Function: listener] queue: [Object] } },
  _parsedOriginalUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  sessionStore: 
   MongoStore {
     domain: null,
     _events: 
      { disconnect: [Function: ondisconnect],
        connect: [Function: onconnect] },
     _eventsCount: 2,
     _maxListeners: undefined,
     ttl: 1209600,
     collectionName: 'sessions',
     autoRemove: 'native',
     autoRemoveInterval: 10,
     transformFunctions: 
      { serialize: [Function: stringify],
        unserialize: [Function: parse] },
     options: { mongooseConnection: [Object], clear_interval: 86400 },
     state: 'connected',
     generate: [Function],
     db: 
      Db {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        s: [Object],
        serverConfig: [Getter],
        bufferMaxEntries: [Getter],
        databaseName: [Getter] },
     collectionReadyPromise: Promise { [Object] },
     collection: Collection { s: [Object] } },
  sessionID: 'R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL',
  session: 
   Session {
     cookie: 
      { path: '/',
        _expires: 2018-02-06T17:58:43.669Z,
        originalMaxAge: 86399999,
        httpOnly: true },
     passport: { user: 'xchen@contracosta.courts.ca.gov' } },
  secret: undefined,
  cookies: 
   { 'connect.sid': 's:R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw++TohQY8/YlSxxXW1AgPhmysT1xLoD7PEkUE',
     'passport-aad.1517853523668.fbd08e9a6335a4c3df307cd1824127116ddf4ec105a2d72d5ed317d2b086dcf22ac3ee5366ee77484b56430b08dd49cae041c58c50e3bb46757e320311401022b2b0513524a4d4e7f51ff07e308d6fc8b3ce7e3763af97c5f4e209f20005e60f315a1d8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.5e84f62825ab9cefe842a25ebb6e8923': '0' },
  signedCookies: {},
  body: 
   { code: 'AQABAAIAAABHh4kmS_aKT5XrjzxRAtHz_QwKPN9e1TDPkrk-ewT8rH4QtAw9gil0N83xIEl0ePupbspPk24XPK4-6S5QVPugjKIzGSht8KKB2g3AKEHPUy8vvO0YhIT3ecQHNMvOCM2lH-vK-4dqbk61yoV0wC9AW-oIGYBuLJ-xFf0UvLFsvgJajpjkoKdogkcbAsvHgx_O_pBlRef_g7S-BDKJBoj-06TGahaKbMALGOnEjS2RK9e5m6QeGc0QBj3XzY8ysdIhProso9LVu3UUFxhXdSxRgUHEevrvvqzyXLnzeNWiJDD1nc5hMAPSfLjzkqEVsgj2YruHxwFndxm9a2Rba6UHFVnNufPq9bxhIQxEixE4CdhqdYh_CLSgCAbXJr0prN_lTdIIzmxjlt_RjZagSZvZXRbpox4uT-56crOeLkhCoS8m1sGDsRepKuA5O8lsjJH2sGJEjJUd1ieVjoIGIxsBkQIQ17YzagCE2pwPGGZFgbVDhtbhjrXFOHUNJJnUHwLFitH456MSTnC1tTIGuu_nPwc0vAoWgOXRl2GYE6cdCG8hqUG2HEGAMPo3J1teFNKQ2UWoIQp0q1JG8JQCpgWN6NLo4NUixj6xmLo_3nI8s-tcrQ5A3z4WrFAZkWujJzYgAA',
     id_token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUzMjIyLCJuYmYiOjE1MTc4NTMyMjIsImV4cCI6MTUxNzg1NzEyMiwiYWlvIjoiQVNRQTIvOEdBQUFBOXpYQ2cybnJteVlpMkhpUVFBR0d6eUZHU3BOK3V2djFwdERzNG9rZDNQaz0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6ImFyVjlRX0M2aDNWeGhodlpTRmE3SUEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoiSlZYcjhtdG5NMGpWMWNYbnNXeUE1R3hHSEZtVWZIR2EiLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6IjJOd1ppLXpCa0UydDdTQjQ2TWNXQUEiLCJ2ZXIiOiIxLjAifQ.iSqwcMLKFvPWQIPBwuDlqyrF4AtyBAhqak2GuPBQGm0yLCTtKgDZGK21o0R-rTauj9OV4HzJL5zrUam2ZYSFdZCxmHiuwrIxdXP8hFIFtDOK0fR6hXCbZ8yBD-UnFNHRtic-gBojZDR5e96owvsoiXX-uew43WoWxosAQCorA67ubTJ-IXLBbOx7-MtM0wJvaZPwUur3HXxqnElV8MgDRtlQgOI7pyBpm-x33eB_f9qpq9SKkvogSn77Aum4HiIdN3_KU-GTXZYbFc7LKE-8B_sXvvGylCv7tjovf2dPpwiQMXYmtigWtHe83u-aGekbbKk6JJpLMeroyIGcT90vyA',
     state: 'CUSTOMsaX5zPjYW0_OQhxCVpNsLZDj4RofFEYsmy_state',
     session_state: 'a4eab50d-afe3-40e1-92b7-517677a51945' },
  _body: true,
  length: undefined,
  read: [Function],
  _startAt: [ 733433, 698459016 ],
  _startTime: 2018-02-05T17:58:44.038Z,
  _remoteAddress: '::1',
  _passport: 
   { instance: 
      Authenticator {
        _key: 'passport',
        _strategies: [Object],
        _serializers: [Object],
        _deserializers: [Object],
        _infoTransformers: [],
        _framework: [Object],
        _userProperty: 'user',
        Authenticator: [Function: Authenticator],
        Passport: [Function: Authenticator],
        Strategy: [Object],
        strategies: [Object] },
     session: { user: 'xchen@contracosta.courts.ca.gov' } },
  user: 
   { _id: 5a737e49e440d2445c40b21c,
     updatedAt: 2018-02-01T20:53:29.268Z,
     createdAt: 2018-02-01T20:53:29.268Z,
     authType: 'azure',
     email: 'xchen@contracosta.courts.ca.gov',
     __v: 0,
     role: 'Member',
     cases: [],
     profile: { firstName: 'Xi', lastName: 'Chen' } },
  route: 
   Route {
     path: '/api/auth/openid/return',
     stack: [ [Object], [Object] ],
     methods: { post: true } } }
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":30,"msg":"metadataUrl is: https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9","time":"2018-02-05T17:58:44.119Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":30,"msg":"received the following items in params: {\"id_token\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUzMjIyLCJuYmYiOjE1MTc4NTMyMjIsImV4cCI6MTUxNzg1NzEyMiwiYWlvIjoiQVNRQTIvOEdBQUFBOXpYQ2cybnJteVlpMkhpUVFBR0d6eUZHU3BOK3V2djFwdERzNG9rZDNQaz0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6ImFyVjlRX0M2aDNWeGhodlpTRmE3SUEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoiSlZYcjhtdG5NMGpWMWNYbnNXeUE1R3hHSEZtVWZIR2EiLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6IjJOd1ppLXpCa0UydDdTQjQ2TWNXQUEiLCJ2ZXIiOiIxLjAifQ.iSqwcMLKFvPWQIPBwuDlqyrF4AtyBAhqak2GuPBQGm0yLCTtKgDZGK21o0R-rTauj9OV4HzJL5zrUam2ZYSFdZCxmHiuwrIxdXP8hFIFtDOK0fR6hXCbZ8yBD-UnFNHRtic-gBojZDR5e96owvsoiXX-uew43WoWxosAQCorA67ubTJ-IXLBbOx7-MtM0wJvaZPwUur3HXxqnElV8MgDRtlQgOI7pyBpm-x33eB_f9qpq9SKkvogSn77Aum4HiIdN3_KU-GTXZYbFc7LKE-8B_sXvvGylCv7tjovf2dPpwiQMXYmtigWtHe83u-aGekbbKk6JJpLMeroyIGcT90vyA\",\"code\":\"AQABAAIAAABHh4kmS_aKT5XrjzxRAtHz_QwKPN9e1TDPkrk-ewT8rH4QtAw9gil0N83xIEl0ePupbspPk24XPK4-6S5QVPugjKIzGSht8KKB2g3AKEHPUy8vvO0YhIT3ecQHNMvOCM2lH-vK-4dqbk61yoV0wC9AW-oIGYBuLJ-xFf0UvLFsvgJajpjkoKdogkcbAsvHgx_O_pBlRef_g7S-BDKJBoj-06TGahaKbMALGOnEjS2RK9e5m6QeGc0QBj3XzY8ysdIhProso9LVu3UUFxhXdSxRgUHEevrvvqzyXLnzeNWiJDD1nc5hMAPSfLjzkqEVsgj2YruHxwFndxm9a2Rba6UHFVnNufPq9bxhIQxEixE4CdhqdYh_CLSgCAbXJr0prN_lTdIIzmxjlt_RjZagSZvZXRbpox4uT-56crOeLkhCoS8m1sGDsRepKuA5O8lsjJH2sGJEjJUd1ieVjoIGIxsBkQIQ17YzagCE2pwPGGZFgbVDhtbhjrXFOHUNJJnUHwLFitH456MSTnC1tTIGuu_nPwc0vAoWgOXRl2GYE6cdCG8hqUG2HEGAMPo3J1teFNKQ2UWoIQp0q1JG8JQCpgWN6NLo4NUixj6xmLo_3nI8s-tcrQ5A3z4WrFAZkWujJzYgAA\",\"state\":\"CUSTOMsaX5zPjYW0_OQhxCVpNsLZDj4RofFEYsmy_state\",\"nonce\":\"JVXr8mtnM0jV1cXnsWyA5GxGHFmUfHGa\",\"resource\":\"https://graph.windows.net\",\"cachekey\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":{\"url\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":null,\"authtype\":\"oidc\"}}","time":"2018-02-05T17:58:44.119Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":30,"msg":"entering Strategy.prototype._hybridFlowHandler, received code: AQABAAIAAABHh4kmS_aKT5XrjzxRAtHz_QwKPN9e1TDPkrk-ewT8rH4QtAw9gil0N83xIEl0ePupbspPk24XPK4-6S5QVPugjKIzGSht8KKB2g3AKEHPUy8vvO0YhIT3ecQHNMvOCM2lH-vK-4dqbk61yoV0wC9AW-oIGYBuLJ-xFf0UvLFsvgJajpjkoKdogkcbAsvHgx_O_pBlRef_g7S-BDKJBoj-06TGahaKbMALGOnEjS2RK9e5m6QeGc0QBj3XzY8ysdIhProso9LVu3UUFxhXdSxRgUHEevrvvqzyXLnzeNWiJDD1nc5hMAPSfLjzkqEVsgj2YruHxwFndxm9a2Rba6UHFVnNufPq9bxhIQxEixE4CdhqdYh_CLSgCAbXJr0prN_lTdIIzmxjlt_RjZagSZvZXRbpox4uT-56crOeLkhCoS8m1sGDsRepKuA5O8lsjJH2sGJEjJUd1ieVjoIGIxsBkQIQ17YzagCE2pwPGGZFgbVDhtbhjrXFOHUNJJnUHwLFitH456MSTnC1tTIGuu_nPwc0vAoWgOXRl2GYE6cdCG8hqUG2HEGAMPo3J1teFNKQ2UWoIQp0q1JG8JQCpgWN6NLo4NUixj6xmLo_3nI8s-tcrQ5A3z4WrFAZkWujJzYgAA, received id_token: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUzMjIyLCJuYmYiOjE1MTc4NTMyMjIsImV4cCI6MTUxNzg1NzEyMiwiYWlvIjoiQVNRQTIvOEdBQUFBOXpYQ2cybnJteVlpMkhpUVFBR0d6eUZHU3BOK3V2djFwdERzNG9rZDNQaz0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6ImFyVjlRX0M2aDNWeGhodlpTRmE3SUEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoiSlZYcjhtdG5NMGpWMWNYbnNXeUE1R3hHSEZtVWZIR2EiLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6IjJOd1ppLXpCa0UydDdTQjQ2TWNXQUEiLCJ2ZXIiOiIxLjAifQ.iSqwcMLKFvPWQIPBwuDlqyrF4AtyBAhqak2GuPBQGm0yLCTtKgDZGK21o0R-rTauj9OV4HzJL5zrUam2ZYSFdZCxmHiuwrIxdXP8hFIFtDOK0fR6hXCbZ8yBD-UnFNHRtic-gBojZDR5e96owvsoiXX-uew43WoWxosAQCorA67ubTJ-IXLBbOx7-MtM0wJvaZPwUur3HXxqnElV8MgDRtlQgOI7pyBpm-x33eB_f9qpq9SKkvogSn77Aum4HiIdN3_KU-GTXZYbFc7LKE-8B_sXvvGylCv7tjovf2dPpwiQMXYmtigWtHe83u-aGekbbKk6JJpLMeroyIGcT90vyA","time":"2018-02-05T17:58:44.120Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":30,"msg":"token decoded:  { header: \n   { typ: 'JWT',\n     alg: 'RS256',\n     x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n     kid: 'z44wMdHu8wKsumrbfaK98qxs5YI' },\n  payload: \n   { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n     iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n     iat: 1517853222,\n     nbf: 1517853222,\n     exp: 1517857122,\n     aio: 'ASQA2/8GAAAA9zXCg2nrmyYi2HiQQAGGzyFGSpN+uvv1ptDs4okd3Pk=',\n     amr: [ 'pwd' ],\n     c_hash: 'arV9Q_C6h3VxhhvZSFa7IA',\n     family_name: 'Chen',\n     given_name: 'Xi',\n     ipaddr: '73.41.83.228',\n     name: 'Xi Chen',\n     nonce: 'JVXr8mtnM0jV1cXnsWyA5GxGHFmUfHGa',\n     oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n     onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n     sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n     tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n     unique_name: 'XChen@contracosta.courts.ca.gov',\n     upn: 'XChen@contracosta.courts.ca.gov',\n     uti: '2NwZi-zBkE2t7SB46McWAA',\n     ver: '1.0' },\n  signature: 'iSqwcMLKFvPWQIPBwuDlqyrF4AtyBAhqak2GuPBQGm0yLCTtKgDZGK21o0R-rTauj9OV4HzJL5zrUam2ZYSFdZCxmHiuwrIxdXP8hFIFtDOK0fR6hXCbZ8yBD-UnFNHRtic-gBojZDR5e96owvsoiXX-uew43WoWxosAQCorA67ubTJ-IXLBbOx7-MtM0wJvaZPwUur3HXxqnElV8MgDRtlQgOI7pyBpm-x33eB_f9qpq9SKkvogSn77Aum4HiIdN3_KU-GTXZYbFc7LKE-8B_sXvvGylCv7tjovf2dPpwiQMXYmtigWtHe83u-aGekbbKk6JJpLMeroyIGcT90vyA' }","time":"2018-02-05T17:58:44.122Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":11492,"level":30,"msg":"working on key: { kty: 'RSA',\n  use: 'sig',\n  kid: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  n: 'p3HhMQsqmgSjeiDsZ1ay-UAFgFMdBYgGGkGa2L0ew6_q3b2x9Ccdru_amVp1HXV2FVwbpK0HYsTSRvWIiCRRT-AgMSIlap7qlg8-iYvdFIJsorf84-sRN9Iq3F1pKD-W9vqsitcEbzljHCLSS2vUKSb7itwjc_AKjky3cX5ndMupQESZNTbiwanM9dAJ7K87pURXN66lS_q9u7wxWvjc3iLEp25PU_06moGDMe5BWuD6Rb_pdFM1plm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wSbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0Q',\n  e: 'AQAB',\n  x5c: [ 'MIIDBTCCAe2gAwIBAgIQaD0+a2FNl5JMaE2/7KUP5zANBgkqhkiG9w0BAQsFADAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MB4XDTE3MTEyODAwMDAwMFoXDTE5MTEyOTAwMDAwMFowLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKdx4TELKpoEo3og7GdWsvlABYBTHQWIBhpBmti9HsOv6t29sfQnHa7v2pladR11dhVcG6StB2LE0kb1iIgkUU/gIDEiJWqe6pYPPomL3RSCbKK3/OPrETfSKtxdaSg/lvb6rIrXBG85Yxwi0ktr1Ckm+4rcI3PwCo5Mt3F+Z3TLqUBEmTU24sGpzPXQCeyvO6VEVzeupUv6vbu8MVr43N4ixKduT1P9OpqBgzHuQVrg+kW/6XRTNaZZthTlITG8VEa8I02S2Q4VyosdzcrMQmRp75MTA2YKdqTexTKmWKaXFIcGCbvMEm35sIfIVziQ8YMSEC+7GBoh3k2g2BFRgtECAwEAAaMhMB8wHQYDVR0OBBYEFGpho/kx4FeBzTTBIbYVWfFdGIblMA0GCSqGSIb3DQEBCwUAA4IBAQBgaeYvuV4sYJZNPXbxN6FIc0oA4bCg1+DFalT3qzW0bFbl7pXP5YPY/adZlT8+cTznjMgzPPvcXaQdcytR16YqHJVX0ik67NrrQ3g0TtGLc42SuzE+6awryiLQY0Zd799bJwrRcDZUqm/6jKOEOd+utf+3o+VU57w+n7iQLuSL1mKYGMsyzMYCj6xVtYl75iam86leT0/tlXHJ8oqxU5w3xVY6P7v0Sz2UteQNQvhKi6R1/cjfiJUp+OzHpaEor6ls7HSvojY2zm1DIaH6EBp2L9TBFt8IALAEN5hX6XYpKmCHRUlzYwoWo7YwzKiot0XdbDW+zPKGPKtIlbg6cw/+' ] }","time":"2018-02-05T17:58:44.123Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":30,"msg":"PEMkey generated: -----BEGIN RSA PUBLIC KEY-----\nMIIBCgKCAQEAp3HhMQsqmgSjeiDsZ1ay+UAFgFMdBYgGGkGa2L0ew6/q3b2x9Ccd\nru/amVp1HXV2FVwbpK0HYsTSRvWIiCRRT+AgMSIlap7qlg8+iYvdFIJsorf84+sR\nN9Iq3F1pKD+W9vqsitcEbzljHCLSS2vUKSb7itwjc/AKjky3cX5ndMupQESZNTbi\nwanM9dAJ7K87pURXN66lS/q9u7wxWvjc3iLEp25PU/06moGDMe5BWuD6Rb/pdFM1\nplm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wS\nbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0QIDAQAB\n-----END RSA PUBLIC KEY-----\n","time":"2018-02-05T17:58:44.124Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":30,"msg":"Claims received:  { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n  iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n  iat: 1517853222,\n  nbf: 1517853222,\n  exp: 1517857122,\n  aio: 'ASQA2/8GAAAA9zXCg2nrmyYi2HiQQAGGzyFGSpN+uvv1ptDs4okd3Pk=',\n  amr: [ 'pwd' ],\n  c_hash: 'arV9Q_C6h3VxhhvZSFa7IA',\n  family_name: 'Chen',\n  given_name: 'Xi',\n  ipaddr: '73.41.83.228',\n  name: 'Xi Chen',\n  nonce: 'JVXr8mtnM0jV1cXnsWyA5GxGHFmUfHGa',\n  oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n  onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n  sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n  tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n  unique_name: 'XChen@contracosta.courts.ca.gov',\n  upn: 'XChen@contracosta.courts.ca.gov',\n  uti: '2NwZi-zBkE2t7SB46McWAA',\n  ver: '1.0' }","time":"2018-02-05T17:58:44.128Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":30,"msg":"entering Strategy.prototype._authCodeFlowHandler, received code: AQABAAIAAABHh4kmS_aKT5XrjzxRAtHz_QwKPN9e1TDPkrk-ewT8rH4QtAw9gil0N83xIEl0ePupbspPk24XPK4-6S5QVPugjKIzGSht8KKB2g3AKEHPUy8vvO0YhIT3ecQHNMvOCM2lH-vK-4dqbk61yoV0wC9AW-oIGYBuLJ-xFf0UvLFsvgJajpjkoKdogkcbAsvHgx_O_pBlRef_g7S-BDKJBoj-06TGahaKbMALGOnEjS2RK9e5m6QeGc0QBj3XzY8ysdIhProso9LVu3UUFxhXdSxRgUHEevrvvqzyXLnzeNWiJDD1nc5hMAPSfLjzkqEVsgj2YruHxwFndxm9a2Rba6UHFVnNufPq9bxhIQxEixE4CdhqdYh_CLSgCAbXJr0prN_lTdIIzmxjlt_RjZagSZvZXRbpox4uT-56crOeLkhCoS8m1sGDsRepKuA5O8lsjJH2sGJEjJUd1ieVjoIGIxsBkQIQ17YzagCE2pwPGGZFgbVDhtbhjrXFOHUNJJnUHwLFitH456MSTnC1tTIGuu_nPwc0vAoWgOXRl2GYE6cdCG8hqUG2HEGAMPo3J1teFNKQ2UWoIQp0q1JG8JQCpgWN6NLo4NUixj6xmLo_3nI8s-tcrQ5A3z4WrFAZkWujJzYgAA","time":"2018-02-05T17:58:44.128Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":30,"msg":"In _getAccessTokenBySecretOrAssertion: we are using client secret","time":"2018-02-05T17:58:44.129Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":30,"msg":"received id_token:  eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUzMjIyLCJuYmYiOjE1MTc4NTMyMjIsImV4cCI6MTUxNzg1NzEyMiwiYWlvIjoiWTJOZ1lEZ3laYm1ubEpSL1lZVHVlZUZQSEt4L0F5UFRHaWRFUzd3VzR2MmwxeHE4WVFZQSIsImFtciI6WyJwd2QiXSwiZmFtaWx5X25hbWUiOiJDaGVuIiwiZ2l2ZW5fbmFtZSI6IlhpIiwiaXBhZGRyIjoiNzMuNDEuODMuMjI4IiwibmFtZSI6IlhpIENoZW4iLCJub25jZSI6IkpWWHI4bXRuTTBqVjFjWG5zV3lBNUd4R0hGbVVmSEdhIiwib2lkIjoiOWY1NTRmZjItZDQ1NS00OTEyLWJjMTctZmI5MGFiNjc3MjY2Iiwib25wcmVtX3NpZCI6IlMtMS01LTIxLTQ5NzQwNDg1NS01OTc2MzU5OTItOTg4ODgyNTc2LTE0MjgwIiwic3ViIjoiekZkcVFleVYtX1pOZU03N2ZkeU5zRzhXOTR6Mnc5WlN2VTZmOWpOYjF6OCIsInRpZCI6IjhjYTlkOGYxLWQ5NzYtNDQ0NS1hM2NjLTNmZmMzZTI5YTNmZiIsInVuaXF1ZV9uYW1lIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInVwbiI6IlhDaGVuQGNvbnRyYWNvc3RhLmNvdXJ0cy5jYS5nb3YiLCJ1dGkiOiJlcXdJOGRSU2lVaXkwNlhzTDFvWUFBIiwidmVyIjoiMS4wIn0.cJaZ5BvPAM9EoqabKUj2bM1-JgK550kxu37oeDBRdiRG6hFWqHZJ5XX-pjzNYPvBrGKxA76aQjiyKTFCPFg6h7Q0NX2oGcGH7neAvimxUL_EKZeCmWxbd8oN5fERmOyHI_C549vHJhfvsT0V5T1xg0rjUW7eE9QhbYTG_IloJ0YRRGqlH_SjdVtgnBnyu7trqG9uqfTxa66j7n6VbfQIf4TEp7bOYmEQ0ykNUIawVSJ03NxkSePVD8kZ79fbviQA_Y_TZ9LTHpfc_Xq12-Ioyt2heyfvjVvJEJWh_-SzWplLH2VotnsxAc1XToD9OJnwXYPGb6P8N18x9m5oeWeTMw","time":"2018-02-05T17:58:44.434Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":30,"msg":"received access_token:  eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiJodHRwczovL2dyYXBoLndpbmRvd3MubmV0IiwiaXNzIjoiaHR0cHM6Ly9zdHMud2luZG93cy5uZXQvOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmLyIsImlhdCI6MTUxNzg1MzIyMiwibmJmIjoxNTE3ODUzMjIyLCJleHAiOjE1MTc4NTcxMjIsImFjciI6IjEiLCJhaW8iOiJBU1FBMi84R0FBQUFjekpTbjY2YmNFak90NnhoNXY2cTAyUkhwcVYrcVZkODBFMFBxR0s0cnZBPSIsImFtciI6WyJwd2QiXSwiYXBwaWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJhcHBpZGFjciI6IjEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm9pZCI6IjlmNTU0ZmYyLWQ0NTUtNDkxMi1iYzE3LWZiOTBhYjY3NzI2NiIsIm9ucHJlbV9zaWQiOiJTLTEtNS0yMS00OTc0MDQ4NTUtNTk3NjM1OTkyLTk4ODg4MjU3Ni0xNDI4MCIsInB1aWQiOiIxMDAzM0ZGRkEyNkVDOTBDIiwic2NwIjoiTWFpbC5SZWFkIG9mZmxpbmVfYWNjZXNzIG9wZW5pZCBwcm9maWxlIFVzZXIuUmVhZCIsInN1YiI6IjVMZWlBbTJONDQ5MWF2LUdtTE9fV081QVVmR0xuNmdWdjlEdU5oS2swU3ciLCJ0ZW5hbnRfcmVnaW9uX3Njb3BlIjoiTkEiLCJ0aWQiOiI4Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYiLCJ1bmlxdWVfbmFtZSI6IlhDaGVuQGNvbnRyYWNvc3RhLmNvdXJ0cy5jYS5nb3YiLCJ1cG4iOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXRpIjoiZXF3SThkUlNpVWl5MDZYc0wxb1lBQSIsInZlciI6IjEuMCJ9.C1qaVKi1_Kt4OMyzc3v06F2raa6WKcJ9e4fRl56QnaNhihH39ygEX5X-CeATRtkWXibNzquXZqc5IwNxyMyOlLyDH_wRgQlW3U_bnjGlI_xrRrnQ1cqfgWp1K-qCPselUl7rd2NP_9efB4oTSAw9nQK4STPcu20SQug_Cp_fcH44Xkpqe7XK29A0AAhiJGExgLv42l9A8G_tnQhtgjFA4XD093SyyNPhWGWJ_pvMR49TAnoxp0UCOyzQ8rK0Ge1n3L0whm7tIFP2HEe3F2iS-FqKEu-JiGWc-1hMv3ZVIG26VMIV6DIfj3MooVKp70IJKg2F8UoMlgD1owjjJpvA-A","time":"2018-02-05T17:58:44.434Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":30,"msg":"received refresh_token:  AQABAAAAAABHh4kmS_aKT5XrjzxRAtHzMNKHQRjIC-Kq5BMqHfQnbgyWQjk8Bt0t4JTNNhXQwLcvut7wLjsDarXTr2_V8ChMcMUVMQT5U4wj5msFW7rrulmHxP6mfpDLZDqD73oIj3KL20EKEv6xd8qSzOAV5SK2KkWiw3-zX3V2BLy2l-iNXa4_84KXm_tQdJrJ3cnRPmWJn1BZYZPR9fvdx2eX9pi_VHXOTBXgWq-nONorzPKAp95vn1Aj2-GN_fN-i2nqSJL8hboG7J7pXReEKpimhlhGfRy28-EIYLmB14uVgHgC3kEtqXRywL2q_bPhM2R94bdEjKGNnKX0rIIS-gPoWilByA7NEAaBSREtf0mtnjUIwnf1sPF4V6xv4UUphKZFwxHRubPvTJP1wY7sfktlfS8763vvN4-5zsU24nGwwFq-ujdYny5cfKf4vDs7PuwzANYgQEucl7pqoQhGg8Hm6_mZFr-OyoMqr-ZErUOmv_sd4cp7fh1oBXAPbLTg3eEkcRUDrj9oWEqmtrzvkVyUvzKv2WOxIzh4PAMUDt_MelWlEw5W9idRKCzl1S3fYFSipmJKoOY69nVLFbUmODoBuLb_LCqLSbrrCuXlgO87rvnH_7w6hYzx-SBr6bIeizZwIdK-jCvF_YAIZ3am73Pu-kfy1N_3rDOhFdrMsbP4eRJQzoOJQ4qeLGoexsEcF2ioLRgYHcwQIkkfDW39aTIOMOFSd-C6oPUDBzZ_IwEwqy9K3z1a_MQh3VgbWJpYyCjmLjbq2agc8ffEh5R_X2U7bGgNni_rBF4nDy4fUncBlVNxVpSraTg3dwXJVLr_1jhL2XU8EO2J7Ot2GmgamPUkYzaXIAA","time":"2018-02-05T17:58:44.435Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":30,"msg":"token decoded:  { header: \n   { typ: 'JWT',\n     alg: 'RS256',\n     x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n     kid: 'z44wMdHu8wKsumrbfaK98qxs5YI' },\n  payload: \n   { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n     iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n     iat: 1517853222,\n     nbf: 1517853222,\n     exp: 1517857122,\n     aio: 'Y2NgYDgyZbmnlJR/YYTueeFPHKx/AyPTGidES7wW4v2l1xq8YQYA',\n     amr: [ 'pwd' ],\n     family_name: 'Chen',\n     given_name: 'Xi',\n     ipaddr: '73.41.83.228',\n     name: 'Xi Chen',\n     nonce: 'JVXr8mtnM0jV1cXnsWyA5GxGHFmUfHGa',\n     oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n     onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n     sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n     tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n     unique_name: 'XChen@contracosta.courts.ca.gov',\n     upn: 'XChen@contracosta.courts.ca.gov',\n     uti: 'eqwI8dRSiUiy06XsL1oYAA',\n     ver: '1.0' },\n  signature: 'cJaZ5BvPAM9EoqabKUj2bM1-JgK550kxu37oeDBRdiRG6hFWqHZJ5XX-pjzNYPvBrGKxA76aQjiyKTFCPFg6h7Q0NX2oGcGH7neAvimxUL_EKZeCmWxbd8oN5fERmOyHI_C549vHJhfvsT0V5T1xg0rjUW7eE9QhbYTG_IloJ0YRRGqlH_SjdVtgnBnyu7trqG9uqfTxa66j7n6VbfQIf4TEp7bOYmEQ0ykNUIawVSJ03NxkSePVD8kZ79fbviQA_Y_TZ9LTHpfc_Xq12-Ioyt2heyfvjVvJEJWh_-SzWplLH2VotnsxAc1XToD9OJnwXYPGb6P8N18x9m5oeWeTMw' }","time":"2018-02-05T17:58:44.435Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":11492,"level":30,"msg":"working on key: { kty: 'RSA',\n  use: 'sig',\n  kid: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  n: 'p3HhMQsqmgSjeiDsZ1ay-UAFgFMdBYgGGkGa2L0ew6_q3b2x9Ccdru_amVp1HXV2FVwbpK0HYsTSRvWIiCRRT-AgMSIlap7qlg8-iYvdFIJsorf84-sRN9Iq3F1pKD-W9vqsitcEbzljHCLSS2vUKSb7itwjc_AKjky3cX5ndMupQESZNTbiwanM9dAJ7K87pURXN66lS_q9u7wxWvjc3iLEp25PU_06moGDMe5BWuD6Rb_pdFM1plm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wSbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0Q',\n  e: 'AQAB',\n  x5c: [ 'MIIDBTCCAe2gAwIBAgIQaD0+a2FNl5JMaE2/7KUP5zANBgkqhkiG9w0BAQsFADAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MB4XDTE3MTEyODAwMDAwMFoXDTE5MTEyOTAwMDAwMFowLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKdx4TELKpoEo3og7GdWsvlABYBTHQWIBhpBmti9HsOv6t29sfQnHa7v2pladR11dhVcG6StB2LE0kb1iIgkUU/gIDEiJWqe6pYPPomL3RSCbKK3/OPrETfSKtxdaSg/lvb6rIrXBG85Yxwi0ktr1Ckm+4rcI3PwCo5Mt3F+Z3TLqUBEmTU24sGpzPXQCeyvO6VEVzeupUv6vbu8MVr43N4ixKduT1P9OpqBgzHuQVrg+kW/6XRTNaZZthTlITG8VEa8I02S2Q4VyosdzcrMQmRp75MTA2YKdqTexTKmWKaXFIcGCbvMEm35sIfIVziQ8YMSEC+7GBoh3k2g2BFRgtECAwEAAaMhMB8wHQYDVR0OBBYEFGpho/kx4FeBzTTBIbYVWfFdGIblMA0GCSqGSIb3DQEBCwUAA4IBAQBgaeYvuV4sYJZNPXbxN6FIc0oA4bCg1+DFalT3qzW0bFbl7pXP5YPY/adZlT8+cTznjMgzPPvcXaQdcytR16YqHJVX0ik67NrrQ3g0TtGLc42SuzE+6awryiLQY0Zd799bJwrRcDZUqm/6jKOEOd+utf+3o+VU57w+n7iQLuSL1mKYGMsyzMYCj6xVtYl75iam86leT0/tlXHJ8oqxU5w3xVY6P7v0Sz2UteQNQvhKi6R1/cjfiJUp+OzHpaEor6ls7HSvojY2zm1DIaH6EBp2L9TBFt8IALAEN5hX6XYpKmCHRUlzYwoWo7YwzKiot0XdbDW+zPKGPKtIlbg6cw/+' ] }","time":"2018-02-05T17:58:44.436Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":30,"msg":"PEMkey generated: -----BEGIN RSA PUBLIC KEY-----\nMIIBCgKCAQEAp3HhMQsqmgSjeiDsZ1ay+UAFgFMdBYgGGkGa2L0ew6/q3b2x9Ccd\nru/amVp1HXV2FVwbpK0HYsTSRvWIiCRRT+AgMSIlap7qlg8+iYvdFIJsorf84+sR\nN9Iq3F1pKD+W9vqsitcEbzljHCLSS2vUKSb7itwjc/AKjky3cX5ndMupQESZNTbi\nwanM9dAJ7K87pURXN66lS/q9u7wxWvjc3iLEp25PU/06moGDMe5BWuD6Rb/pdFM1\nplm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wS\nbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0QIDAQAB\n-----END RSA PUBLIC KEY-----\n","time":"2018-02-05T17:58:44.436Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":30,"msg":"Claims received:  { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n  iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n  iat: 1517853222,\n  nbf: 1517853222,\n  exp: 1517857122,\n  aio: 'Y2NgYDgyZbmnlJR/YYTueeFPHKx/AyPTGidES7wW4v2l1xq8YQYA',\n  amr: [ 'pwd' ],\n  family_name: 'Chen',\n  given_name: 'Xi',\n  ipaddr: '73.41.83.228',\n  name: 'Xi Chen',\n  nonce: 'JVXr8mtnM0jV1cXnsWyA5GxGHFmUfHGa',\n  oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n  onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n  sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n  tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n  unique_name: 'XChen@contracosta.courts.ca.gov',\n  upn: 'XChen@contracosta.courts.ca.gov',\n  uti: 'eqwI8dRSiUiy06XsL1oYAA',\n  ver: '1.0' }","time":"2018-02-05T17:58:44.436Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":11492,"level":30,"msg":"v2 has no userinfo endpoint, using the content in id_token as the profile","time":"2018-02-05T17:58:44.437Z","v":0}
OIDCStrategy invoked
email:  XChen@contracosta.courts.ca.gov
err:  null
user:  { _id: 5a737e49e440d2445c40b21c,
  updatedAt: 2018-02-01T20:53:29.268Z,
  createdAt: 2018-02-01T20:53:29.268Z,
  authType: 'azure',
  email: 'xchen@contracosta.courts.ca.gov',
  __v: 0,
  role: 'Member',
  cases: [],
  profile: { firstName: 'Xi', lastName: 'Chen' } }
serializing user:  { _id: 5a737e49e440d2445c40b21c,
  updatedAt: 2018-02-01T20:53:29.268Z,
  createdAt: 2018-02-01T20:53:29.268Z,
  authType: 'azure',
  email: 'xchen@contracosta.courts.ca.gov',
  __v: 0,
  role: 'Member',
  cases: [],
  profile: { firstName: 'Xi', lastName: 'Chen' } }
We received a posted return from AzureAD:  IncomingMessage {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 16384,
     buffer: BufferList { head: null, tail: null, length: 0 },
     length: 0,
     pipes: null,
     pipesCount: 0,
     flowing: true,
     ended: true,
     endEmitted: true,
     reading: false,
     sync: true,
     needReadable: false,
     emittedReadable: false,
     readableListening: false,
     resumeScheduled: false,
     defaultEncoding: 'utf8',
     ranOut: false,
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: false,
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  socket: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 5461,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 2013,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 489,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 25560,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 31365,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25324 } },
  connection: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 5461,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 2013,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 489,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 25560,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 31365,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25324 } },
  httpVersionMajor: 1,
  httpVersionMinor: 1,
  httpVersion: '1.1',
  complete: true,
  headers: 
   { host: 'localhost:3000',
     connection: 'keep-alive',
     'content-length': '2231',
     'cache-control': 'max-age=0',
     'upgrade-insecure-requests': '1',
     origin: 'null',
     'content-type': 'application/x-www-form-urlencoded',
     'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'accept-encoding': 'gzip, deflate, br',
     'accept-language': 'en-US,en;q=0.9',
     cookie: 'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517853523668.fbd08e9a6335a4c3df307cd1824127116ddf4ec105a2d72d5ed317d2b086dcf22ac3ee5366ee77484b56430b08dd49cae041c58c50e3bb46757e320311401022b2b0513524a4d4e7f51ff07e308d6fc8b3ce7e3763af97c5f4e209f20005e60f315a1d8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.5e84f62825ab9cefe842a25ebb6e8923=0' },
  rawHeaders: 
   [ 'Host',
     'localhost:3000',
     'Connection',
     'keep-alive',
     'Content-Length',
     '2231',
     'Cache-Control',
     'max-age=0',
     'Upgrade-Insecure-Requests',
     '1',
     'Origin',
     'null',
     'Content-Type',
     'application/x-www-form-urlencoded',
     'User-Agent',
     'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     'Accept',
     'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'Accept-Encoding',
     'gzip, deflate, br',
     'Accept-Language',
     'en-US,en;q=0.9',
     'Cookie',
     'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517853523668.fbd08e9a6335a4c3df307cd1824127116ddf4ec105a2d72d5ed317d2b086dcf22ac3ee5366ee77484b56430b08dd49cae041c58c50e3bb46757e320311401022b2b0513524a4d4e7f51ff07e308d6fc8b3ce7e3763af97c5f4e209f20005e60f315a1d8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.5e84f62825ab9cefe842a25ebb6e8923=0' ],
  trailers: {},
  rawTrailers: [],
  upgrade: false,
  url: '/api/auth/openid/return',
  method: 'POST',
  statusCode: null,
  statusMessage: null,
  client: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 5461,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 2013,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 489,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 25560,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 31365,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25324 } },
  _consuming: true,
  _dumped: false,
  next: [Function: next],
  baseUrl: '',
  originalUrl: '/api/auth/openid/return',
  _parsedUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  params: {},
  query: {},
  res: 
   ServerResponse {
     domain: null,
     _events: { finish: [Object], end: [Function: onevent] },
     _eventsCount: 2,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: false,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: true,
     useChunkedEncodingByDefault: true,
     sendDate: true,
     _removedHeader: {},
     _contentLength: null,
     _hasBody: true,
     _trailer: '',
     finished: false,
     _headerSent: false,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 2013,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 31365,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 2013,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 31365,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     _header: null,
     _headers: 
      { 'x-powered-by': 'Express',
        'access-control-allow-origin': '*',
        'access-control-allow-methods': 'PUT, GET, POST, DELETE, OPTIONS',
        'access-control-allow-headers': 'Origin, X-Requested-With, Content-Type, Accept, Authorization, Access-Control-Allow-Credentials',
        'access-control-allow-credentials': 'true',
        'set-cookie': 'passport-aad.1517853523668.fbd08e9a6335a4c3df307cd1824127116ddf4ec105a2d72d5ed317d2b086dcf22ac3ee5366ee77484b56430b08dd49cae041c58c50e3bb46757e320311401022b2b0513524a4d4e7f51ff07e308d6fc8b3ce7e3763af97c5f4e209f20005e60f315a1d8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.5e84f62825ab9cefe842a25ebb6e8923=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT' },
     _headerNames: 
      { 'x-powered-by': 'X-Powered-By',
        'access-control-allow-origin': 'Access-Control-Allow-Origin',
        'access-control-allow-methods': 'Access-Control-Allow-Methods',
        'access-control-allow-headers': 'Access-Control-Allow-Headers',
        'access-control-allow-credentials': 'Access-Control-Allow-Credentials',
        'set-cookie': 'Set-Cookie' },
     _onPendingData: [Function: updateOutgoingData],
     req: [Circular],
     locals: {},
     writeHead: [Function: writeHead],
     end: [Function: end],
     _startAt: undefined,
     _startTime: undefined,
     __onFinished: { [Function: listener] queue: [Object] } },
  _parsedOriginalUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  sessionStore: 
   MongoStore {
     domain: null,
     _events: 
      { disconnect: [Function: ondisconnect],
        connect: [Function: onconnect] },
     _eventsCount: 2,
     _maxListeners: undefined,
     ttl: 1209600,
     collectionName: 'sessions',
     autoRemove: 'native',
     autoRemoveInterval: 10,
     transformFunctions: 
      { serialize: [Function: stringify],
        unserialize: [Function: parse] },
     options: { mongooseConnection: [Object], clear_interval: 86400 },
     state: 'connected',
     generate: [Function],
     db: 
      Db {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        s: [Object],
        serverConfig: [Getter],
        bufferMaxEntries: [Getter],
        databaseName: [Getter] },
     collectionReadyPromise: Promise { [Object] },
     collection: Collection { s: [Object] } },
  sessionID: 'R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL',
  session: 
   Session {
     cookie: 
      { path: '/',
        _expires: 2018-02-06T17:58:43.669Z,
        originalMaxAge: 86399999,
        httpOnly: true },
     passport: { user: 'xchen@contracosta.courts.ca.gov' } },
  secret: undefined,
  cookies: 
   { 'connect.sid': 's:R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw++TohQY8/YlSxxXW1AgPhmysT1xLoD7PEkUE',
     'passport-aad.1517853523668.fbd08e9a6335a4c3df307cd1824127116ddf4ec105a2d72d5ed317d2b086dcf22ac3ee5366ee77484b56430b08dd49cae041c58c50e3bb46757e320311401022b2b0513524a4d4e7f51ff07e308d6fc8b3ce7e3763af97c5f4e209f20005e60f315a1d8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.5e84f62825ab9cefe842a25ebb6e8923': '0' },
  signedCookies: {},
  body: 
   { code: 'AQABAAIAAABHh4kmS_aKT5XrjzxRAtHz_QwKPN9e1TDPkrk-ewT8rH4QtAw9gil0N83xIEl0ePupbspPk24XPK4-6S5QVPugjKIzGSht8KKB2g3AKEHPUy8vvO0YhIT3ecQHNMvOCM2lH-vK-4dqbk61yoV0wC9AW-oIGYBuLJ-xFf0UvLFsvgJajpjkoKdogkcbAsvHgx_O_pBlRef_g7S-BDKJBoj-06TGahaKbMALGOnEjS2RK9e5m6QeGc0QBj3XzY8ysdIhProso9LVu3UUFxhXdSxRgUHEevrvvqzyXLnzeNWiJDD1nc5hMAPSfLjzkqEVsgj2YruHxwFndxm9a2Rba6UHFVnNufPq9bxhIQxEixE4CdhqdYh_CLSgCAbXJr0prN_lTdIIzmxjlt_RjZagSZvZXRbpox4uT-56crOeLkhCoS8m1sGDsRepKuA5O8lsjJH2sGJEjJUd1ieVjoIGIxsBkQIQ17YzagCE2pwPGGZFgbVDhtbhjrXFOHUNJJnUHwLFitH456MSTnC1tTIGuu_nPwc0vAoWgOXRl2GYE6cdCG8hqUG2HEGAMPo3J1teFNKQ2UWoIQp0q1JG8JQCpgWN6NLo4NUixj6xmLo_3nI8s-tcrQ5A3z4WrFAZkWujJzYgAA',
     id_token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUzMjIyLCJuYmYiOjE1MTc4NTMyMjIsImV4cCI6MTUxNzg1NzEyMiwiYWlvIjoiQVNRQTIvOEdBQUFBOXpYQ2cybnJteVlpMkhpUVFBR0d6eUZHU3BOK3V2djFwdERzNG9rZDNQaz0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6ImFyVjlRX0M2aDNWeGhodlpTRmE3SUEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoiSlZYcjhtdG5NMGpWMWNYbnNXeUE1R3hHSEZtVWZIR2EiLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6IjJOd1ppLXpCa0UydDdTQjQ2TWNXQUEiLCJ2ZXIiOiIxLjAifQ.iSqwcMLKFvPWQIPBwuDlqyrF4AtyBAhqak2GuPBQGm0yLCTtKgDZGK21o0R-rTauj9OV4HzJL5zrUam2ZYSFdZCxmHiuwrIxdXP8hFIFtDOK0fR6hXCbZ8yBD-UnFNHRtic-gBojZDR5e96owvsoiXX-uew43WoWxosAQCorA67ubTJ-IXLBbOx7-MtM0wJvaZPwUur3HXxqnElV8MgDRtlQgOI7pyBpm-x33eB_f9qpq9SKkvogSn77Aum4HiIdN3_KU-GTXZYbFc7LKE-8B_sXvvGylCv7tjovf2dPpwiQMXYmtigWtHe83u-aGekbbKk6JJpLMeroyIGcT90vyA',
     state: 'my_state',
     session_state: 'a4eab50d-afe3-40e1-92b7-517677a51945' },
  _body: true,
  length: undefined,
  read: [Function],
  _startAt: [ 733433, 698459016 ],
  _startTime: 2018-02-05T17:58:44.038Z,
  _remoteAddress: '::1',
  _passport: 
   { instance: 
      Authenticator {
        _key: 'passport',
        _strategies: [Object],
        _serializers: [Object],
        _deserializers: [Object],
        _infoTransformers: [],
        _framework: [Object],
        _userProperty: 'user',
        Authenticator: [Function: Authenticator],
        Passport: [Function: Authenticator],
        Strategy: [Object],
        strategies: [Object] },
     session: { user: 'xchen@contracosta.courts.ca.gov' } },
  user: 
   { _id: 5a737e49e440d2445c40b21c,
     updatedAt: 2018-02-01T20:53:29.268Z,
     createdAt: 2018-02-01T20:53:29.268Z,
     authType: 'azure',
     email: 'xchen@contracosta.courts.ca.gov',
     __v: 0,
     role: 'Member',
     cases: [],
     profile: { firstName: 'Xi', lastName: 'Chen' } },
  route: 
   Route {
     path: '/api/auth/openid/return',
     stack: [ [Object], [Object] ],
     methods: { post: true } },
  authInfo: {} }
[0mPOST /api/auth/openid/return [31m500 [0m487.959 ms - 3354[0m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `babel-node index.js --presets es2015,stage-2`[39m
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":40,"msg":"Using http for redirectUrl is not recommended, please consider using https","time":"2018-02-05T18:00:50.518Z","v":0}
handleRender:  undefined
C:\Users\xichentop\Documents\ContraCostaInternship\mainsite-xc\server
Connected to DB
deserializing user...
adding header
we are getting a get request
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":30,"msg":"metadataUrl is: https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9","time":"2018-02-05T18:01:02.440Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":30,"msg":"received the following items in params: {\"policy\":null,\"cachekey\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":{\"url\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":null,\"authtype\":\"oidc\"}}","time":"2018-02-05T18:01:02.441Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":1008,"level":30,"msg":"Parsing JSON retreived from the endpoint","time":"2018-02-05T18:01:02.632Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":1008,"level":30,"msg":"Request to update the Open ID Connect Metadata","time":"2018-02-05T18:01:02.633Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":1008,"level":30,"msg":"Algorithm retrieved was:  [ 'RS256' ]","time":"2018-02-05T18:01:02.634Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":1008,"level":30,"msg":"Issuer we are using is:  https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/","time":"2018-02-05T18:01:02.634Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":1008,"level":30,"msg":"Key Endpoint we will use is:  https://login.microsoftonline.com/common/discovery/keys","time":"2018-02-05T18:01:02.634Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":1008,"level":30,"msg":"Authentication endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/authorize","time":"2018-02-05T18:01:02.634Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":1008,"level":30,"msg":"Token endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/token","time":"2018-02-05T18:01:02.634Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":1008,"level":30,"msg":"User info endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/openid/userinfo","time":"2018-02-05T18:01:02.634Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":1008,"level":30,"msg":"The logout endpoint we will use is:  https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/oauth2/logout","time":"2018-02-05T18:01:02.634Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":30,"msg":"entering Strategy.prototype._flowInitializationHandler","time":"2018-02-05T18:01:02.760Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":30,"msg":"We are sending the response_type:  code id_token","time":"2018-02-05T18:01:02.760Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":30,"msg":"We are sending the response_mode:  form_post","time":"2018-02-05T18:01:02.761Z","v":0}
[0mGET /api/auth/azure-login [36m302 [0m411.802 ms - 0[0m
deserializing user...
adding header
we have received a post request:  IncomingMessage {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 16384,
     buffer: BufferList { head: null, tail: null, length: 0 },
     length: 0,
     pipes: null,
     pipesCount: 0,
     flowing: true,
     ended: true,
     endEmitted: true,
     reading: false,
     sync: true,
     needReadable: false,
     emittedReadable: false,
     readableListening: false,
     resumeScheduled: false,
     defaultEncoding: 'utf8',
     ranOut: false,
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: false,
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  socket: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 13686,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 18781,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25352 } },
  connection: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 13686,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 18781,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25352 } },
  httpVersionMajor: 1,
  httpVersionMinor: 1,
  httpVersion: '1.1',
  complete: true,
  headers: 
   { host: 'localhost:3000',
     connection: 'keep-alive',
     'content-length': '2231',
     'cache-control': 'max-age=0',
     'upgrade-insecure-requests': '1',
     origin: 'null',
     'content-type': 'application/x-www-form-urlencoded',
     'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'accept-encoding': 'gzip, deflate, br',
     'accept-language': 'en-US,en;q=0.9',
     cookie: 'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517853662767.fbd08e9a6335a4c3df307cd1824127114ad76fad05a5c82671a00afcadb691d651dfeb4a6dee5573086a5d5c7be97f88e041c58c50e3bb46757e320311401022b2b051181a8ed193d51cae7e53d15d8ba8f8541c19a0eeb485f801f6252c80110d5e2b8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.4fa17e7f38bd4d2bc05328d9918aea9e=0' },
  rawHeaders: 
   [ 'Host',
     'localhost:3000',
     'Connection',
     'keep-alive',
     'Content-Length',
     '2231',
     'Cache-Control',
     'max-age=0',
     'Upgrade-Insecure-Requests',
     '1',
     'Origin',
     'null',
     'Content-Type',
     'application/x-www-form-urlencoded',
     'User-Agent',
     'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     'Accept',
     'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'Accept-Encoding',
     'gzip, deflate, br',
     'Accept-Language',
     'en-US,en;q=0.9',
     'Cookie',
     'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517853662767.fbd08e9a6335a4c3df307cd1824127114ad76fad05a5c82671a00afcadb691d651dfeb4a6dee5573086a5d5c7be97f88e041c58c50e3bb46757e320311401022b2b051181a8ed193d51cae7e53d15d8ba8f8541c19a0eeb485f801f6252c80110d5e2b8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.4fa17e7f38bd4d2bc05328d9918aea9e=0' ],
  trailers: {},
  rawTrailers: [],
  upgrade: false,
  url: '/api/auth/openid/return',
  method: 'POST',
  statusCode: null,
  statusMessage: null,
  client: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 13686,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 18781,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25352 } },
  _consuming: true,
  _dumped: false,
  next: [Function: next],
  baseUrl: '',
  originalUrl: '/api/auth/openid/return',
  _parsedUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  params: {},
  query: {},
  res: 
   ServerResponse {
     domain: null,
     _events: { finish: [Object], end: [Function: onevent] },
     _eventsCount: 2,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: false,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: true,
     useChunkedEncodingByDefault: true,
     sendDate: true,
     _removedHeader: {},
     _contentLength: null,
     _hasBody: true,
     _trailer: '',
     finished: false,
     _headerSent: false,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1773,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 18781,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1773,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 18781,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     _header: null,
     _headers: 
      { 'x-powered-by': 'Express',
        'access-control-allow-origin': '*',
        'access-control-allow-methods': 'PUT, GET, POST, DELETE, OPTIONS',
        'access-control-allow-headers': 'Origin, X-Requested-With, Content-Type, Accept, Authorization, Access-Control-Allow-Credentials',
        'access-control-allow-credentials': 'true' },
     _headerNames: 
      { 'x-powered-by': 'X-Powered-By',
        'access-control-allow-origin': 'Access-Control-Allow-Origin',
        'access-control-allow-methods': 'Access-Control-Allow-Methods',
        'access-control-allow-headers': 'Access-Control-Allow-Headers',
        'access-control-allow-credentials': 'Access-Control-Allow-Credentials' },
     _onPendingData: [Function: updateOutgoingData],
     req: [Circular],
     locals: {},
     writeHead: [Function: writeHead],
     end: [Function: end],
     _startAt: undefined,
     _startTime: undefined,
     __onFinished: { [Function: listener] queue: [Object] } },
  _parsedOriginalUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  sessionStore: 
   MongoStore {
     domain: null,
     _events: 
      { disconnect: [Function: ondisconnect],
        connect: [Function: onconnect] },
     _eventsCount: 2,
     _maxListeners: undefined,
     ttl: 1209600,
     collectionName: 'sessions',
     autoRemove: 'native',
     autoRemoveInterval: 10,
     transformFunctions: 
      { serialize: [Function: stringify],
        unserialize: [Function: parse] },
     options: { mongooseConnection: [Object], clear_interval: 86400 },
     state: 'connected',
     generate: [Function],
     db: 
      Db {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        s: [Object],
        serverConfig: [Getter],
        bufferMaxEntries: [Getter],
        databaseName: [Getter] },
     collectionReadyPromise: Promise { [Object] },
     collection: Collection { s: [Object] } },
  sessionID: 'R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL',
  session: 
   Session {
     cookie: 
      { path: '/',
        _expires: 2018-02-06T18:01:02.769Z,
        originalMaxAge: 86399998,
        httpOnly: true },
     passport: { user: 'xchen@contracosta.courts.ca.gov' } },
  secret: undefined,
  cookies: 
   { 'connect.sid': 's:R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw++TohQY8/YlSxxXW1AgPhmysT1xLoD7PEkUE',
     'passport-aad.1517853662767.fbd08e9a6335a4c3df307cd1824127114ad76fad05a5c82671a00afcadb691d651dfeb4a6dee5573086a5d5c7be97f88e041c58c50e3bb46757e320311401022b2b051181a8ed193d51cae7e53d15d8ba8f8541c19a0eeb485f801f6252c80110d5e2b8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.4fa17e7f38bd4d2bc05328d9918aea9e': '0' },
  signedCookies: {},
  body: 
   { code: 'AQABAAIAAABHh4kmS_aKT5XrjzxRAtHz8o49R9B4BqfioIrtFConxHSiMxRdEldt9NotpzlL1UTcVrPJN5OCKuo9gCPgxSs5HG934pDzQAYDdu9BEtTiehOI-V8w13OK3tZ-JzY8IrBJFs0waFKKlDe5P2zimyRfVwHUW4KZI9cuN6_XN14aT9eL4Snt_RdgsjyjAVa1Pmyswcr_LoXqQ881Cpx-DC3wQBi_-z0lsouBL-Fzc4jc43H7A8AF5QcFhpIdvjprWTp0t-8FCbURqmBPYbeFsbquNO9LGXcfc7i47RrKQXfe9l7KWlEjub3L1hPwWedCel5A7RmLO1DkLgYQ2XHJju1HaLHbTQzjl51K-2ouJM5DVk3x7oTo10tlMLW_-YCTtJb4Gfvri1qLfD5uXWjxuCIUhk11xmdMFzdJmQbpzOZy7NtEDzmkd46-1ByR5Kn04hW_MP_K8gS4nYReZpPFIRoPkNp3Ssbw2Z1NfzUDUQmHwjXMzS1pLxXSvIwe4akJfByH0zwMnzCWV68FXIFdXvBaFGWOHBq1dd1Er200VCvoQRnwlncaM9WW2TigGR9PwWPlMHe0suxnxW3QVV-wrjXH4HZQNUly8gnoEOAxHqc0F2ny8h7xvMSk8oMGLmehcS8gAA',
     id_token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUzMzYxLCJuYmYiOjE1MTc4NTMzNjEsImV4cCI6MTUxNzg1NzI2MSwiYWlvIjoiQVNRQTIvOEdBQUFBYWYxS3Aydy8vcDN1UHBaMy92dlN1c09TUVI3OWxaN1o4UFVYaTJoUjZMTT0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6IjdEQjJsMGRHSktPX3JYQ3BRZVFBVFEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoiZ2hyd0xNdzBNUzZkcnhuRFgtdjhENmJPTGNEM3h0Q1ciLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6Imh2N2lkeW5lZjBxY1puZXY0d1lYQUEiLCJ2ZXIiOiIxLjAifQ.Qmj-NpROTIOqoDMyWJD8hVCTjJbfnUWRZg4ywtvY9DDeFcp8O1ctvIQZJ1sGYbf5qq6JigJAe8vnC0rqyBWVCcFTGucq3Gan7zW2E2Q4prcamWv3WjwQMDe-ar2LjQBEmbQcaZP2osTL9IMGFh6lGdjF-iVpkQc5mFRKnTk-J5c94Xt1iHy8lyA2mtmxOb1DkU1jO9JUqE73prthfdOcR5enuG9qPDRF4bZLYgn-uIJp7HgLZQisHat-tqgBCUvLMCOUbfK7wsX9cauU5UY1_52W1lTqMYpLatFcdMGz-5fN227yXMAEPzqaxZXCyqrINfzQxlJkVMD1Nnj1rdUuTA',
     state: 'CUSTOMTiyYzWuRxCBaLX5g-lKjGZfQwnq15qo1my_state',
     session_state: 'a4eab50d-afe3-40e1-92b7-517677a51945' },
  _body: true,
  length: undefined,
  read: [Function],
  _startAt: [ 733573, 66590477 ],
  _startTime: 2018-02-05T18:01:03.406Z,
  _remoteAddress: '::1',
  _passport: 
   { instance: 
      Authenticator {
        _key: 'passport',
        _strategies: [Object],
        _serializers: [Object],
        _deserializers: [Object],
        _infoTransformers: [],
        _framework: [Object],
        _userProperty: 'user',
        Authenticator: [Function: Authenticator],
        Passport: [Function: Authenticator],
        Strategy: [Object],
        strategies: [Object] },
     session: { user: 'xchen@contracosta.courts.ca.gov' } },
  user: 
   { _id: 5a737e49e440d2445c40b21c,
     updatedAt: 2018-02-01T20:53:29.268Z,
     createdAt: 2018-02-01T20:53:29.268Z,
     authType: 'azure',
     email: 'xchen@contracosta.courts.ca.gov',
     __v: 0,
     role: 'Member',
     cases: [],
     profile: { firstName: 'Xi', lastName: 'Chen' } },
  route: 
   Route {
     path: '/api/auth/openid/return',
     stack: [ [Object], [Object] ],
     methods: { post: true } } }
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":30,"msg":"metadataUrl is: https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9","time":"2018-02-05T18:01:03.495Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":30,"msg":"received the following items in params: {\"id_token\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUzMzYxLCJuYmYiOjE1MTc4NTMzNjEsImV4cCI6MTUxNzg1NzI2MSwiYWlvIjoiQVNRQTIvOEdBQUFBYWYxS3Aydy8vcDN1UHBaMy92dlN1c09TUVI3OWxaN1o4UFVYaTJoUjZMTT0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6IjdEQjJsMGRHSktPX3JYQ3BRZVFBVFEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoiZ2hyd0xNdzBNUzZkcnhuRFgtdjhENmJPTGNEM3h0Q1ciLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6Imh2N2lkeW5lZjBxY1puZXY0d1lYQUEiLCJ2ZXIiOiIxLjAifQ.Qmj-NpROTIOqoDMyWJD8hVCTjJbfnUWRZg4ywtvY9DDeFcp8O1ctvIQZJ1sGYbf5qq6JigJAe8vnC0rqyBWVCcFTGucq3Gan7zW2E2Q4prcamWv3WjwQMDe-ar2LjQBEmbQcaZP2osTL9IMGFh6lGdjF-iVpkQc5mFRKnTk-J5c94Xt1iHy8lyA2mtmxOb1DkU1jO9JUqE73prthfdOcR5enuG9qPDRF4bZLYgn-uIJp7HgLZQisHat-tqgBCUvLMCOUbfK7wsX9cauU5UY1_52W1lTqMYpLatFcdMGz-5fN227yXMAEPzqaxZXCyqrINfzQxlJkVMD1Nnj1rdUuTA\",\"code\":\"AQABAAIAAABHh4kmS_aKT5XrjzxRAtHz8o49R9B4BqfioIrtFConxHSiMxRdEldt9NotpzlL1UTcVrPJN5OCKuo9gCPgxSs5HG934pDzQAYDdu9BEtTiehOI-V8w13OK3tZ-JzY8IrBJFs0waFKKlDe5P2zimyRfVwHUW4KZI9cuN6_XN14aT9eL4Snt_RdgsjyjAVa1Pmyswcr_LoXqQ881Cpx-DC3wQBi_-z0lsouBL-Fzc4jc43H7A8AF5QcFhpIdvjprWTp0t-8FCbURqmBPYbeFsbquNO9LGXcfc7i47RrKQXfe9l7KWlEjub3L1hPwWedCel5A7RmLO1DkLgYQ2XHJju1HaLHbTQzjl51K-2ouJM5DVk3x7oTo10tlMLW_-YCTtJb4Gfvri1qLfD5uXWjxuCIUhk11xmdMFzdJmQbpzOZy7NtEDzmkd46-1ByR5Kn04hW_MP_K8gS4nYReZpPFIRoPkNp3Ssbw2Z1NfzUDUQmHwjXMzS1pLxXSvIwe4akJfByH0zwMnzCWV68FXIFdXvBaFGWOHBq1dd1Er200VCvoQRnwlncaM9WW2TigGR9PwWPlMHe0suxnxW3QVV-wrjXH4HZQNUly8gnoEOAxHqc0F2ny8h7xvMSk8oMGLmehcS8gAA\",\"state\":\"CUSTOMTiyYzWuRxCBaLX5g-lKjGZfQwnq15qo1my_state\",\"nonce\":\"ghrwLMw0MS6drxnDX-v8D6bOLcD3xtCW\",\"resource\":\"https://graph.windows.net\",\"cachekey\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":{\"url\":\"https://login.microsoftonline.com/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/.well-known/openid-configuration?x-client-SKU=passport-azure-ad&x-client-Ver=3.0.9\",\"metadata\":null,\"authtype\":\"oidc\"}}","time":"2018-02-05T18:01:03.495Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":30,"msg":"entering Strategy.prototype._hybridFlowHandler, received code: AQABAAIAAABHh4kmS_aKT5XrjzxRAtHz8o49R9B4BqfioIrtFConxHSiMxRdEldt9NotpzlL1UTcVrPJN5OCKuo9gCPgxSs5HG934pDzQAYDdu9BEtTiehOI-V8w13OK3tZ-JzY8IrBJFs0waFKKlDe5P2zimyRfVwHUW4KZI9cuN6_XN14aT9eL4Snt_RdgsjyjAVa1Pmyswcr_LoXqQ881Cpx-DC3wQBi_-z0lsouBL-Fzc4jc43H7A8AF5QcFhpIdvjprWTp0t-8FCbURqmBPYbeFsbquNO9LGXcfc7i47RrKQXfe9l7KWlEjub3L1hPwWedCel5A7RmLO1DkLgYQ2XHJju1HaLHbTQzjl51K-2ouJM5DVk3x7oTo10tlMLW_-YCTtJb4Gfvri1qLfD5uXWjxuCIUhk11xmdMFzdJmQbpzOZy7NtEDzmkd46-1ByR5Kn04hW_MP_K8gS4nYReZpPFIRoPkNp3Ssbw2Z1NfzUDUQmHwjXMzS1pLxXSvIwe4akJfByH0zwMnzCWV68FXIFdXvBaFGWOHBq1dd1Er200VCvoQRnwlncaM9WW2TigGR9PwWPlMHe0suxnxW3QVV-wrjXH4HZQNUly8gnoEOAxHqc0F2ny8h7xvMSk8oMGLmehcS8gAA, received id_token: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUzMzYxLCJuYmYiOjE1MTc4NTMzNjEsImV4cCI6MTUxNzg1NzI2MSwiYWlvIjoiQVNRQTIvOEdBQUFBYWYxS3Aydy8vcDN1UHBaMy92dlN1c09TUVI3OWxaN1o4UFVYaTJoUjZMTT0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6IjdEQjJsMGRHSktPX3JYQ3BRZVFBVFEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoiZ2hyd0xNdzBNUzZkcnhuRFgtdjhENmJPTGNEM3h0Q1ciLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6Imh2N2lkeW5lZjBxY1puZXY0d1lYQUEiLCJ2ZXIiOiIxLjAifQ.Qmj-NpROTIOqoDMyWJD8hVCTjJbfnUWRZg4ywtvY9DDeFcp8O1ctvIQZJ1sGYbf5qq6JigJAe8vnC0rqyBWVCcFTGucq3Gan7zW2E2Q4prcamWv3WjwQMDe-ar2LjQBEmbQcaZP2osTL9IMGFh6lGdjF-iVpkQc5mFRKnTk-J5c94Xt1iHy8lyA2mtmxOb1DkU1jO9JUqE73prthfdOcR5enuG9qPDRF4bZLYgn-uIJp7HgLZQisHat-tqgBCUvLMCOUbfK7wsX9cauU5UY1_52W1lTqMYpLatFcdMGz-5fN227yXMAEPzqaxZXCyqrINfzQxlJkVMD1Nnj1rdUuTA","time":"2018-02-05T18:01:03.496Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":30,"msg":"token decoded:  { header: \n   { typ: 'JWT',\n     alg: 'RS256',\n     x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n     kid: 'z44wMdHu8wKsumrbfaK98qxs5YI' },\n  payload: \n   { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n     iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n     iat: 1517853361,\n     nbf: 1517853361,\n     exp: 1517857261,\n     aio: 'ASQA2/8GAAAAaf1Kp2w//p3uPpZ3/vvSusOSQR79lZ7Z8PUXi2hR6LM=',\n     amr: [ 'pwd' ],\n     c_hash: '7DB2l0dGJKO_rXCpQeQATQ',\n     family_name: 'Chen',\n     given_name: 'Xi',\n     ipaddr: '73.41.83.228',\n     name: 'Xi Chen',\n     nonce: 'ghrwLMw0MS6drxnDX-v8D6bOLcD3xtCW',\n     oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n     onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n     sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n     tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n     unique_name: 'XChen@contracosta.courts.ca.gov',\n     upn: 'XChen@contracosta.courts.ca.gov',\n     uti: 'hv7idynef0qcZnev4wYXAA',\n     ver: '1.0' },\n  signature: 'Qmj-NpROTIOqoDMyWJD8hVCTjJbfnUWRZg4ywtvY9DDeFcp8O1ctvIQZJ1sGYbf5qq6JigJAe8vnC0rqyBWVCcFTGucq3Gan7zW2E2Q4prcamWv3WjwQMDe-ar2LjQBEmbQcaZP2osTL9IMGFh6lGdjF-iVpkQc5mFRKnTk-J5c94Xt1iHy8lyA2mtmxOb1DkU1jO9JUqE73prthfdOcR5enuG9qPDRF4bZLYgn-uIJp7HgLZQisHat-tqgBCUvLMCOUbfK7wsX9cauU5UY1_52W1lTqMYpLatFcdMGz-5fN227yXMAEPzqaxZXCyqrINfzQxlJkVMD1Nnj1rdUuTA' }","time":"2018-02-05T18:01:03.499Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":1008,"level":30,"msg":"working on key: { kty: 'RSA',\n  use: 'sig',\n  kid: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  n: 'p3HhMQsqmgSjeiDsZ1ay-UAFgFMdBYgGGkGa2L0ew6_q3b2x9Ccdru_amVp1HXV2FVwbpK0HYsTSRvWIiCRRT-AgMSIlap7qlg8-iYvdFIJsorf84-sRN9Iq3F1pKD-W9vqsitcEbzljHCLSS2vUKSb7itwjc_AKjky3cX5ndMupQESZNTbiwanM9dAJ7K87pURXN66lS_q9u7wxWvjc3iLEp25PU_06moGDMe5BWuD6Rb_pdFM1plm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wSbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0Q',\n  e: 'AQAB',\n  x5c: [ 'MIIDBTCCAe2gAwIBAgIQaD0+a2FNl5JMaE2/7KUP5zANBgkqhkiG9w0BAQsFADAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MB4XDTE3MTEyODAwMDAwMFoXDTE5MTEyOTAwMDAwMFowLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKdx4TELKpoEo3og7GdWsvlABYBTHQWIBhpBmti9HsOv6t29sfQnHa7v2pladR11dhVcG6StB2LE0kb1iIgkUU/gIDEiJWqe6pYPPomL3RSCbKK3/OPrETfSKtxdaSg/lvb6rIrXBG85Yxwi0ktr1Ckm+4rcI3PwCo5Mt3F+Z3TLqUBEmTU24sGpzPXQCeyvO6VEVzeupUv6vbu8MVr43N4ixKduT1P9OpqBgzHuQVrg+kW/6XRTNaZZthTlITG8VEa8I02S2Q4VyosdzcrMQmRp75MTA2YKdqTexTKmWKaXFIcGCbvMEm35sIfIVziQ8YMSEC+7GBoh3k2g2BFRgtECAwEAAaMhMB8wHQYDVR0OBBYEFGpho/kx4FeBzTTBIbYVWfFdGIblMA0GCSqGSIb3DQEBCwUAA4IBAQBgaeYvuV4sYJZNPXbxN6FIc0oA4bCg1+DFalT3qzW0bFbl7pXP5YPY/adZlT8+cTznjMgzPPvcXaQdcytR16YqHJVX0ik67NrrQ3g0TtGLc42SuzE+6awryiLQY0Zd799bJwrRcDZUqm/6jKOEOd+utf+3o+VU57w+n7iQLuSL1mKYGMsyzMYCj6xVtYl75iam86leT0/tlXHJ8oqxU5w3xVY6P7v0Sz2UteQNQvhKi6R1/cjfiJUp+OzHpaEor6ls7HSvojY2zm1DIaH6EBp2L9TBFt8IALAEN5hX6XYpKmCHRUlzYwoWo7YwzKiot0XdbDW+zPKGPKtIlbg6cw/+' ] }","time":"2018-02-05T18:01:03.499Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":30,"msg":"PEMkey generated: -----BEGIN RSA PUBLIC KEY-----\nMIIBCgKCAQEAp3HhMQsqmgSjeiDsZ1ay+UAFgFMdBYgGGkGa2L0ew6/q3b2x9Ccd\nru/amVp1HXV2FVwbpK0HYsTSRvWIiCRRT+AgMSIlap7qlg8+iYvdFIJsorf84+sR\nN9Iq3F1pKD+W9vqsitcEbzljHCLSS2vUKSb7itwjc/AKjky3cX5ndMupQESZNTbi\nwanM9dAJ7K87pURXN66lS/q9u7wxWvjc3iLEp25PU/06moGDMe5BWuD6Rb/pdFM1\nplm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wS\nbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0QIDAQAB\n-----END RSA PUBLIC KEY-----\n","time":"2018-02-05T18:01:03.500Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":30,"msg":"Claims received:  { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n  iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n  iat: 1517853361,\n  nbf: 1517853361,\n  exp: 1517857261,\n  aio: 'ASQA2/8GAAAAaf1Kp2w//p3uPpZ3/vvSusOSQR79lZ7Z8PUXi2hR6LM=',\n  amr: [ 'pwd' ],\n  c_hash: '7DB2l0dGJKO_rXCpQeQATQ',\n  family_name: 'Chen',\n  given_name: 'Xi',\n  ipaddr: '73.41.83.228',\n  name: 'Xi Chen',\n  nonce: 'ghrwLMw0MS6drxnDX-v8D6bOLcD3xtCW',\n  oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n  onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n  sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n  tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n  unique_name: 'XChen@contracosta.courts.ca.gov',\n  upn: 'XChen@contracosta.courts.ca.gov',\n  uti: 'hv7idynef0qcZnev4wYXAA',\n  ver: '1.0' }","time":"2018-02-05T18:01:03.503Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":30,"msg":"entering Strategy.prototype._authCodeFlowHandler, received code: AQABAAIAAABHh4kmS_aKT5XrjzxRAtHz8o49R9B4BqfioIrtFConxHSiMxRdEldt9NotpzlL1UTcVrPJN5OCKuo9gCPgxSs5HG934pDzQAYDdu9BEtTiehOI-V8w13OK3tZ-JzY8IrBJFs0waFKKlDe5P2zimyRfVwHUW4KZI9cuN6_XN14aT9eL4Snt_RdgsjyjAVa1Pmyswcr_LoXqQ881Cpx-DC3wQBi_-z0lsouBL-Fzc4jc43H7A8AF5QcFhpIdvjprWTp0t-8FCbURqmBPYbeFsbquNO9LGXcfc7i47RrKQXfe9l7KWlEjub3L1hPwWedCel5A7RmLO1DkLgYQ2XHJju1HaLHbTQzjl51K-2ouJM5DVk3x7oTo10tlMLW_-YCTtJb4Gfvri1qLfD5uXWjxuCIUhk11xmdMFzdJmQbpzOZy7NtEDzmkd46-1ByR5Kn04hW_MP_K8gS4nYReZpPFIRoPkNp3Ssbw2Z1NfzUDUQmHwjXMzS1pLxXSvIwe4akJfByH0zwMnzCWV68FXIFdXvBaFGWOHBq1dd1Er200VCvoQRnwlncaM9WW2TigGR9PwWPlMHe0suxnxW3QVV-wrjXH4HZQNUly8gnoEOAxHqc0F2ny8h7xvMSk8oMGLmehcS8gAA","time":"2018-02-05T18:01:03.503Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":30,"msg":"In _getAccessTokenBySecretOrAssertion: we are using client secret","time":"2018-02-05T18:01:03.504Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":30,"msg":"received id_token:  eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUzMzYxLCJuYmYiOjE1MTc4NTMzNjEsImV4cCI6MTUxNzg1NzI2MSwiYWlvIjoiQVNRQTIvOEdBQUFBdzdVV3ZERC9mZWhaU3YrM0IwWEt0RVh6Vk1UQ3pLUktVb1NiSzAxRVNyWT0iLCJhbXIiOlsicHdkIl0sImZhbWlseV9uYW1lIjoiQ2hlbiIsImdpdmVuX25hbWUiOiJYaSIsImlwYWRkciI6IjczLjQxLjgzLjIyOCIsIm5hbWUiOiJYaSBDaGVuIiwibm9uY2UiOiJnaHJ3TE13ME1TNmRyeG5EWC12OEQ2Yk9MY0QzeHRDVyIsIm9pZCI6IjlmNTU0ZmYyLWQ0NTUtNDkxMi1iYzE3LWZiOTBhYjY3NzI2NiIsIm9ucHJlbV9zaWQiOiJTLTEtNS0yMS00OTc0MDQ4NTUtNTk3NjM1OTkyLTk4ODg4MjU3Ni0xNDI4MCIsInN1YiI6InpGZHFRZXlWLV9aTmVNNzdmZHlOc0c4Vzk0ejJ3OVpTdlU2ZjlqTmIxejgiLCJ0aWQiOiI4Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYiLCJ1bmlxdWVfbmFtZSI6IlhDaGVuQGNvbnRyYWNvc3RhLmNvdXJ0cy5jYS5nb3YiLCJ1cG4iOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXRpIjoiVWtlRU1qZEd1RUM1bVh2US1uMFdBQSIsInZlciI6IjEuMCJ9.RTVLuaQyCh9KTTNbQJBdnKpdd089xU1lLolBgmYBRPLboymPw8Usdhfc_LPPX9znrDKHAY-PU8vkC5ORiLAa7FXqsD1HOC5xJxMarGAvhE_mcWgJY54P4-MR3P0WHTZ2jDD6Nwc0S2gJWfR-vTSLP5Ec7I48rWjjErauzTRIB_mrWELD_VyyAQW92_toDoR-jC9pV6chs-NJn_CY_NofNiv31qNjf06Qo6ldPWpMc94YmsBJGdqkpumiVhUKHFwdhnF0O744pN7_d6vKcD5IAzVnVqOM2FgiV2N0kYFAcAGuSEuwusCtCH8chxhXD0Cf1bB02Ff0TbtKSlhigjwiww","time":"2018-02-05T18:01:03.765Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":30,"msg":"received access_token:  eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiJodHRwczovL2dyYXBoLndpbmRvd3MubmV0IiwiaXNzIjoiaHR0cHM6Ly9zdHMud2luZG93cy5uZXQvOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmLyIsImlhdCI6MTUxNzg1MzM2MSwibmJmIjoxNTE3ODUzMzYxLCJleHAiOjE1MTc4NTcyNjEsImFjciI6IjEiLCJhaW8iOiJZMk5nWUpqS2J6dWgwVWJGVkdPbnF1SlRyaWp1cHdmdDQyOHR1MlBPVVZRbWNDUHU0ZzBBIiwiYW1yIjpbInB3ZCJdLCJhcHBpZCI6IjJmNmZlYTEyLWUzYzEtNDdkNS1hZTcyLTUyODVjNmVlY2VmMSIsImFwcGlkYWNyIjoiMSIsImZhbWlseV9uYW1lIjoiQ2hlbiIsImdpdmVuX25hbWUiOiJYaSIsImlwYWRkciI6IjczLjQxLjgzLjIyOCIsIm5hbWUiOiJYaSBDaGVuIiwib2lkIjoiOWY1NTRmZjItZDQ1NS00OTEyLWJjMTctZmI5MGFiNjc3MjY2Iiwib25wcmVtX3NpZCI6IlMtMS01LTIxLTQ5NzQwNDg1NS01OTc2MzU5OTItOTg4ODgyNTc2LTE0MjgwIiwicHVpZCI6IjEwMDMzRkZGQTI2RUM5MEMiLCJzY3AiOiJNYWlsLlJlYWQgb2ZmbGluZV9hY2Nlc3Mgb3BlbmlkIHByb2ZpbGUgVXNlci5SZWFkIiwic3ViIjoiNUxlaUFtMk40NDkxYXYtR21MT19XTzVBVWZHTG42Z1Z2OUR1TmhLazBTdyIsInRlbmFudF9yZWdpb25fc2NvcGUiOiJOQSIsInRpZCI6IjhjYTlkOGYxLWQ5NzYtNDQ0NS1hM2NjLTNmZmMzZTI5YTNmZiIsInVuaXF1ZV9uYW1lIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInVwbiI6IlhDaGVuQGNvbnRyYWNvc3RhLmNvdXJ0cy5jYS5nb3YiLCJ1dGkiOiJVa2VFTWpkR3VFQzVtWHZRLW4wV0FBIiwidmVyIjoiMS4wIn0.eYyFsKppFqTE7UvXioCgsbYmJTKzGEhp0TrFeB7dwjFdW3aPsWaj8PySeNyLOtocsRktMYaV1YCHGmw7A_IRqPzUOb6AuXI84esWT-HNdgDHtXIFHrJMS6ne8n-Y-8xhH6IWgj1YdvUzsbY3Y0yvp8MQBJeGgnR8nFd26kvY0oYCXhy8Q233eWF-_pgXGvLjpeBtMUADjBkFZ55GAmw9moG5twitFP2Gyh1O_FRKzpdrYax68EaL90oE0zPBahKkoxWV81mIFcN_MX1NqgRezLQLnx08mXBZXjfMxUZ4ldYxj_zB_gdJorx_ZpA_D6tEWtRiwLCF-pM9v-y58HlYog","time":"2018-02-05T18:01:03.765Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":30,"msg":"received refresh_token:  AQABAAAAAABHh4kmS_aKT5XrjzxRAtHz3XBrL4WNGXjO-D-w3qwjGMRfE9Z_tZMPIQjhKxVF5JP9ZXKer_bx_AQPpLIL6EzpZNJH7XReLBFO5tNEGAzEDgp1_p80vFPSVblWlnpJNqIWMHy7anO6ejwc6rfSewCzUcmCe1e-pzeOShVlgKnTz27vY80Hzk01jg3G9d7yReNQcUAcyqRDMm8iqGKt_2Rfy2UuSz1WHPUYIdqmyl_RRaqJIhYEaEKAc4_kVt2AkM8JtWS3bGrJNAz14A4AFE1OTIlPdIsX2VepsWxybH7o7z5tgM4qyGbHZMdaGkDqyGN00ojtyl22IjXznylAx1ypLJ2l4WNor2BNQOpZ6OCT2sq7pev4Mq7F5vHRWjRrjV2C1W3LrUCVBr8EoJRaFnN39EtkhqA_mS5Wk-nO7Uor4w5tCdg8n34TAr97to3VZwqABPCExd5HxLYz2DsUGeUUTU7fqcNtXuPbong6PhyY4cGPvTevdGzY83CqcDergYoQM5GsW2DDpao62Nc88n02H4T-QPoSDRgcetGT0VtIsJ_l_XUA0L_dv6kYFsxOp8LFXAYyWcmyS4bat2dsLDO3MuoAu8cPgmWVv4yEnPFdeadn3djfAZDwyM9SHLjwAj065_F8x41_TD6HVRIXDoGb5HI8Z4DYOiznUDBG2mn97FmGStPdSUF8YkpHzIhkdhidhsBBUkgjByUXq0DgKzvojxcam_dADd_ERlLqUZKnCFaGMtVFlfXOYy144oROHbMAauHPeC91vDloUm-_n7LMXLOZPRpKvJHJHDS_8_Elw479kGFxi-UUTRkkETBqZJjCJy8AgtzfeVUgjxsfMnRvIAA","time":"2018-02-05T18:01:03.766Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":30,"msg":"token decoded:  { header: \n   { typ: 'JWT',\n     alg: 'RS256',\n     x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n     kid: 'z44wMdHu8wKsumrbfaK98qxs5YI' },\n  payload: \n   { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n     iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n     iat: 1517853361,\n     nbf: 1517853361,\n     exp: 1517857261,\n     aio: 'ASQA2/8GAAAAw7UWvDD/fehZSv+3B0XKtEXzVMTCzKRKUoSbK01ESrY=',\n     amr: [ 'pwd' ],\n     family_name: 'Chen',\n     given_name: 'Xi',\n     ipaddr: '73.41.83.228',\n     name: 'Xi Chen',\n     nonce: 'ghrwLMw0MS6drxnDX-v8D6bOLcD3xtCW',\n     oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n     onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n     sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n     tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n     unique_name: 'XChen@contracosta.courts.ca.gov',\n     upn: 'XChen@contracosta.courts.ca.gov',\n     uti: 'UkeEMjdGuEC5mXvQ-n0WAA',\n     ver: '1.0' },\n  signature: 'RTVLuaQyCh9KTTNbQJBdnKpdd089xU1lLolBgmYBRPLboymPw8Usdhfc_LPPX9znrDKHAY-PU8vkC5ORiLAa7FXqsD1HOC5xJxMarGAvhE_mcWgJY54P4-MR3P0WHTZ2jDD6Nwc0S2gJWfR-vTSLP5Ec7I48rWjjErauzTRIB_mrWELD_VyyAQW92_toDoR-jC9pV6chs-NJn_CY_NofNiv31qNjf06Qo6ldPWpMc94YmsBJGdqkpumiVhUKHFwdhnF0O744pN7_d6vKcD5IAzVnVqOM2FgiV2N0kYFAcAGuSEuwusCtCH8chxhXD0Cf1bB02Ff0TbtKSlhigjwiww' }","time":"2018-02-05T18:01:03.766Z","v":0}
{"name":"AzureAD: Metadata Parser","hostname":"Peacha","pid":1008,"level":30,"msg":"working on key: { kty: 'RSA',\n  use: 'sig',\n  kid: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  x5t: 'z44wMdHu8wKsumrbfaK98qxs5YI',\n  n: 'p3HhMQsqmgSjeiDsZ1ay-UAFgFMdBYgGGkGa2L0ew6_q3b2x9Ccdru_amVp1HXV2FVwbpK0HYsTSRvWIiCRRT-AgMSIlap7qlg8-iYvdFIJsorf84-sRN9Iq3F1pKD-W9vqsitcEbzljHCLSS2vUKSb7itwjc_AKjky3cX5ndMupQESZNTbiwanM9dAJ7K87pURXN66lS_q9u7wxWvjc3iLEp25PU_06moGDMe5BWuD6Rb_pdFM1plm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wSbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0Q',\n  e: 'AQAB',\n  x5c: [ 'MIIDBTCCAe2gAwIBAgIQaD0+a2FNl5JMaE2/7KUP5zANBgkqhkiG9w0BAQsFADAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MB4XDTE3MTEyODAwMDAwMFoXDTE5MTEyOTAwMDAwMFowLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKdx4TELKpoEo3og7GdWsvlABYBTHQWIBhpBmti9HsOv6t29sfQnHa7v2pladR11dhVcG6StB2LE0kb1iIgkUU/gIDEiJWqe6pYPPomL3RSCbKK3/OPrETfSKtxdaSg/lvb6rIrXBG85Yxwi0ktr1Ckm+4rcI3PwCo5Mt3F+Z3TLqUBEmTU24sGpzPXQCeyvO6VEVzeupUv6vbu8MVr43N4ixKduT1P9OpqBgzHuQVrg+kW/6XRTNaZZthTlITG8VEa8I02S2Q4VyosdzcrMQmRp75MTA2YKdqTexTKmWKaXFIcGCbvMEm35sIfIVziQ8YMSEC+7GBoh3k2g2BFRgtECAwEAAaMhMB8wHQYDVR0OBBYEFGpho/kx4FeBzTTBIbYVWfFdGIblMA0GCSqGSIb3DQEBCwUAA4IBAQBgaeYvuV4sYJZNPXbxN6FIc0oA4bCg1+DFalT3qzW0bFbl7pXP5YPY/adZlT8+cTznjMgzPPvcXaQdcytR16YqHJVX0ik67NrrQ3g0TtGLc42SuzE+6awryiLQY0Zd799bJwrRcDZUqm/6jKOEOd+utf+3o+VU57w+n7iQLuSL1mKYGMsyzMYCj6xVtYl75iam86leT0/tlXHJ8oqxU5w3xVY6P7v0Sz2UteQNQvhKi6R1/cjfiJUp+OzHpaEor6ls7HSvojY2zm1DIaH6EBp2L9TBFt8IALAEN5hX6XYpKmCHRUlzYwoWo7YwzKiot0XdbDW+zPKGPKtIlbg6cw/+' ] }","time":"2018-02-05T18:01:03.766Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":30,"msg":"PEMkey generated: -----BEGIN RSA PUBLIC KEY-----\nMIIBCgKCAQEAp3HhMQsqmgSjeiDsZ1ay+UAFgFMdBYgGGkGa2L0ew6/q3b2x9Ccd\nru/amVp1HXV2FVwbpK0HYsTSRvWIiCRRT+AgMSIlap7qlg8+iYvdFIJsorf84+sR\nN9Iq3F1pKD+W9vqsitcEbzljHCLSS2vUKSb7itwjc/AKjky3cX5ndMupQESZNTbi\nwanM9dAJ7K87pURXN66lS/q9u7wxWvjc3iLEp25PU/06moGDMe5BWuD6Rb/pdFM1\nplm2FOUhMbxURrwjTZLZDhXKix3NysxCZGnvkxMDZgp2pN7FMqZYppcUhwYJu8wS\nbfmwh8hXOJDxgxIQL7sYGiHeTaDYEVGC0QIDAQAB\n-----END RSA PUBLIC KEY-----\n","time":"2018-02-05T18:01:03.766Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":30,"msg":"Claims received:  { aud: '2f6fea12-e3c1-47d5-ae72-5285c6eecef1',\n  iss: 'https://sts.windows.net/8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff/',\n  iat: 1517853361,\n  nbf: 1517853361,\n  exp: 1517857261,\n  aio: 'ASQA2/8GAAAAw7UWvDD/fehZSv+3B0XKtEXzVMTCzKRKUoSbK01ESrY=',\n  amr: [ 'pwd' ],\n  family_name: 'Chen',\n  given_name: 'Xi',\n  ipaddr: '73.41.83.228',\n  name: 'Xi Chen',\n  nonce: 'ghrwLMw0MS6drxnDX-v8D6bOLcD3xtCW',\n  oid: '9f554ff2-d455-4912-bc17-fb90ab677266',\n  onprem_sid: 'S-1-5-21-497404855-597635992-988882576-14280',\n  sub: 'zFdqQeyV-_ZNeM77fdyNsG8W94z2w9ZSvU6f9jNb1z8',\n  tid: '8ca9d8f1-d976-4445-a3cc-3ffc3e29a3ff',\n  unique_name: 'XChen@contracosta.courts.ca.gov',\n  upn: 'XChen@contracosta.courts.ca.gov',\n  uti: 'UkeEMjdGuEC5mXvQ-n0WAA',\n  ver: '1.0' }","time":"2018-02-05T18:01:03.767Z","v":0}
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":1008,"level":30,"msg":"v2 has no userinfo endpoint, using the content in id_token as the profile","time":"2018-02-05T18:01:03.767Z","v":0}
OIDCStrategy invoked
email:  XChen@contracosta.courts.ca.gov
err:  null
user:  { _id: 5a737e49e440d2445c40b21c,
  updatedAt: 2018-02-01T20:53:29.268Z,
  createdAt: 2018-02-01T20:53:29.268Z,
  authType: 'azure',
  email: 'xchen@contracosta.courts.ca.gov',
  __v: 0,
  role: 'Member',
  cases: [],
  profile: { firstName: 'Xi', lastName: 'Chen' } }
serializing user:  { _id: 5a737e49e440d2445c40b21c,
  updatedAt: 2018-02-01T20:53:29.268Z,
  createdAt: 2018-02-01T20:53:29.268Z,
  authType: 'azure',
  email: 'xchen@contracosta.courts.ca.gov',
  __v: 0,
  role: 'Member',
  cases: [],
  profile: { firstName: 'Xi', lastName: 'Chen' } }
We received a posted return from AzureAD:  IncomingMessage {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 16384,
     buffer: BufferList { head: null, tail: null, length: 0 },
     length: 0,
     pipes: null,
     pipesCount: 0,
     flowing: true,
     ended: true,
     endEmitted: true,
     reading: false,
     sync: true,
     needReadable: false,
     emittedReadable: false,
     readableListening: false,
     resumeScheduled: false,
     defaultEncoding: 'utf8',
     ranOut: false,
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: false,
  domain: null,
  _events: {},
  _eventsCount: 0,
  _maxListeners: undefined,
  socket: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 13686,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 18781,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25352 } },
  connection: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 13686,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 18781,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25352 } },
  httpVersionMajor: 1,
  httpVersionMinor: 1,
  httpVersion: '1.1',
  complete: true,
  headers: 
   { host: 'localhost:3000',
     connection: 'keep-alive',
     'content-length': '2231',
     'cache-control': 'max-age=0',
     'upgrade-insecure-requests': '1',
     origin: 'null',
     'content-type': 'application/x-www-form-urlencoded',
     'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'accept-encoding': 'gzip, deflate, br',
     'accept-language': 'en-US,en;q=0.9',
     cookie: 'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517853662767.fbd08e9a6335a4c3df307cd1824127114ad76fad05a5c82671a00afcadb691d651dfeb4a6dee5573086a5d5c7be97f88e041c58c50e3bb46757e320311401022b2b051181a8ed193d51cae7e53d15d8ba8f8541c19a0eeb485f801f6252c80110d5e2b8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.4fa17e7f38bd4d2bc05328d9918aea9e=0' },
  rawHeaders: 
   [ 'Host',
     'localhost:3000',
     'Connection',
     'keep-alive',
     'Content-Length',
     '2231',
     'Cache-Control',
     'max-age=0',
     'Upgrade-Insecure-Requests',
     '1',
     'Origin',
     'null',
     'Content-Type',
     'application/x-www-form-urlencoded',
     'User-Agent',
     'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36',
     'Accept',
     'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
     'Accept-Encoding',
     'gzip, deflate, br',
     'Accept-Language',
     'en-US,en;q=0.9',
     'Cookie',
     'connect.sid=s%3AR3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw%2B%2BTohQY8%2FYlSxxXW1AgPhmysT1xLoD7PEkUE; passport-aad.1517853662767.fbd08e9a6335a4c3df307cd1824127114ad76fad05a5c82671a00afcadb691d651dfeb4a6dee5573086a5d5c7be97f88e041c58c50e3bb46757e320311401022b2b051181a8ed193d51cae7e53d15d8ba8f8541c19a0eeb485f801f6252c80110d5e2b8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.4fa17e7f38bd4d2bc05328d9918aea9e=0' ],
  trailers: {},
  rawTrailers: [],
  upgrade: false,
  url: '/api/auth/openid/return',
  method: 'POST',
  statusCode: null,
  statusMessage: null,
  client: 
   Socket {
     connecting: false,
     _hadError: false,
     _handle: 
      TCP {
        bytesRead: 4849,
        _externalStream: {},
        fd: -1,
        reading: true,
        owner: [Circular],
        onread: [Function: onread],
        onconnection: null,
        writeQueueSize: 0,
        _consumed: true },
     _parent: null,
     _host: null,
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [Object],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: false,
        endEmitted: false,
        reading: true,
        sync: false,
        needReadable: true,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        defaultEncoding: 'utf8',
        ranOut: false,
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: true,
     domain: null,
     _events: 
      { end: [Object],
        finish: [Function: onSocketFinish],
        _socketEnd: [Function: onSocketEnd],
        drain: [Object],
        timeout: [Function],
        error: [Object],
        close: [Object],
        data: [Function: socketOnData],
        resume: [Function: onSocketResume],
        pause: [Function: onSocketPause] },
     _eventsCount: 10,
     _maxListeners: undefined,
     _writableState: 
      WritableState {
        objectMode: false,
        highWaterMark: 16384,
        needDrain: false,
        ending: false,
        ended: false,
        finished: false,
        decodeStrings: false,
        defaultEncoding: 'utf8',
        length: 0,
        writing: false,
        corked: 0,
        sync: false,
        bufferProcessing: false,
        onwrite: [Function],
        writecb: null,
        writelen: 0,
        bufferedRequest: null,
        lastBufferedRequest: null,
        pendingcb: 0,
        prefinished: false,
        errorEmitted: false,
        bufferedRequestCount: 0,
        corkedRequestsFree: [Object] },
     writable: true,
     allowHalfOpen: true,
     destroyed: false,
     _bytesDispatched: 1773,
     _sockname: null,
     _pendingData: null,
     _pendingEncoding: '',
     server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _server: 
      Server {
        domain: null,
        _events: [Object],
        _eventsCount: 4,
        _maxListeners: undefined,
        _connections: 2,
        _handle: [Object],
        _usingSlaves: false,
        _slaves: [],
        _unref: false,
        allowHalfOpen: true,
        pauseOnConnect: false,
        httpAllowHalfOpen: false,
        timeout: 120000,
        _pendingResponseData: 0,
        _connectionKey: '6::::3000' },
     _idleTimeout: 120000,
     _idleNext: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 729,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Circular],
        _idleStart: 13686,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: null },
     _idlePrev: 
      TimersList {
        _idleNext: [Circular],
        _idlePrev: [Object],
        _timer: [Object],
        _unrefed: true,
        msecs: 120000,
        nextTick: false },
     _idleStart: 18781,
     parser: 
      HTTPParser {
        '0': [Function: parserOnHeaders],
        '1': [Function: parserOnHeadersComplete],
        '2': [Function: parserOnBody],
        '3': [Function: parserOnMessageComplete],
        '4': [Function: onParserExecute],
        _headers: [],
        _url: '',
        _consumed: true,
        socket: [Circular],
        incoming: [Circular],
        outgoing: null,
        maxHeaderPairs: 2000,
        onIncoming: [Function: parserOnIncoming] },
     on: [Function: socketOnWrap],
     _paused: false,
     read: [Function],
     _consuming: true,
     _httpMessage: 
      ServerResponse {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        output: [],
        outputEncodings: [],
        outputCallbacks: [],
        outputSize: 0,
        writable: true,
        _last: false,
        upgrading: false,
        chunkedEncoding: false,
        shouldKeepAlive: true,
        useChunkedEncodingByDefault: true,
        sendDate: true,
        _removedHeader: {},
        _contentLength: null,
        _hasBody: true,
        _trailer: '',
        finished: false,
        _headerSent: false,
        socket: [Circular],
        connection: [Circular],
        _header: null,
        _headers: [Object],
        _headerNames: [Object],
        _onPendingData: [Function: updateOutgoingData],
        req: [Circular],
        locals: {},
        writeHead: [Function: writeHead],
        end: [Function: end],
        _startAt: undefined,
        _startTime: undefined,
        __onFinished: [Object] },
     _peername: { address: '::1', family: 'IPv6', port: 25352 } },
  _consuming: true,
  _dumped: false,
  next: [Function: next],
  baseUrl: '',
  originalUrl: '/api/auth/openid/return',
  _parsedUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  params: {},
  query: {},
  res: 
   ServerResponse {
     domain: null,
     _events: { finish: [Object], end: [Function: onevent] },
     _eventsCount: 2,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: false,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: true,
     useChunkedEncodingByDefault: true,
     sendDate: true,
     _removedHeader: {},
     _contentLength: null,
     _hasBody: true,
     _trailer: '',
     finished: false,
     _headerSent: false,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1773,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 18781,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [Object],
        _parent: null,
        _host: null,
        _readableState: [Object],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [Object],
        writable: true,
        allowHalfOpen: true,
        destroyed: false,
        _bytesDispatched: 1773,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Object],
        _server: [Object],
        _idleTimeout: 120000,
        _idleNext: [Object],
        _idlePrev: [Object],
        _idleStart: 18781,
        parser: [Object],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        _peername: [Object] },
     _header: null,
     _headers: 
      { 'x-powered-by': 'Express',
        'access-control-allow-origin': '*',
        'access-control-allow-methods': 'PUT, GET, POST, DELETE, OPTIONS',
        'access-control-allow-headers': 'Origin, X-Requested-With, Content-Type, Accept, Authorization, Access-Control-Allow-Credentials',
        'access-control-allow-credentials': 'true',
        'set-cookie': 'passport-aad.1517853662767.fbd08e9a6335a4c3df307cd1824127114ad76fad05a5c82671a00afcadb691d651dfeb4a6dee5573086a5d5c7be97f88e041c58c50e3bb46757e320311401022b2b051181a8ed193d51cae7e53d15d8ba8f8541c19a0eeb485f801f6252c80110d5e2b8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.4fa17e7f38bd4d2bc05328d9918aea9e=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT' },
     _headerNames: 
      { 'x-powered-by': 'X-Powered-By',
        'access-control-allow-origin': 'Access-Control-Allow-Origin',
        'access-control-allow-methods': 'Access-Control-Allow-Methods',
        'access-control-allow-headers': 'Access-Control-Allow-Headers',
        'access-control-allow-credentials': 'Access-Control-Allow-Credentials',
        'set-cookie': 'Set-Cookie' },
     _onPendingData: [Function: updateOutgoingData],
     req: [Circular],
     locals: {},
     writeHead: [Function: writeHead],
     end: [Function: end],
     _startAt: undefined,
     _startTime: undefined,
     __onFinished: { [Function: listener] queue: [Object] } },
  _parsedOriginalUrl: 
   Url {
     protocol: null,
     slashes: null,
     auth: null,
     host: null,
     port: null,
     hostname: null,
     hash: null,
     search: null,
     query: null,
     pathname: '/api/auth/openid/return',
     path: '/api/auth/openid/return',
     href: '/api/auth/openid/return',
     _raw: '/api/auth/openid/return' },
  sessionStore: 
   MongoStore {
     domain: null,
     _events: 
      { disconnect: [Function: ondisconnect],
        connect: [Function: onconnect] },
     _eventsCount: 2,
     _maxListeners: undefined,
     ttl: 1209600,
     collectionName: 'sessions',
     autoRemove: 'native',
     autoRemoveInterval: 10,
     transformFunctions: 
      { serialize: [Function: stringify],
        unserialize: [Function: parse] },
     options: { mongooseConnection: [Object], clear_interval: 86400 },
     state: 'connected',
     generate: [Function],
     db: 
      Db {
        domain: null,
        _events: [Object],
        _eventsCount: 2,
        _maxListeners: undefined,
        s: [Object],
        serverConfig: [Getter],
        bufferMaxEntries: [Getter],
        databaseName: [Getter] },
     collectionReadyPromise: Promise { [Object] },
     collection: Collection { s: [Object] } },
  sessionID: 'R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL',
  session: 
   Session {
     cookie: 
      { path: '/',
        _expires: 2018-02-06T18:01:02.769Z,
        originalMaxAge: 86399998,
        httpOnly: true },
     passport: { user: 'xchen@contracosta.courts.ca.gov' } },
  secret: undefined,
  cookies: 
   { 'connect.sid': 's:R3O5Jc9ThUq4ZgPkXadHfTv38F2tdfuL.sfZZ2Sw++TohQY8/YlSxxXW1AgPhmysT1xLoD7PEkUE',
     'passport-aad.1517853662767.fbd08e9a6335a4c3df307cd1824127114ad76fad05a5c82671a00afcadb691d651dfeb4a6dee5573086a5d5c7be97f88e041c58c50e3bb46757e320311401022b2b051181a8ed193d51cae7e53d15d8ba8f8541c19a0eeb485f801f6252c80110d5e2b8ca1b385c6ad69abf30377cfa10942d4951fdb8fc31763107247e5bbc9940055cc925500e7610e75a4.4fa17e7f38bd4d2bc05328d9918aea9e': '0' },
  signedCookies: {},
  body: 
   { code: 'AQABAAIAAABHh4kmS_aKT5XrjzxRAtHz8o49R9B4BqfioIrtFConxHSiMxRdEldt9NotpzlL1UTcVrPJN5OCKuo9gCPgxSs5HG934pDzQAYDdu9BEtTiehOI-V8w13OK3tZ-JzY8IrBJFs0waFKKlDe5P2zimyRfVwHUW4KZI9cuN6_XN14aT9eL4Snt_RdgsjyjAVa1Pmyswcr_LoXqQ881Cpx-DC3wQBi_-z0lsouBL-Fzc4jc43H7A8AF5QcFhpIdvjprWTp0t-8FCbURqmBPYbeFsbquNO9LGXcfc7i47RrKQXfe9l7KWlEjub3L1hPwWedCel5A7RmLO1DkLgYQ2XHJju1HaLHbTQzjl51K-2ouJM5DVk3x7oTo10tlMLW_-YCTtJb4Gfvri1qLfD5uXWjxuCIUhk11xmdMFzdJmQbpzOZy7NtEDzmkd46-1ByR5Kn04hW_MP_K8gS4nYReZpPFIRoPkNp3Ssbw2Z1NfzUDUQmHwjXMzS1pLxXSvIwe4akJfByH0zwMnzCWV68FXIFdXvBaFGWOHBq1dd1Er200VCvoQRnwlncaM9WW2TigGR9PwWPlMHe0suxnxW3QVV-wrjXH4HZQNUly8gnoEOAxHqc0F2ny8h7xvMSk8oMGLmehcS8gAA',
     id_token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSIsImtpZCI6Ino0NHdNZEh1OHdLc3VtcmJmYUs5OHF4czVZSSJ9.eyJhdWQiOiIyZjZmZWExMi1lM2MxLTQ3ZDUtYWU3Mi01Mjg1YzZlZWNlZjEiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC84Y2E5ZDhmMS1kOTc2LTQ0NDUtYTNjYy0zZmZjM2UyOWEzZmYvIiwiaWF0IjoxNTE3ODUzMzYxLCJuYmYiOjE1MTc4NTMzNjEsImV4cCI6MTUxNzg1NzI2MSwiYWlvIjoiQVNRQTIvOEdBQUFBYWYxS3Aydy8vcDN1UHBaMy92dlN1c09TUVI3OWxaN1o4UFVYaTJoUjZMTT0iLCJhbXIiOlsicHdkIl0sImNfaGFzaCI6IjdEQjJsMGRHSktPX3JYQ3BRZVFBVFEiLCJmYW1pbHlfbmFtZSI6IkNoZW4iLCJnaXZlbl9uYW1lIjoiWGkiLCJpcGFkZHIiOiI3My40MS44My4yMjgiLCJuYW1lIjoiWGkgQ2hlbiIsIm5vbmNlIjoiZ2hyd0xNdzBNUzZkcnhuRFgtdjhENmJPTGNEM3h0Q1ciLCJvaWQiOiI5ZjU1NGZmMi1kNDU1LTQ5MTItYmMxNy1mYjkwYWI2NzcyNjYiLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtNDk3NDA0ODU1LTU5NzYzNTk5Mi05ODg4ODI1NzYtMTQyODAiLCJzdWIiOiJ6RmRxUWV5Vi1fWk5lTTc3ZmR5TnNHOFc5NHoydzlaU3ZVNmY5ak5iMXo4IiwidGlkIjoiOGNhOWQ4ZjEtZDk3Ni00NDQ1LWEzY2MtM2ZmYzNlMjlhM2ZmIiwidW5pcXVlX25hbWUiOiJYQ2hlbkBjb250cmFjb3N0YS5jb3VydHMuY2EuZ292IiwidXBuIjoiWENoZW5AY29udHJhY29zdGEuY291cnRzLmNhLmdvdiIsInV0aSI6Imh2N2lkeW5lZjBxY1puZXY0d1lYQUEiLCJ2ZXIiOiIxLjAifQ.Qmj-NpROTIOqoDMyWJD8hVCTjJbfnUWRZg4ywtvY9DDeFcp8O1ctvIQZJ1sGYbf5qq6JigJAe8vnC0rqyBWVCcFTGucq3Gan7zW2E2Q4prcamWv3WjwQMDe-ar2LjQBEmbQcaZP2osTL9IMGFh6lGdjF-iVpkQc5mFRKnTk-J5c94Xt1iHy8lyA2mtmxOb1DkU1jO9JUqE73prthfdOcR5enuG9qPDRF4bZLYgn-uIJp7HgLZQisHat-tqgBCUvLMCOUbfK7wsX9cauU5UY1_52W1lTqMYpLatFcdMGz-5fN227yXMAEPzqaxZXCyqrINfzQxlJkVMD1Nnj1rdUuTA',
     state: 'my_state',
     session_state: 'a4eab50d-afe3-40e1-92b7-517677a51945' },
  _body: true,
  length: undefined,
  read: [Function],
  _startAt: [ 733573, 66590477 ],
  _startTime: 2018-02-05T18:01:03.406Z,
  _remoteAddress: '::1',
  _passport: 
   { instance: 
      Authenticator {
        _key: 'passport',
        _strategies: [Object],
        _serializers: [Object],
        _deserializers: [Object],
        _infoTransformers: [],
        _framework: [Object],
        _userProperty: 'user',
        Authenticator: [Function: Authenticator],
        Passport: [Function: Authenticator],
        Strategy: [Object],
        strategies: [Object] },
     session: { user: 'xchen@contracosta.courts.ca.gov' } },
  user: 
   { _id: 5a737e49e440d2445c40b21c,
     updatedAt: 2018-02-01T20:53:29.268Z,
     createdAt: 2018-02-01T20:53:29.268Z,
     authType: 'azure',
     email: 'xchen@contracosta.courts.ca.gov',
     __v: 0,
     role: 'Member',
     cases: [],
     profile: { firstName: 'Xi', lastName: 'Chen' } },
  route: 
   Route {
     path: '/api/auth/openid/return',
     stack: [ [Object], [Object] ],
     methods: { post: true } },
  authInfo: {} }
[0mPOST /api/auth/openid/return [31m500 [0m448.150 ms - 3354[0m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `babel-node index.js --presets es2015,stage-2`[39m
{"name":"AzureAD: OIDC Passport Strategy","hostname":"Peacha","pid":23872,"level":40,"msg":"Using http for redirectUrl is not recommended, please consider using https","time":"2018-02-05T18:02:43.680Z","v":0}
handleRender:  undefined
C:\Users\xichentop\Documents\ContraCostaInternship\mainsite-xc\server
Connected to DB
Terminate batch job (Y/N)? Terminate batch job (Y/N)? 